<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>mac终端自动化</title>
      <link href="/posts/25777/"/>
      <url>/posts/25777/</url>
      
        <content type="html"><![CDATA[<p>删除所有空文件夹：</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find ./ -<span class="built_in">type</span> d -empty -delete</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>投影</title>
      <link href="/posts/50690/"/>
      <url>/posts/50690/</url>
      
        <content type="html"><![CDATA[<p>投影（projector）是一个幂等（idempotent）方阵： <span class="math display">\[P^2=P.\]</span> <span id="more"></span></p><h2 id="解释">解释</h2><p>为什么管 <span class="math inline">\(P\)</span> 叫投影呢？我们想一个现实的场景：阳光从天上照下来，把大家都投影到地面上，让大家都有了地面上的影子。<span class="math inline">\(P\)</span> 就像是阳光，把向量 <span class="math inline">\(v\)</span> 投影到 <span class="math inline">\(P\)</span> 的值域 <span class="math inline">\(\text{range}(P)\)</span> 里（也就是此时的地面），结果 <span class="math inline">\(Pv\)</span> 就是 <span class="math inline">\(v\)</span> 在地面上的影子。</p><img src="/posts/50690/Proj.gif" class=""><p><em>一个投影的作用，和平面上一个点的影子。之后我们会解释它为什么是不满秩的。</em></p><p>那为什么要求 <span class="math inline">\(P\)</span> 幂等呢？不是任何矩阵都可以做到吗？这就是“影子”的性质了。如果地面上已经有影子了，它的影子是谁？是它自己嘛！假设 <span class="math inline">\(v\)</span> 已经在 <span class="math inline">\(P\)</span> 的值域中，我们不妨写作 <span class="math inline">\(v=Px\)</span>，于是根据 <span class="math inline">\(P\)</span> 的性质： <span class="math display">\[Pv=P(Px)=P^2x=Px=v.\]</span> 这就是说，<span class="math inline">\(v\)</span> 的影子还是 <span class="math inline">\(v\)</span>。只有 <span class="math inline">\(P\)</span> 满足了幂等性质，才会使得“影子的影子是自己”。换句话说，投影多少遍的效果和投影一遍的效果是一样的。上面的图中，实际上投影作用了两次，只不过第二次什么也没有发生。</p><p>我们看一下一般的奇异矩阵作用两次的效果：<img src="/posts/50690/NotProj.gif" class=""> <em>第二次作用时，影子移动了。这就不符合影子的性质了。</em></p><h2 id="补投影与直和分解">补投影与直和分解</h2><p>如果 <span class="math inline">\(P\)</span> 是幂等的，那么 <span class="math inline">\(I-P\)</span> （被称为 complementary projector）也是幂等的： <span class="math display">\[(I-P)^2=I-2P+P^2=I-2P+P=I-P.\]</span> 它投向的子空间是 <span class="math inline">\(P\)</span> 的核（怎么证明？用互相包含）： <span class="math display">\[\text{range}(I-P)=\text{null}(P).\]</span> 我们也可以对称地得到 <span class="math display">\[\text{null}(I-P)=\text{range}(P).\]</span> 可以容易地验证 <span class="math display">\[\text{range}(P)\cap\text{null}(P)=\{0\},\]</span> 这表明一个投影的核和像构成了全空间的直和。反之也是成立的（后面给出一个构造性的证明）：假设 <span class="math display">\[\C^n=X\oplus Y,\]</span> 那么就存在一个投影 <span class="math inline">\(P\)</span> 使得 <span class="math inline">\(X=\text{range}(P)\)</span>，并且 <span class="math inline">\(Y=\text{null}(P)\)</span>。我们把 <span class="math inline">\(P\)</span> 叫做<strong>沿 <span class="math inline">\(Y\)</span> 至 <span class="math inline">\(X\)</span> 的投影</strong>。给定 <span class="math inline">\(v\in\C^n\)</span>，那么 <span class="math inline">\(Pv\)</span> 位于 <span class="math inline">\(X\)</span> 中，<span class="math inline">\((I-P)v\)</span> 位于 <span class="math inline">\(Y\)</span> 中。</p><h2 id="正交投影">正交投影</h2><p>正交投影指的是上文中 <span class="math inline">\(X\perp Y\)</span> 的情况。<strong>正交投影指的不是 <span class="math inline">\(P\)</span> 是正交矩阵！</strong>反而，它指的是 <span class="math inline">\(P\)</span> 对称。</p><div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><img src="/file/gif/Proj.gif"></div><div class="group-picture-column" style="width: 50%;"><img src="/file/gif/ComplementProj.gif" alt="image description"></div></div></div></div><p><em>一个正交投影和它的补投影。可见它们的值域构成了平面的正交直和分解。</em></p><table><colgroup><col style="width: 100%"></colgroup><thead><tr class="header"><th>定理：<span class="math inline">\(P\)</span> 是正交投影 <span class="math inline">\(\iff\)</span> <span class="math inline">\(P\)</span> 是 Hermitian（实数域中对阵）的。</th></tr></thead><tbody><tr class="odd"><td><span class="math inline">\((\Longleftarrow)\)</span> 假设 <span class="math inline">\(P=P^*\)</span>，我们要证 <span class="math inline">\(\range(P)\)</span> 中的 <span class="math inline">\(Px\)</span> 和 <span class="math inline">\(\null(P)\)</span> 中的 <span class="math inline">\((I-P)y\)</span> 是正交的。这个简单，直接验证<br><span class="math display">\[(Px)^*(I-P)y=x^*P^*(I-P)y=x^*(P-P^2)y=0.\]</span><br><span class="math inline">\((\Longrightarrow)\)</span> 假设 <span class="math inline">\(m\)</span> 阶方阵 <span class="math inline">\(P\)</span> 是沿着 <span class="math inline">\(Y\)</span> 到 <span class="math inline">\(X\)</span> 的投影，其中 <span class="math inline">\(X\)</span> 是 <span class="math inline">\(n\)</span> 维空间，且 <span class="math inline">\(X\)</span> 与 <span class="math inline">\(Y\)</span> 正交。注意其中 <span class="math inline">\(X=\range(P)\)</span>，<span class="math inline">\(Y=\null(P)\)</span>。记全空间的一组正交基 <span class="math inline">\(\{q_1,\ldots,q_m\}\)</span> 中的 <span class="math inline">\(\{q_1,\ldots,q_n\}\)</span> 是 <span class="math inline">\(X\)</span> 的基，<span class="math inline">\(\{q_{n+1},\ldots,q_m\}\)</span> 是 <span class="math inline">\(Y\)</span> 的基。由于 <span class="math inline">\(X\)</span> 的基都在 <span class="math inline">\(P\)</span> 的值域中，对其中的 <span class="math inline">\(q_i\)</span> 有 <span class="math inline">\(Pq_i=q_i\)</span>（“影子”的性质）。而 <span class="math inline">\(Y\)</span> 的基都在 <span class="math inline">\(P\)</span> 的核中，相应地有 <span class="math inline">\(Pq_i=0\)</span>。<br>记 <span class="math inline">\(Q=[q_1,\ldots,q_m]\)</span>，就有 <span class="math inline">\(PQ=[q_1,\ldots,q_n,0,\ldots,0]\)</span>。于是<span class="math display">\[Q^*PQ=\begin{bmatrix}1 &amp;&amp;&amp;\\&amp;\ddots&amp;&amp;&amp;\\&amp;&amp;1&amp;&amp;\\&amp;&amp;&amp;0&amp;\\&amp;&amp;&amp;&amp;\ddots\end{bmatrix}=:\Sigma\]</span>是一个对角阵，那么 <span class="math inline">\(P=Q\Sigma Q^*\)</span> 就是 Hermitian 的。</td></tr><tr class="even"><td><em>注 1：这个方法实际上构造了 <span class="math inline">\(P\)</span> 的 SVD 分解。</em></td></tr><tr class="odd"><td><em>注 2：这说明了满秩的投影矩阵只能是单位阵：<span class="math inline">\(P=QQ^*=I\)</span>。一般地，投影矩阵都是奇异阵。</em></td></tr></tbody></table><h2 id="标准正交基">标准正交基</h2><p>在上文中我们得到了一个正交投影的 SVD 分解：<span class="math display">\[P=Q\Sigma Q^*=Q\begin{bmatrix}1 &amp;&amp;&amp;\\&amp;\ddots&amp;&amp;&amp;\\&amp;&amp;1&amp;&amp;\\&amp;&amp;&amp;0&amp;\\&amp;&amp;&amp;&amp;\ddots\end{bmatrix}Q^*,\]</span>我们可以自然地略去那些 0 奇异值：<span class="math display">\[\begin{equation}\label{orthonormal}\boxed{P=\tilde Q\tilde Q^*}\end{equation},\]</span>其中 <span class="math inline">\(\tilde Q\)</span> 是 <span class="math inline">\(Q\)</span> 的前 <span class="math inline">\(\rank(P)\)</span> 列组成的，它的列是单位正交的（此时称 <span class="math inline">\(\tilde Q\)</span> 是 orthonormal 的）。</p><p>只要任给一个 orthonormal 的矩阵 <span class="math inline">\(\tilde Q^*\)</span>，总可以构成一个正交投影 <span class="math inline">\(\tilde Q\tilde Q^*\)</span>，它将所有向量投到 <span class="math inline">\(\range(\tilde Q)\)</span> 中。而它的补投影 <span class="math inline">\(I-\tilde Q\tilde Q^*\)</span> 也是一个正交投影（证明：它是 Hermitian 的），投至的空间正交于 <span class="math inline">\(\range(\tilde Q)\)</span>。</p><p>一个特殊情况是 <span class="math inline">\(\tilde Q\)</span> 是（单位化的）列向量 <span class="math inline">\(q\)</span>，此时两个投影就是<span class="math display">\[P_q=qq^{*},\quad P_{\perp q}=I-qq^*.\]</span>它们在 Householder reflection 中起到了重要作用。</p><h2 id="一般基">一般基</h2><p>假设 <span class="math inline">\(\{a_1,\ldots,a_n\}\)</span> 是一个子空间的基，但不一定标准正交。记它们组成了矩阵 <span class="math inline">\(A\in\C^{m\times n}\)</span>，那么投入该子空间的正交投影是<span class="math display">\[\boxed{P=A(A^*A)^{-1}A^*}.\]</span>怎么得到的呢？</p><p>设 <span class="math inline">\(v\)</span> 是空间中的向量，那么正交投影后的 <span class="math inline">\(Pv\)</span> 在 <span class="math inline">\(\range(A)\)</span> 中，剩下的分量 <span class="math inline">\(v-Pv\)</span> 正交于 <span class="math inline">\(\range(A)\)</span>：<span class="math display">\[A^*(v-Pv)=0.\]</span>记影子 <span class="math inline">\(Pv=Ax\)</span>（因为它在 <span class="math inline">\(A\)</span> 的值域中），那么有<span class="math display">\[A^{*}(v-Ax)=0\implies x=(A^*A)^{-1}A^*v,\]</span>对比 <span class="math inline">\(Ax=Pv\)</span> 便得到了 <span class="math inline">\(P=A(A^*A)^{-1}A^*\)</span>。注意当 <span class="math inline">\(A\)</span> 的各列标准正交时，就退化成了 <span class="math inline">\(\eqref{orthonormal}\)</span>。</p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 线性代数 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>数据可视化</title>
      <link href="/posts/24365/"/>
      <url>/posts/24365/</url>
      
        <content type="html"><![CDATA[<p>matplotlib, seaborn, plotly, altair 画图。 <span id="more"></span></p><iframe src="/file/visualization.html" width="100%" height="23500"></iframe>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Fraud Detection</title>
      <link href="/posts/22475/"/>
      <url>/posts/22475/</url>
      
        <content type="html"><![CDATA[<iframe src="/file/fraud.html" width="100%" height="11000"></iframe>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>异常值检测</title>
      <link href="/posts/63931/"/>
      <url>/posts/63931/</url>
      
        <content type="html"><![CDATA[<h2 id="背景">背景</h2><h3 id="应用场景">应用场景</h3><ol type="1"><li>金融<ol type="1"><li>账户安全性</li><li>客户真实性</li><li>欺诈检测（保险，审计，刷单，骗购，刷评论）</li></ol></li><li>计算机安全检测，网络流量异常检测</li><li>调查可靠性，查询安全性</li><li>硬件检测（数据中心，云服务）</li><li>药品检测</li></ol><span id="more"></span><h3 id="难点">难点</h3><ul><li>确定正常状态的范围非常困难。通常，正常和异常的边界很模糊，边界附近的点容易误判。</li><li>异常可能被伪装。</li><li>缺乏标记数据。</li><li>数据通常含有噪音。</li></ul><h2 id="不同类型">不同类型</h2><h3 id="点异常point-anomalies">点异常（Point Anomalies）</h3><p>大多数情况。与其他数据相比，单个数据的异常。</p><blockquote><p>一大笔交易在一些小额交易中是异常。</p></blockquote><h3 id="上下文异常contextual-anomalies">上下文异常（Contextual Anomalies）</h3><p>数据在特定上下文中是异常的，在不同的上下文中可能不是异常。</p><blockquote><p>26°C 在冬天是异常，但在夏天是正常。</p><p>一大笔消费在工作时间是异常，但在促销季是正常。</p></blockquote><h3 id="集合异常collective-anomalies">集合异常（Collective Anomalies）</h3><p>不常见，难以检测（可能从未发生过）。数据的集合在整个数据集中异常，但单个值不是异常。</p><blockquote><p>大量地购买 iPhone 是异常，但购买一部不是。</p><p>同时购买高压锅、背包和钉子是异常。</p></blockquote><h2 id="欺诈种类">欺诈种类</h2><h3 id="atoaccount-hacker">ATO（Account Hacker）</h3><h4 id="device-malwares">Device Malwares</h4><ul><li>mobile interception</li><li>reroute traffic</li><li>malicious material in network security system</li></ul><h4 id="phishing-websites">Phishing Websites</h4><p>需要输入个人信息：信用卡、银行账号、登录信息等</p><h3 id="identity-theft">Identity Theft</h3><p>拿到身份后去申请贷款、信用卡、银行透支</p><h3 id="social-engineering">Social Engineering</h3><p>针对大众，或针对特定群体、组织</p><h2 id="欺诈模型-feature">欺诈模型 feature</h2><ul><li>交易信息<ul><li>国家、地区、邮编、地址、姓名、邮箱、IP</li><li>安全认证：手机、邮箱</li><li>金额</li><li>产品类型</li><li>时间</li></ul></li><li>设备信息<ul><li>操作系统、浏览器、app、IP、VPN</li></ul></li><li>链接信息<ul><li>同一台设备上的账号数</li></ul></li><li>风险评估<ul><li>邮箱域名、地址</li></ul></li><li>时间聚合</li><li>其他<ul><li>性别、年龄、签发银行</li><li>卡类型</li></ul></li></ul><h2 id="模型">模型</h2><h3 id="固定阈值模型">固定阈值模型</h3><p>超过阈值认为异常。怎么定阈值？</p><ul><li>预先学习过的数据（top k，分位数）</li><li>SLA（Service Level Agreement），用户要求</li></ul><p>优势：简单、广泛、恒定</p><p>缺陷：不适用于周期、趋势、季节性数据</p><h3 id="移动阈值模型">移动阈值模型</h3><p>阈值是输入的函数。比如，当前阈值是前 60 个值的中位数的 <span class="math inline">\(k\)</span> 倍。</p><h3 id="时间序列模型">时间序列模型</h3><p>AR，MA，ARIMA</p><h3 id="百分位模型">百分位模型</h3><p>比如，一个顾客的消费异常，如果它超过了相似顾客消费中位数的 <span class="math inline">\(k\%\)</span>。</p><h3 id="统计模型">统计模型</h3><h4 id="一维">一维</h4><p>在正态分布假设下，<span class="math inline">\(3\sigma\)</span> 包含了 <span class="math inline">\(99.7\%\)</span> 的数据。</p><p>箱线图分析：最小 <span class="math inline">\(Q_1-k(Q_3-Q_1)\)</span>，最大 <span class="math inline">\(Q_3+k(Q_3-Q_1)\)</span> 。</p><h4 id="高维">高维</h4><p>在每维特征独立同高斯分布的假设下， <span class="math display">\[p(x)=\prod_{j=1}^n{1\over\sqrt{2\pi}\sigma_j}\exp\left(-\frac{(x_j-\mu_j)^2}{2\sigma_j^2}\right).\]</span> 报异常如果 <span class="math inline">\(p(x)&lt;\varepsilon\)</span> 。</p><h3 id="无监督模型">无监督模型</h3><h4 id="k-means">K-means</h4><h4 id="isolation-forest">Isolation Forest</h4><p>binary tree 的集合，随机分裂。异常值更容易被分到叶子结点上，正常值更深。</p><h4 id="loflocal-outlier-factor">LOF（Local Outlier Factor）</h4><p>对每个数据点，计算到其他点的距离，找到 kNN，计算分数。思想是计算相对密度，如果一个点的相对密度很低，认为是异常值。</p><p>不适用于大数据集（计算距离、排序很耗时），参数选择困难。</p><h2 id="一个例子">一个例子</h2><p>假设有 10000 个正常硬盘、20 个损坏硬盘的数据。我们把数据分成三组：</p><p>train：6000 个正常硬盘</p><p>test：2000个正常硬盘，10 个损坏硬盘</p><p>validation：2000 个正常硬盘，10 个损坏硬盘</p><ol type="1"><li>用 train 构建 <span class="math inline">\(p(x)\)</span>。</li><li>在 validation 上尝试不同的 <span class="math inline">\(\varepsilon\)</span>，根据 <span class="math inline">\(F_1\)</span> 或查准率等来选择阈值。</li><li>在 test 上做预测，计算 <span class="math inline">\(F_1\)</span>，precision，recall 等。</li></ol><iframe src="/file/OutlierDetection.html" width="100%" height="7000"></iframe>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Amazon TV Convert Rate Prediction</title>
      <link href="/posts/44648/"/>
      <url>/posts/44648/</url>
      
        <content type="html"><![CDATA[<iframe src="/file/amazon_cvt.html" width="100%" height="20200"></iframe>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Attribution Model</title>
      <link href="/posts/53003/"/>
      <url>/posts/53003/</url>
      
        <content type="html"><![CDATA[<p>客户在从看到产品广告到完成购买经历了很多事件，怎么给这些事件的重要性分配 credit？</p><span id="more"></span><h2 id="single-source-touch-attribution">Single Source (Touch) Attribution</h2><p>把所有的 credit 分给一个事件。比如 3 days last touch：往回看三天，分给最近的 marketing vehicle 。</p><p>缺点：</p><ul><li>鼓励频繁发邮件，长期不利</li><li>一次折扣有帮助，长期不利</li><li>新用户需要很多次点击才会购买，会忽视初始几次事件</li></ul><h2 id="fractioned-attribution">Fractioned Attribution</h2><p>多个事件有权重。比如：首末两个事件占 40%，中间的事件平分 20%。</p><p>缺点是难以确定最佳权重。</p><h2 id="machine-learning">Machine Learning</h2><p>比如有两个 action，构建 feature：</p><ol type="1"><li>action 1 出现的位置是 1</li><li>action 1 出现的位置是 2</li><li>action 2 出现的位置是 1</li><li>action 2 出现的位置是 2</li></ol><p>如果一个顾客经历了 action 1 -&gt; action 2 后买了，那么 <span class="math inline">\(x=(1, 0, 0, 1),\ y=1\)</span>。</p><p>如果一个顾客经历了 action 2 就买了，那么 <span class="math inline">\(x=(0, 0, 1, 0),\ y=0\)</span>。</p><p>如果有 <span class="math inline">\(n\)</span> 个 action，就要有 <span class="math inline">\(n^2\)</span> 个 binary feature。</p><p>逻辑回归之后，设它们的系数是 <span class="math inline">\(k_1,\ldots,k_n\)</span>。那么 action 1 的 credit 就是 <span class="math inline">\(\frac{k_1+\cdots+k_n}{\sum k_i}\)</span>，action 2 的 credit 就是 <span class="math inline">\(\frac{k_{n+1}+\cdots+k_{2n}}{\sum k_i}\)</span>，以此类推。</p>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Search Engine Marketing</title>
      <link href="/posts/49742/"/>
      <url>/posts/49742/</url>
      
        <content type="html"><![CDATA[<h2 id="tf-idfterm-frequency-inverse-document-frequency">TF-IDF（Term Frequency, Inverse Document Frequency）</h2><p><span class="math display">\[\text{IDF}=\frac{1}{\text{document frequency}}\]</span></p><p>一个词在越多个文档中出现，说明它越不重要，对应的IDF越低。</p><span id="more"></span><p>比如用户查询 <code>croquets and bitterballen</code>，在我们所有文档中，有 2 个包含 <code>croquets</code>，100 个包含 <code>and</code>，2 个包含 <code>bitterballen</code>。那么它们对应的 IDF 就分别为 0.5，0.01，0.5。</p><p>假设第一个文档中出现 8 次 <code>croquets</code>，10 次 <code>and</code>，2 次 <code>bitterballen</code>；第二个文档中只出现 100 次 <code>and</code>。</p><p>那么第一个文档的评分为 <span class="math inline">\(8\times 0.5 + 10\times 0.01 + 2\times 0.5=5.1\)</span>，第二个文档的评分为 <span class="math inline">\(0.01\times 100=1\)</span>。</p><p>这本质上就是利用 IDF 降低了一些无关词的权重。</p><h2 id="google-ad-rank">Google Ad Rank</h2><p><span class="math display">\[\text{ad rank}=\text{max cpc bid}\times\text{quality score}\]</span></p><p>前一项是广告商出价（CPC，cost per click），后一项是网站质量评分。</p><p>还有一个 threshold 来决定广告的个数。</p><h2 id="actual-cpc">Actual CPC</h2><p><span class="math display">\[\text{Actual CPC}={\text{next ad rank}\over\text{your quality score}}+0.01\]</span></p><h2 id="measurement">Measurement</h2><p><span class="math display">\[\text{CTR (Click-Through Rate)}={\text{clicks}\over\text{impressions}}\]</span></p><p><span class="math display">\[\text{Conversion Rate}=\frac{\text{conversion}}{\text{clicks}}\]</span></p><p><span class="math display">\[\text{Cost Per Acquisition}=\frac{\text{total cost}}{\text{conversions}}\]</span></p><h2 id="ab-testing">AB Testing</h2><p>假设 A 有 30000 次 impression，CTR 为 0.1，点击量 3000；B 有 20000 次 impression，CTR 为 0.099，点击量为 1998 。如何比较 CTR？</p><p>原假设：两个 CTR 相等。 <span class="math display">\[p={n_1p_1+n_2p_2\over n_1+n_2}\]</span></p><p><span class="math display">\[z={p_1-p_2\over\sqrt{p(1-p)\left(\frac{1}{n_1}+\frac{1}{n_2}\right)}}\]</span></p><p>见 <a href="/posts/24350/index.html">假设性检验</a>。</p><h2 id="customers-journey">Customer's Journey</h2><ol type="1"><li>Trigger：电视广告、朋友推荐等</li><li>Initial Consideration Set：对比产品</li><li>Zero Moment of Truth：根据信息调整结果</li><li>First Moment of Truth：实体店、网店，第一印象</li><li>Purchase Decision：决定买或者不买</li><li>Second Moment of Truth：用户体验</li></ol>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>法语A2</title>
      <link href="/posts/52080/"/>
      <url>/posts/52080/</url>
      
        <content type="html"><![CDATA[<h2 id="动词变位">动词变位</h2><table><thead><tr class="header"><th>payer（支付）</th><th>-</th></tr></thead><tbody><tr class="odd"><td>je paie /e/</td><td>nous payons</td></tr><tr class="even"><td>tu paies</td><td>vous payez</td></tr><tr class="odd"><td>il paie</td><td>ils paient</td></tr></tbody></table><table><thead><tr class="header"><th>compléter（完成）</th><th>-</th></tr></thead><tbody><tr class="odd"><td>je complète</td><td>nous complétons</td></tr><tr class="even"><td>tu complètes</td><td>vous complétez</td></tr><tr class="odd"><td>il complète</td><td>ils complètent</td></tr></tbody></table><table><thead><tr class="header"><th>recevoir（收到）</th><th>reçu</th></tr></thead><tbody><tr class="odd"><td>je reçois</td><td>nous recevons</td></tr><tr class="even"><td>tu reçois</td><td>vous recevez</td></tr><tr class="odd"><td>il reçoit</td><td>ils reçoivent</td></tr></tbody></table><table><thead><tr class="header"><th>promettre（答应）</th><th>promis</th></tr></thead><tbody><tr class="odd"><td>je promets</td><td>nous promettons</td></tr><tr class="even"><td>tu promets</td><td>vous promettez</td></tr><tr class="odd"><td>il promet</td><td>ils promettent</td></tr></tbody></table><table><thead><tr class="header"><th>valoir（价值）</th><th>valu</th></tr></thead><tbody><tr class="odd"><td>je vaux</td><td>nous valons</td></tr><tr class="even"><td>tu vaux</td><td>vous valez</td></tr><tr class="odd"><td>il vaut</td><td>ils valent</td></tr></tbody></table><table><thead><tr class="header"><th>perdre（丢失，错过，输）</th><th>perdu</th></tr></thead><tbody><tr class="odd"><td>je perds</td><td>nous perdons</td></tr><tr class="even"><td>tu perds</td><td>vous perdez</td></tr><tr class="odd"><td>il perd</td><td>ils perdent</td></tr></tbody></table><table><thead><tr class="header"><th>accueillir（迎接、接受）</th><th>accueilli</th></tr></thead><tbody><tr class="odd"><td>j'accueille</td><td>nous accueillons</td></tr><tr class="even"><td>tu accueilles</td><td>vous accueillez</td></tr><tr class="odd"><td>il accueille</td><td>ils accueillent</td></tr></tbody></table><table><thead><tr class="header"><th>paraître（出现）</th><th>paru</th></tr></thead><tbody><tr class="odd"><td>je parais</td><td>nous paraissons</td></tr><tr class="even"><td>tu parais</td><td>vous paraissez</td></tr><tr class="odd"><td>il paraît</td><td>ils paraissent</td></tr></tbody></table><table><thead><tr class="header"><th>plaire（使高兴）</th><th>plu</th></tr></thead><tbody><tr class="odd"><td>je plais</td><td>nous paisons</td></tr><tr class="even"><td>tu plais</td><td>vous plaisez</td></tr><tr class="odd"><td>il plaît</td><td>ils plaisent</td></tr></tbody></table><table><thead><tr class="header"><th>rire（笑）</th><th>ri</th></tr></thead><tbody><tr class="odd"><td>je ris</td><td>nous rions</td></tr><tr class="even"><td>tu ris</td><td>vous riez</td></tr><tr class="odd"><td>il rit</td><td>ils rient</td></tr></tbody></table><table><thead><tr class="header"><th>éteindre（关掉）</th><th>éteint</th></tr></thead><tbody><tr class="odd"><td>j'éteins</td><td>nous éteignons</td></tr><tr class="even"><td>tu éteins</td><td>vous éteignez</td></tr><tr class="odd"><td>il éteint</td><td>ils éteignent</td></tr></tbody></table><table><thead><tr class="header"><th>réduire（减少）</th><th>réduit</th></tr></thead><tbody><tr class="odd"><td>je réduis</td><td>nous réduisons</td></tr><tr class="even"><td>tu réduis</td><td>vous réduisez</td></tr><tr class="odd"><td>li réduit</td><td>ils réduisent</td></tr></tbody></table><table><thead><tr class="header"><th>servir（服务、用来）</th><th>servi</th></tr></thead><tbody><tr class="odd"><td>je sers</td><td>nous servons</td></tr><tr class="even"><td>tu sers</td><td>vous servez</td></tr><tr class="odd"><td>il sert</td><td>ils servent</td></tr></tbody></table><table><thead><tr class="header"><th>découvrir（发现、旅游）</th><th>découvert</th></tr></thead><tbody><tr class="odd"><td>je décourvre</td><td>nous découvrons</td></tr><tr class="even"><td>tu découvre</td><td>vous découvrez</td></tr><tr class="odd"><td>il découvre</td><td>ils découvrent</td></tr></tbody></table><h3 id="条件式现在时">条件式现在时</h3><p>简单将来时词根+未完成过去时词尾</p><table><thead><tr class="header"><th>aimer</th><th>-</th></tr></thead><tbody><tr class="odd"><td>j'aimerais</td><td>nous aimerions</td></tr><tr class="even"><td>tu aimerais</td><td>vous aimeriez</td></tr><tr class="odd"><td>il aimerait</td><td>ils aimeraient</td></tr></tbody></table><table><thead><tr class="header"><th>être</th><th>-</th></tr></thead><tbody><tr class="odd"><td>je serais</td><td>nous serions</td></tr><tr class="even"><td>tu serais</td><td>vous seriez</td></tr><tr class="odd"><td>il serait</td><td>ils seraient</td></tr></tbody></table><table><thead><tr class="header"><th>avoir</th><th>-</th></tr></thead><tbody><tr class="odd"><td>j'aurais</td><td>nous aurions</td></tr><tr class="even"><td>tu aurais</td><td>vous auriez</td></tr><tr class="odd"><td>il aurait</td><td>ils auraient</td></tr></tbody></table><table><thead><tr class="header"><th>faire</th><th>-</th></tr></thead><tbody><tr class="odd"><td>je ferais</td><td>nous ferions</td></tr><tr class="even"><td>tu ferais</td><td>vous feriez</td></tr><tr class="odd"><td>il ferait</td><td>ils feraient</td></tr></tbody></table><table><thead><tr class="header"><th>vouloir</th><th>-</th></tr></thead><tbody><tr class="odd"><td>je voudrais</td><td>nous voudrions</td></tr><tr class="even"><td>tu voudrais</td><td>vous voudriez</td></tr><tr class="odd"><td>il voudrait</td><td>ils voudraient</td></tr></tbody></table><h3 id="虚拟式现在时">虚拟式现在时</h3><p>第一小分队（je, tu, il/elle, ils/ellles）：直陈式现在时，复数第三人称（ils）变位去掉ent，加e, es, e, ent</p><p>第二小分队（nous, vous）：直陈式现在时，复数第一人称（nous）变位去掉ons，加ions, iez</p><table><thead><tr class="header"><th>parler</th><th>-</th></tr></thead><tbody><tr class="odd"><td>que je parle</td><td>que nous parlions</td></tr><tr class="even"><td>que tu parles</td><td>que vous parliez</td></tr><tr class="odd"><td>qu'il parle</td><td>qu'ils parlent</td></tr></tbody></table><table><thead><tr class="header"><th>avoir</th><th>-</th></tr></thead><tbody><tr class="odd"><td>que j'aie</td><td>que nous ayons</td></tr><tr class="even"><td>que tu aies</td><td>que vous ayez</td></tr><tr class="odd"><td>qu'il ait</td><td>qu'ils aient</td></tr></tbody></table><table><thead><tr class="header"><th>être</th><th>-</th></tr></thead><tbody><tr class="odd"><td>que je sois</td><td>que nous soyons</td></tr><tr class="even"><td>que tu sois</td><td>que vous soyez</td></tr><tr class="odd"><td>qu'il soit</td><td>qu'ils soient</td></tr></tbody></table><table><thead><tr class="header"><th>faire</th><th>-</th></tr></thead><tbody><tr class="odd"><td>que je fasse</td><td>que nous fassions</td></tr><tr class="even"><td>que tu fasses</td><td>que vous fassiez</td></tr><tr class="odd"><td>qu'il fasse</td><td>qu'il fassent</td></tr></tbody></table><table><thead><tr class="header"><th>aller</th><th>-</th></tr></thead><tbody><tr class="odd"><td>que j'aille</td><td>que nous allions</td></tr><tr class="even"><td>que tu ailles</td><td>que vous alliez</td></tr><tr class="odd"><td>qu'il aille</td><td>qu'ils aillent</td></tr></tbody></table><table><thead><tr class="header"><th>vouloir</th><th>-</th></tr></thead><tbody><tr class="odd"><td>que je veuille</td><td>que nous voulions</td></tr><tr class="even"><td>que tu veuilles</td><td>que vous vouliez</td></tr><tr class="odd"><td>qu'il veuille</td><td>qu'ils veuillent</td></tr></tbody></table><table><thead><tr class="header"><th>pouvoir</th><th>-</th></tr></thead><tbody><tr class="odd"><td>que je puisse</td><td>que nous puissions</td></tr><tr class="even"><td>que tu puisses</td><td>que vous puissiez</td></tr><tr class="odd"><td>qu'il puisse</td><td>qu'ils puissent</td></tr></tbody></table><table><thead><tr class="header"><th>savoir</th><th>-</th></tr></thead><tbody><tr class="odd"><td>que je sache</td><td>que nous sachions</td></tr><tr class="even"><td>que tu saches</td><td>que vous sachiez</td></tr><tr class="odd"><td>qu'il sache</td><td>qu'ils sachent</td></tr></tbody></table><table><thead><tr class="header"><th>devoir</th><th>-</th></tr></thead><tbody><tr class="odd"><td>que je doive</td><td>que nous devions</td></tr><tr class="even"><td>que tu doives</td><td>que vous deviez</td></tr><tr class="odd"><td>qu'il doive</td><td>qu'ils doivent</td></tr></tbody></table><p>pleuvoir: qu'il pleuve</p><p>falloir: qu'il faille</p><h2 id="词汇">词汇</h2><h3 id="形容词的位置">形容词的位置</h3><p>名词之后：颜色、国籍、形状、宗教、过去分词、-ant、带补语</p><p>名词前：品质形容词 beau, joli, jeune, vieux, petit, grand, bon, nouveau</p><p>根据位置改变意义：</p><table><thead><tr class="header"><th>adj</th><th>adj + n.</th><th>n. + adj.</th></tr></thead><tbody><tr class="odd"><td>ancien</td><td>从前的、如今已不是的</td><td>古老的</td></tr><tr class="even"><td>brave</td><td>善良的、正直的</td><td>勇敢的</td></tr><tr class="odd"><td>certain</td><td>有点、一些</td><td>不可怀疑的、明显的</td></tr><tr class="even"><td>cher</td><td>亲爱的</td><td>昂贵的</td></tr><tr class="odd"><td>curieux</td><td>奇怪的</td><td>好奇的</td></tr><tr class="even"><td>grand</td><td>重要的、伟大的</td><td>身材高大的</td></tr><tr class="odd"><td>jeune</td><td>新进的</td><td>年轻的</td></tr><tr class="even"><td>pauvre</td><td>可怜的</td><td>贫穷的</td></tr><tr class="odd"><td>rare</td><td>不多的</td><td>稀有的</td></tr><tr class="even"><td>seul</td><td>唯一的</td><td>孤独的</td></tr><tr class="odd"><td>vrai</td><td>重要的</td><td>真实的</td></tr><tr class="even"><td>propre</td><td>自己的</td><td>干净的</td></tr></tbody></table><h3 id="频率副词">频率副词</h3><table><thead><tr class="header"><th>parfois</th><th>有时</th></tr></thead><tbody><tr class="odd"><td>souvent</td><td>经常</td></tr><tr class="even"><td>toujours</td><td>总是</td></tr><tr class="odd"><td>rarement</td><td>极少</td></tr><tr class="even"><td>ne...jamais</td><td>从不</td></tr></tbody></table><h3 id="强度副词">强度副词</h3><table><thead><tr class="header"><th>beaucoup</th><th>非常</th></tr></thead><tbody><tr class="odd"><td>un peu</td><td>稍微</td></tr><tr class="even"><td>peu</td><td>不太</td></tr><tr class="odd"><td>très</td><td>很</td></tr><tr class="even"><td>trop</td><td>过于</td></tr><tr class="odd"><td>tellement/si</td><td>如此地</td></tr><tr class="even"><td>vraiment</td><td>确实地</td></tr></tbody></table><table><thead><tr class="header"><th>-</th><th>-</th></tr></thead><tbody><tr class="odd"><td>trouver / se trouver</td><td>找到、认为/位于、处于</td></tr></tbody></table><h3 id="泛指形容词">泛指形容词</h3><table><thead><tr class="header"><th>chaque</th><th>每个</th></tr></thead><tbody><tr class="odd"><td>quelque</td><td>某个、某些</td></tr><tr class="even"><td>quelques</td><td>几个、少量</td></tr><tr class="odd"><td>plusieurs</td><td>好几个</td></tr><tr class="even"><td>certain(e)</td><td>某个</td></tr><tr class="odd"><td>certain(e)s</td><td>某些</td></tr><tr class="even"><td>tout</td><td>任何、整个、所有（见tout）</td></tr></tbody></table><h3 id="泛指代词">泛指代词</h3><table><thead><tr class="header"><th>ne...rien</th><th>没有什么东西</th></tr></thead><tbody><tr class="odd"><td>ne...personne</td><td>没有什么人</td></tr><tr class="even"><td>只能指物：rien, tout, quelque chose</td><td>什么事物，一切，某件事</td></tr><tr class="odd"><td>只能指人：on，personne</td><td>人们（有人），任何人</td></tr><tr class="even"><td>un(e) autre, l'autre, d'autres, les autres</td><td>另一个，另外那个，其他一些，其他那些</td></tr><tr class="odd"><td>quelqu'un(e)(s)</td><td>某人，某个，某些人</td></tr><tr class="even"><td>certain(e)s</td><td>某些人，某些事</td></tr><tr class="odd"><td>chacun</td><td>每个人，每个事物</td></tr><tr class="even"><td>plusieurs</td><td>好几个人，好几个</td></tr></tbody></table><p>后面的形容词，加de，使用阳性单数</p><p>C'est quelque chose de nouveau.</p><h3 id="时间标记语">时间标记语</h3><table><thead><tr class="header"><th>前天</th><th>avant-hier</th></tr></thead><tbody><tr class="odd"><td>昨天</td><td>hier</td></tr><tr class="even"><td>今天</td><td>aujourd'hui</td></tr><tr class="odd"><td>明天</td><td>demain</td></tr><tr class="even"><td>后天</td><td>après-demain</td></tr></tbody></table><table><thead><tr class="header"><th>从前</th><th>avant</th></tr></thead><tbody><tr class="odd"><td>以后</td><td>après / plus tard</td></tr><tr class="even"><td>不久</td><td>bientôt</td></tr><tr class="odd"><td>即将</td><td>prochainement</td></tr></tbody></table><table><thead><tr class="header"><th>在中午</th><th>à midi</th></tr></thead><tbody><tr class="odd"><td>在10点</td><td>à 10 heures</td></tr><tr class="even"><td>在2020年</td><td>en 2020</td></tr><tr class="odd"><td>在春天</td><td>au printemps</td></tr><tr class="even"><td>在冬天</td><td>en hiver</td></tr><tr class="odd"><td>在4月</td><td>en avril</td></tr></tbody></table><h4 id="次序">次序</h4><p>d'abord, ... puis / ensuite / alors / après, ... enfin ... 首先，然后，最后</p><blockquote><p>Il est allé chez le médecin <strong>d'abord</strong> et <strong>puis</strong> au magasin, <strong>enfin</strong> à la librairie.</p><p>他先去了诊所，之后去了商场，最后到了书店。</p></blockquote><p>提前：avant l'heure / en avance</p><p>做运动之前：avant de faire du sport</p><p>下班之后：après le travail</p><p>读完之后：après avoir lu</p><h4 id="同时性">同时性</h4><table><thead><tr class="header"><th>au moment où</th><th>在……的时候</th></tr></thead><tbody><tr class="odd"><td>quand</td><td>当</td></tr><tr class="even"><td>pendant que</td><td>在……期间</td></tr></tbody></table><blockquote><p>Il est arrivé <strong>quand</strong> elle partait. 她要出发时，他到了。</p><p>Prépare le café <strong>pendant que</strong> je faire la vaisselle. 我洗碗的时候你准备咖啡。</p></blockquote><h4 id="具体时间">具体时间</h4><ul><li><p>à un moment 在过去某个时候</p><p>À un moment, il s'est imaginé être une star.</p></li><li><p>à ce moment là 那时</p><p>À ce moment là, nous habitions dans une maison très petite. 那时我们住在一个很小的房子里。</p></li><li><p>en ce moment / maintenant / pour le moment / pour l'instant 现在</p><p>En ce moment, il a trop de problèmes personnels pour se concentrer à son travail.</p></li></ul><h4 id="持续时间">持续时间</h4><p>Les gens travaillent 8 heures par jour. 人们每天工作8小时。</p><p>Ils rentreront dans 2 semaines. 他们两个星期后回来。</p><h4 id="花费时间">花费时间</h4><p>J'ai fini cette lettre <strong>en</strong> 10 minutes. 我用十分钟写好了信。</p><h4 id="起始时间">起始时间</h4><p>Il neige <strong>depuis</strong> 2 jours. 已经下了两天雪了。</p><p>On ne s'est jamais vu <strong>depuis</strong> cette rencontre. 自从这次相遇后，我们再没见过面。</p><h4 id="时间期限">时间期限</h4><p>On ne l'a pas vu <strong>pendant</strong> plusieurs mois. 我们有好几个月没有看见他了。</p><h4 id="延续时间">延续时间</h4><p>Elle part <strong>pour</strong> combien de temps? 她要离开多少时间？</p><h3 id="副词-ment">副词 ment</h3><ul><li><p>辅音结尾，阴性单数 + ment</p><p>froid -&gt; froidement, vif -&gt; vivement</p></li><li><p>元音结尾：阳性单数 + ment</p><p>absolu -&gt; absolument</p></li><li><p>-ant，-ent：变为 -amment，-emment</p><p>suffisant -&gt; suffisamment, différent -&gt; différemment</p></li></ul><h3 id="短语">短语</h3><table><thead><tr class="header"><th>la dernière semaine</th><th>最后一周</th></tr></thead><tbody><tr class="odd"><td>la prochaine semaine</td><td>最近一周</td></tr><tr class="even"><td>comme d'habitude</td><td>和往常一样</td></tr><tr class="odd"><td>il s'agit de</td><td>关于</td></tr><tr class="even"><td>être en danger / sécurité</td><td>处于危险/安全中</td></tr><tr class="odd"><td>respecter qn / avoir respecte pour qn</td><td>尊重某人</td></tr><tr class="even"><td>s'en sortir</td><td>摆脱、搞定</td></tr><tr class="odd"><td>maintenant / en ce moment / pour l'instant / pour le moment</td><td>目前，暂时</td></tr><tr class="even"><td>prendre la route</td><td>开车</td></tr><tr class="odd"><td>en tout cas / de toute façon</td><td>无论如何</td></tr><tr class="even"><td>d'un côté..., de l'autre...</td><td>一边……另一边</td></tr><tr class="odd"><td>en conformité avec</td><td>与……一致</td></tr><tr class="even"><td>à mon avis</td><td>在我看来</td></tr></tbody></table><table><thead><tr class="header"><th>proposer qch à qch</th><th>向某人建议某事</th></tr></thead><tbody><tr class="odd"><td>proposer à qn de faire qch</td><td>建议某人做某事</td></tr><tr class="even"><td>aider qch à faire qn</td><td>帮助某人做某事</td></tr><tr class="odd"><td>laisser qn faire qch</td><td>让某人做某事</td></tr><tr class="even"><td>laisser qch à qn</td><td>留给某人某物</td></tr><tr class="odd"><td>s'abonner (prendre un abonnement) à qch</td><td>订阅某事</td></tr><tr class="even"><td>souhaiter qch à qn</td><td>祝福某物给某人</td></tr><tr class="odd"><td>penser à</td><td>想着、惦记</td></tr><tr class="even"><td>arriver à qn</td><td>做到某事</td></tr><tr class="odd"><td>monter qch à qn</td><td>向某人展示某物</td></tr><tr class="even"><td>donner la priorité à qch / qn</td><td>优先选择某事、人</td></tr><tr class="odd"><td>apprendre qch / à faire qch</td><td>学习做某事</td></tr><tr class="even"><td>apprendre qch à qn / apprendre à qn à faire qch</td><td>教某人做某事</td></tr><tr class="odd"><td>chercher à faire</td><td>力求做某事</td></tr><tr class="even"><td>destiner qch à qn</td><td>留给某人某物</td></tr><tr class="odd"><td>faire plaisir à qch</td><td>使某人高兴</td></tr><tr class="even"><td>inciter qn à faire qch</td><td>促使某人做某事</td></tr></tbody></table><table><thead><tr class="header"><th>avoir l'habitude de faire qch</th><th>习惯于做某事</th></tr></thead><tbody><tr class="odd"><td>s'occuper de qch/qn</td><td>负责某事/照顾某人</td></tr><tr class="even"><td>avoir besoin/envie/peur de qch</td><td>需要/想要/害怕某事</td></tr><tr class="odd"><td>décider de faire qch</td><td>决定做某事</td></tr><tr class="even"><td>Il est dangereux de faire qch</td><td>做某事有危险</td></tr><tr class="odd"><td>penser de</td><td>考虑、认为</td></tr><tr class="even"><td>à l'aide de</td><td>借助</td></tr><tr class="odd"><td>avec l'aide de qn</td><td>在某人的帮助下</td></tr><tr class="even"><td>empêcher qn de faire qch</td><td>阻止某人做某事</td></tr><tr class="odd"><td>ne pas s'empêcher de faire qch</td><td>忍不住去做某事</td></tr><tr class="even"><td>faire plaisir à qn de faire qch</td><td>做某事使某人高兴</td></tr><tr class="odd"><td>avoir l'impression de / que</td><td>感觉到，仿佛觉得</td></tr></tbody></table><h2 id="语法">语法</h2><h3 id="过去最近过去时venir-de">过去最近过去时（venir de）</h3><ul><li><p>On <strong>venait d</strong>'entrer dans la maison.</p><p>我们当时刚刚进屋。</p></li><li><p>Hier, il <strong>venait de</strong> pleuvoir quand ils sont arrivés.</p><p>昨天他们到的时候，刚刚下过雨。</p></li></ul><h3 id="过去最近将来时aller">过去最近将来时（aller）</h3><ul><li><p>Hier, on a dit que tu <strong>allais travailler</strong> à Lyon.</p><p>昨天有人说你要去里昂工作。</p></li></ul><h3 id="条件式现在时-1">条件式现在时</h3><ul><li><p>委婉表示希望、礼貌请求、委婉表示建议、推测、感叹语气</p><p>J'aimerais (=Je voudrais) visiter cet appartement, est-ce possible?</p></li><li><p>主从复合句中，从句用si表假设（未完成过去时），主句用条件式现在时</p><p>Si <strong>j'étais</strong> vous, je <strong>ferais</strong> autrement. 如果我是您，我就不会这么做。</p><p>S'il <strong>faisait</strong> beau demain, <strong>j'irais</strong> au musée avec vous. 如果明天天气好，我就和你们去博物馆。</p></li></ul><h3 id="虚拟式现在时-1">虚拟式现在时</h3><ul><li><p>意愿：aimer, désirer（希望）, souhaiter（祝愿）, vouloir（愿意）, demander, exiger（强求）, permettre（允许）, refuser</p><p>Je souhait <strong>qu'il parte</strong> tout de suite.</p><p>Le professeur veut <strong>qu'on fasse</strong> ces exercises aujourd'hui.</p></li><li><p>感情：content, satisfait, heureux, regretter（遗憾）, craindre（害怕）, avoir peur（害怕）</p><p>Je suis très content <strong>que vous alliez</strong> mieux. 我很高兴您身体好些了。</p><p>J'ai peur qu'il <strong>ne</strong> pleuve. 赘词ne无意义</p><p>Il regrette que ses parents ne le comprennent pas. 他很遗憾父母不理解他。</p></li><li><p>判断： il faut（应该）/semble（似乎）/suffit（只需）, il est important/mieux（最好）/possible/facile/naturel（自然）/nécessaire（必要）/temps（适时）</p><p>Il faut <strong>que vous finissiez</strong> ce travail tout de suite. 您应该马上完成这项工作。</p></li><li><p>肯定直陈，否定、倒装疑问句中虚拟: il est claire/certain/sûr/probable, croire/penser/espérer/trouver</p><p>Je pense que <strong>c'est</strong> nécessaire.</p><p>Je ne pense pas que ce <strong>soit</strong> possible.</p><p>相反的用法：douter（怀疑）</p></li></ul><h3 id="不定式">不定式</h3><ul><li><p><strong>avant de + 不定式现在时：在做某事之前</strong></p><p>Avant de partir au restaurant, elle est allée au supermarché. 在去餐厅之前，她去了趟超市。</p></li><li><p>avant de + 不定式过去时：在做完某事之前</p></li><li><p>après + 不定式现在时：在做某事之后</p></li><li><p><strong>après + 不定式过去时：在做完某事之后</strong></p><p>Après être allée au supermarché, elle est partie au restaurant. 在去过超市之后，她去了餐厅。</p></li></ul><h3 id="被动态">被动态</h3><p>être + 过去分词，施动者补语 par / de。只有直接及物动词才能被动态。</p><p>être可以有语式和语态：</p><ul><li>Elle <strong>est</strong> soignée par lui. 直陈式现在时</li><li>Elle <strong>a été</strong> soignée par lui. 复合过去时</li><li>Elle <strong>était</strong> soignée par lui. 未完成过去时</li><li>Elle <strong>va être</strong> soignée par lui. 最近将来时</li><li>Elle <strong>sera</strong> soignée par lui. 简单将来时</li><li>Elle <strong>serait</strong> soignée par lui. 条件式现在时</li></ul><p>情感或抽象动词（喜欢、尊敬……），补语用de：</p><ul><li>Il n'est aimé <strong>de</strong> personne.</li><li>Ce médecin est respecté <strong>de</strong> tous les malades.</li></ul><p>主语为事物，强调状态时用de：</p><ul><li>L'article est rempli d'erreurs.</li></ul><p>不突出施动者，可省略补语：</p><ul><li>Tous les gâteaux ont été mangés.</li><li>Sa voiture a été volée.</li></ul><h3 id="复合过去时中过去分词的配合">复合过去时中过去分词的配合</h3><p><strong>avoir为助动词，直接宾语位于动词之前时，要与前置的直宾性数配合：</strong></p><ul><li>Cette pièce de théâtre? Je l'ai déjà vue. 这场戏吗？我看过。</li><li>Tu veux voir les photos que j'ai prises? 你想看看我拍的照片吗？</li><li>Quelles villes avez-vous visitées? 你们去过哪些城市？</li></ul><p><strong>代词式动词：</strong></p><ol type="1"><li>被动意义、绝对意义，无条件配合：<ul><li>Les pommes se sont <strong>vendues</strong> bien aujourd'hui. 苹果今天卖得好。</li><li>Les oiseaux se sont <strong>envolés</strong>. 鸟们飞起来了。</li></ul></li><li>自反意义、相互意义，直宾配合，间宾不配合：<ul><li>Elle s'est <strong>levée</strong> à 8h du matin.</li><li>Nadia et Alice se sont <strong>rencontrées</strong> à Paris en 2019.</li><li>Hier, elles se sont <strong>parlé</strong> avant le cours. &nbsp;（间宾不配合）</li></ul></li></ol><h3 id="tout">Tout</h3><ol type="1"><li><p>泛指形容词</p><p>单数：tout, toute；复数：tous /tu/ , toutes</p><ul><li>Je peux répondre à toute question. 无冠词：任何的</li><li>Je peux répondre à toute la question. 单数：整个的</li><li>Je peux répondre à toutes les questions. 复数：所有的</li><li>部分否定：Tous les étudiants ne sont pas rentrés. 不是所有的学生都回来了。</li></ul></li><li><p>泛指代词：一切、所有的事物、所有人</p><p>单数：tout；复数：tous /tus/, toutes</p><ul><li>Elle avait tout.</li><li>J'ai invité plusieurs amis: tous sont venus.</li></ul></li><li><p>名词：整体（tout）</p><ul><li><p>Les différents chapitres de ce livre forment un tout.</p><p>本书的各个章节形成一个整体。</p></li></ul></li><li><p>副词：十分地</p><p>一般为tout，在辅音（嘘音h）开头的阴性形容词前，用toute(s)</p><ul><li>Elle est tout heureuse.</li><li>Elle est toute honteuse.</li><li>Elles sont tout étonnées.</li><li>Elles sont toutes contentes.</li></ul></li></ol><h3 id="depuis和il-y-a">Depuis和il y a</h3><p>Depuis: 自……以来，可以接时间段、时间点</p><ul><li>J'habite ici depuis deux ans.</li><li>Il pleut depuis mardi.</li></ul><p>Il y a: 在……以前，只能接时间段</p><ul><li>J'ai rencontré Lucie il y a trois jours.</li></ul><h3 id="faire-faire-不可分">faire faire 不可分</h3><p>使、让、请某人做某事</p><p>Je te fait comprendre. 我让你明白。</p><ol type="1"><li>看不到宾语<ul><li>Elle fait venir ses enfants. 她让孩子们来：不及物，不定式主语为名词</li><li>Elle les fait venir. 她让他们来：不及物，不定式主语为人称代词，用直宾代词</li><li>Elle fait lire cet enfant. 她让孩子阅读：省略宾语的及物动词，不定式主语为名词</li><li>Elle le fait lire. 她让他阅读：省略宾语的及物动词，不定式主语为人称代词，用直宾代词</li></ul></li><li>有宾语<ul><li>Je fais mettre la table par/à Sophie. 我让Sophie布置桌子：及物带直宾，不定式主语为名词</li><li>Je lui fais mettre la table. 我让她布置桌子：及物带直宾，不定式主语为人称代词，用间宾代词。</li></ul></li></ol><h3 id="国名城市前的介词">国名、城市前的介词</h3><ul><li><p>en：阴性单数、元音开头的阳性单数</p><p>J'habite en France/Iran.</p></li><li><p>au：辅音开头的阳性单数</p><p>J'habite au Japon.</p></li><li><p>aux：复数</p><p>J'habite aux États-Unis.</p></li><li><p>à：城市</p><p>J'habite à Paris.</p></li><li><p>de：阴性单数、元音开头的阳性单数、城市</p><p>Il vient de France / d'Iran/ de Paris.</p></li><li><p>du：辅音开头的阳性单数</p><p>Il vient du Japon.</p></li><li><p>des：复数</p><p>Il vient des États-Unis.</p></li></ul><h3 id="关系代词-quique">关系代词 qui，que</h3><ul><li><p>qui代替先行词，在从句中作主语，可指人或物。</p><p>J'aime bien cette actrice <strong>qui</strong> s'appelle Sophie.</p></li><li><p>que代替先行词，在从句中作直接宾语，可指人或物。</p><p>Nicolas est un chanteur <strong>que</strong> Sophie aime bien.</p></li><li><p>C'est ... que 强调主语以外</p><p>C'est <u>ce matin</u> que Paul m'a donné un document.</p><p>C'est <u>à moi</u> que Paul a donné un document ce matin.</p></li><li><p>C'est ... qui 强调主语</p><p>C'est <u>Paul</u> qui m'a donné un document ce matin.</p></li></ul><h3 id="关系代词-oùdont">关系代词 où，dont</h3><ul><li><p>où在关系从句中做状语，代替地点、时间</p></li><li><p>dont在关系从句中</p><ul><li><p>做de引导的间接宾语</p><p>C'est le poste <strong>dont</strong> il s'est occupé depuis longtemps. 这是他负责很久的职位。</p><p>C'est le poste <strong>qu'il</strong> a cherché depuis longtemps. 这是他找了很久的职位。</p><p>Le cancer est une maladie <strong>dont</strong> tout le monde a peur.</p><p>C'est la personne <strong>dont</strong> j'ai parlé.</p></li><li><p>主语的补语</p><p>Je ne veux plus travailler dans une entreprise <strong>dont</strong> le patron est avare.</p></li><li><p>直接宾语的补语</p><p>Je cherche le magazine <strong>dont</strong> j'ai lu seulement quelques pages.</p></li><li><p>表语的补语</p><p>C'est une chose <strong>dont</strong> je sui très fier.</p></li></ul></li></ul><h3 id="副代词-en">副代词 en</h3><ul><li><p>泛指的直接宾语，de + 名词</p><p>Oui, j'en ai une.</p></li><li><p>基数词 + 名词，数量副词 + de + 名词</p><p>J'en ai beaucoup.</p></li><li><p>de + 间接宾语</p><p>Son voyage? Il vient d'en parler. （只能代物，不能代人）</p><p>Qu'est-ce que tu en penses?</p></li><li><p>de + 补语</p><p>Ton travail? J'en suis très satisfait.</p><p>C'est un enfant intelligent, son père est fier de lui. （不能代人）</p></li><li><p>de + 状语</p><p>Nathalie a ouvert son sac et en a sorti un livre.</p></li></ul><h3 id="副代词-y">副代词 y</h3><ul><li><p>à, en, dans, chez, sur等引导的地点状语</p><p>Non, je n'y vais pas.</p></li><li><p>à引导的指物的间接宾语</p><p>J'aimerais m'arrêter de fumer, mais je n'y arrive pas.</p><p>Notre rendez-vous? Oui, j'y pense.</p></li></ul><h3 id="指示代词">指示代词</h3><h4 id="简单形式">简单形式</h4><p>单数：celui, celle；复数：ceux, celles</p><p>Nous prendrons le train de cinq heures, <strong>celui de</strong> huit heures arrive trop tard.</p><h4 id="复合形式">复合形式</h4><p>单数：celui-ci, celui-là; celle-ci, celle-là</p><p>复数：ceux-ci, ceux-là; celles-ci, celles-là</p><p>Tu préfère quelles photos? Celles-ci ou celles-là?</p><h3 id="疑问代词">疑问代词</h3><p>单数：lequel, laquelle；复数：lesquels, lesquelles</p><p>Lequel de ces restaurants est-ce que vous êtes allés? 你们去过这些餐厅中的哪一个？</p><h3 id="主有代词">主有代词</h3><table><thead><tr class="header"><th>我的</th><th>le mien</th><th>la mienne</th><th>les miens</th><th>les miennes</th></tr></thead><tbody><tr class="odd"><td>你的</td><td>le tien</td><td>la tienne</td><td>les tiens</td><td>les tiennes</td></tr><tr class="even"><td>TA的</td><td>le sien</td><td>la sienne</td><td>les siens</td><td>les siennes</td></tr><tr class="odd"><td>我们的</td><td>le nôtre</td><td>la nôtre</td><td>les nôtres</td><td>les nôtres</td></tr><tr class="even"><td>你们的</td><td>le vôtre</td><td>la vôtre</td><td>les vôtres</td><td>les vôtres</td></tr><tr class="odd"><td>TA们的</td><td>le leur</td><td>la leur</td><td>les leurs</td><td>les leurs</td></tr></tbody></table><h3 id="直接宾语人称代词-cod">直接宾语人称代词 COD</h3><table><thead><tr class="header"><th>me</th><th>nous</th></tr></thead><tbody><tr class="odd"><td>te</td><td>vous</td></tr><tr class="even"><td>le/la</td><td>les</td></tr></tbody></table><p>代替确指、特指的直接宾语。可以指人或者物。</p><p>Ils ne m'ont pas vu. 他们没有看见我。</p><p>Ça ne vous intéresse pas? / Vous ne vous intéressez pas à cela? 您对此不感兴趣吗？</p><p>Si, ça m'intéresse. / Non, ça ne m'intéresse pas.</p><h3 id="间接宾语人称代词-coi">间接宾语人称代词 COI</h3><table><thead><tr class="header"><th>me</th><th>nous</th></tr></thead><tbody><tr class="odd"><td>te</td><td>vous</td></tr><tr class="even"><td>lui</td><td>leur</td></tr></tbody></table><p>代替à或者pour引导的，指人的间接宾语。</p><p>Elle ne t'a pas dit au revoir? 她没跟你说再见吗？</p><p>不能被代替的：</p><ul><li>penser à qch</li><li>se fier à qn</li><li>être à qn</li><li>faire attention à qn</li><li>avoir affaire à qn 打交道</li><li>s'habituer à qn</li><li>s'intéresser à qn</li><li>s'opposer à qn</li><li>s'adresser à qn</li></ul><h3 id="双宾语人称代词的位置">双宾语人称代词的位置</h3><h4 id="一般原则">一般原则</h4><table><thead><tr class="header"><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th></tr></thead><tbody><tr class="odd"><td>me<br>te<br>se<br>nous<br>vous</td><td>le<br>la<br>les</td><td>lui<br>leur</td><td>y</td><td>en</td></tr></tbody></table><blockquote><p>这道题很难，我向<strong>他</strong>讲解<strong>它</strong>。</p><p>不用代词：Cette question est difficile, j'explique cette question à lui.</p><p>只用间宾：..., je <strong>lui</strong> explique cette question.</p><p>只用直宾：..., je <strong>l'</strong>explique à lui.</p><p>双宾语：..., je <strong>la lui</strong> explique.</p></blockquote><p>这些照片不好看，你别给他们看：Ces photos ne sont pas belles, ne les leur montre pas.</p><p>他的地址吗，他今早给我了：Son adresse? Il me l'a donnée ce matin.</p><p>你洗手了吗，我洗了：Tu t'es lavé les mains? Oui, je me les suis lavé<strong>es</strong>.</p><ul><li><p>1和3不见面：</p><p>您把我介绍给他：Vous me présentez à lui.</p></li><li><p>3和4不见面：</p><p>他在那给他们打过电话：Il leur a téléphoné là-bas. （不用y）</p></li></ul><h4 id="命令式肯定句">命令式肯定句</h4><table><thead><tr class="header"><th>1</th><th>2</th><th>3</th><th>4</th></tr></thead><tbody><tr class="odd"><td>le<br>la<br>les</td><td>moi<br>toi<br>lui<br>nous<br>vous<br>leur</td><td>y</td><td>en</td></tr></tbody></table><p>Cette question est difficile, expliquez-la-moi. 这道题很难，（您）给我讲解一下。</p><p>Montre-les-nous. （你）把他们给我们看一下。</p><p>Ne me les envoyez pas. （您）别把他们寄给我。</p><h3 id="比较级和最高级">比较级和最高级</h3><h4 id="形容词比较级">形容词比较级</h4><table><thead><tr class="header"><th>=</th><th>aussi adj. que</th><th>Il est aussi grand que son père.</th></tr></thead><tbody><tr class="odd"><td>&gt;</td><td>plus adj. que</td><td>Il est plus grand que son père.</td></tr><tr class="even"><td>&lt;</td><td>moins adj. que</td><td>Il est moins grand que son père.</td></tr></tbody></table><p>尽可能：Je vais acheter une valise <strong>aussi légère que possible</strong>. 我要买一个尽可能轻的手提箱</p><table><thead><tr class="header"><th>adj.</th><th>=</th><th>&gt;</th><th>&lt;</th></tr></thead><tbody><tr class="odd"><td>bon(ne)(s) 好</td><td>aussi bon(ne)(s)</td><td><strong>meilleur</strong>(e)(s)</td><td>moins bon(ne)(s)</td></tr><tr class="even"><td>mauvais(e)(s) 坏</td><td>aussi mauvais</td><td><strong>pire</strong>; plus mauvais</td><td>moins mauvais</td></tr><tr class="odd"><td>petit(e) 小</td><td>aussi petit</td><td><strong>moindre</strong>; plus petit</td><td>moins petit</td></tr></tbody></table><p>pire更为强调；plus petite修饰具体名词，moindre修饰抽象名词</p><h4 id="副词比较级">副词比较级</h4><p>Laura nage <strong>plus souvent que</strong> son petit frère, mais elle nage <strong>moins vite que</strong> lui.</p><p>洛拉比她弟弟更常游泳，但她游得不如他快。</p><table><thead><tr class="header"><th>adv.</th><th>=</th><th>&gt;</th><th>&lt;</th></tr></thead><tbody><tr class="odd"><td>bien 好</td><td>aussi bien</td><td><strong>mieux</strong></td><td>moins bien</td></tr><tr class="even"><td>beaucoup 多</td><td><strong>autant</strong></td><td><strong>plus</strong> /plys/</td><td>-</td></tr><tr class="odd"><td>peu 少</td><td>aussi peu</td><td><strong>moins</strong></td><td>-</td></tr></tbody></table><p>J'ai plus/autant/moins d'amis que Paul.</p><h4 id="形容词最高级">形容词最高级</h4><p><strong>le plus/moins grand</strong> océan <strong>du</strong> monde</p><p><strong>le</strong> fleuve <strong>le plus long de</strong> votre pays</p><ul><li><p>定冠词可被主有形容词替代，省略补语</p><p>mon plus grand ami 我最要好的朋友</p></li><li><p>特殊形式的词形和比较级相同：le meilleur restaurant de cette région</p></li></ul><h4 id="副词最高级">副词最高级</h4><p>Louis court <strong>le plus vite de</strong> tous ces garçons. 跑得最快</p><p><strong>De</strong> toutes les étudiantes, c'est Marie qui court <strong>le moins vite</strong>. 跑得最慢</p><table><thead><tr class="header"><th>adv.</th><th>+</th><th>-</th></tr></thead><tbody><tr class="odd"><td>bien</td><td>le mieux</td><td>le moins bien</td></tr><tr class="even"><td>beaucoup</td><td>le plus (de)</td><td>-</td></tr><tr class="odd"><td>peu</td><td>le moins (de)</td><td>-</td></tr></tbody></table><p>Tu dois dire "non" le moins souvent possible. 你应该尽可能少说‘不’。</p><h3 id="ne...que">ne...que</h3><p>表示限制，ne在谓语动词前，que在被限定部分前</p><p>Je ne sais parler que l'anglais. 我只会说英语。</p><p>Il ne boit que de l'eau. 他只喝水。</p><p>Il ne mange plus que des fruits. 他现在只吃水果了。</p><p>Il n'ya pas que mes amis. 不仅仅有我的朋友。</p><h3 id="原因的表达">原因的表达</h3><ul><li>à cause de（负面）</li><li>grâce à（正面）</li><li>parce que、car</li><li>comme</li><li>puisque（既然）</li></ul><h3 id="结果的表达">结果的表达</h3><ul><li>Il était là tout à l'heure, il ne doit <strong>donc</strong> pas être bien loin. 他刚刚在这，所以他现在不会太远。</li><li>Il n'y a pas de bus, <strong>alors</strong> je suis venu à pied. 没车了，于是我走路来了。</li><li>J'étais malade, <strong>c'est pourquoi</strong> je ne t'ai pas répondu. 我病了，所以我没有答复你。</li><li>Je suis fatigué, <strong>c'est pour ça que</strong> je ne veux plus travailler ici. 我累了，所以我不想再在这工作了。</li><li>Il est <strong>tellement</strong>/<strong>si</strong> triste <strong>qu</strong>'il est parti hier. 他如此伤心，以至于昨天就走了。</li><li>Il y a <strong>tellement de</strong> personnes <strong>que</strong> je n'ai pas entrer. 人太多了，我都没进去。</li><li>Il se sont <strong>assez</strong> entraîné <strong>pour</strong> gagner ce match. 他们训练得足够多，足以赢得这场比赛。</li><li>Ce chauffeur a <strong>trop</strong> bu <strong>pour</strong> conduire. 这个司机喝太多了以至于不能开车。</li></ul><h3 id="让步和对立的表达">让步和对立的表达</h3><ul><li>Ils sont sortis <strong>malgré</strong> le mauvais temps. <strong>尽管</strong>天气不好，他们还是出去了。</li><li>Je vais y aller <strong>même s'</strong>il ne fais pas beau. <strong>即使</strong>天气不好，我也要去。</li><li>Il reste au lit <strong>au lieu de</strong> travailler. 他躺在床上<strong>而不是</strong>工作。</li><li>Il n'a pas plu <strong>contrairement</strong> aux prévisions. <strong>与</strong>预报<strong>相反</strong>，没有下雨。</li><li>Elle n'est pas fatiguée, <strong>au contraire</strong>, elle est en pleine forme. 她不累，<strong>相反地</strong>，她很精神。</li><li>Il est gros <strong>alors que</strong> son frère est maigre. 他很胖<strong>而</strong>他的哥哥很瘦。</li><li>Dans la classe, les uns travaillent, <strong>tandis que</strong> les autre bavardent. 班级里有一些在学习，<strong>而</strong>另一些在聊天。</li><li>Nous sommes partis <strong>tandis qu'</strong>il dormait. <strong>当</strong>他睡觉的时候我们出去了。</li><li>Il est le dernier <strong>pourtant</strong> il se croit le premier. 他是最后一名<strong>而</strong>自认为是第一名。</li></ul><h3 id="ce-qui-ce-que">ce qui, ce que</h3><h4 id="关系从句">关系从句</h4><p>ce做先行词，qui代替ce在从句中做主语，que代替ce在从句中做直宾或表语。</p><blockquote><p>On ne sait pas <strong>ce qui</strong> lui plaît. 我们不知道什么使他满意。</p><p>Voilà tout <strong>ce que</strong> je sais. 这就是我所知道的一切。</p><p>Je ne comprends pas <strong>ce que</strong> c'est. 我不明白这是什么。</p></blockquote><h4 id="强调句">强调句</h4><p>ce qui强调指物的主语，ce que强调指物的直宾。</p><blockquote><p><strong>Ce qui</strong> l'intéresse, c'est la musique classique. 让他感兴趣的东西，正是音乐。</p><p><strong>Ce que</strong> j'apprécie le plus chez toi, c'est ton honnêteté. 我最欣赏你的地方，正是你的正直。</p></blockquote><h4 id="疑问句">疑问句</h4><p>qu'est-ce que 对人或物作表语或宾语提问，qu'est-ce qui 对人或物作主语提问。</p><blockquote><p><strong>Qu'est-ce que</strong> vous cherchez? 您找什么？</p><p><strong>Qu'est-ce qui</strong> vous arrive? 什么发生在了您身上？</p></blockquote><h3 id="间接引语">间接引语</h3><h4 id="陈述句que">陈述句：que</h4><blockquote><p>Elle dit: &lt;&lt;J'adore la France!&gt;&gt;</p><p>Elle dit <strong>qu'</strong>elle adore la France.</p></blockquote><h4 id="命令式de不定式">命令式：de+不定式</h4><blockquote><p>Il me dit: &lt;&lt;Fais tes exercices!&gt;&gt;</p><p>Il me dit <strong>de faire</strong> mes exercices.</p></blockquote><h4 id="疑问句陈述句不能主谓倒装不能加est-ce-que">疑问句：陈述句，不能主谓倒装，不能加est-ce que</h4><h5 id="一般疑问句si">一般疑问句：si</h5><blockquote><p>Je demande: &lt;&lt;Est-ce qu'il y a de la place?&gt;&gt;</p><p>Je demande <strong>s'</strong>il y a de la place. 我问是否有位置。</p></blockquote><h5 id="特殊疑问句">特殊疑问句</h5><p>que / qu'est-ce que : ce que</p><blockquote><p>Il me demande: &lt;&lt;Que fais-tu demain?&gt;&gt;</p><p>Il me demande <strong>ce que</strong> je fais demain. 他问我我明天做什么。</p></blockquote><p>qu'est-ce qui: ce qui</p><blockquote><p>Il demande: &lt;&lt;Qu'est-ce qui fait ce bruit?&gt;&gt;</p><p>Il demande <strong>ce qui</strong> fait ce bruit. 他问什么发出的噪音。</p></blockquote><p>其他疑问词：保留疑问词</p><blockquote><p>Il me demande: &lt;&lt;Où habites-tu?&gt;&gt;</p><p>Il me demande <strong>où</strong> j'habite. 他问我住在哪。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 语言 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>法语A1</title>
      <link href="/posts/51760/"/>
      <url>/posts/51760/</url>
      
        <content type="html"><![CDATA[<h2 id="动词变位">动词变位</h2><h3 id="第一组规则动词">第一组规则动词</h3><table><thead><tr class="header"><th>regarder</th><th></th></tr></thead><tbody><tr class="odd"><td>je regarde</td><td>nous regardons</td></tr><tr class="even"><td>tu regardes</td><td>vous regardez</td></tr><tr class="odd"><td>il/elle regarde</td><td>ils/elles regardent</td></tr></tbody></table><h4 id="代词式动词的复合过去时">代词式动词的复合过去时</h4><table><thead><tr class="header"><th>s'être + p.p.</th><th>-</th></tr></thead><tbody><tr class="odd"><td>je me suis</td><td>nous nous sommes</td></tr><tr class="even"><td>tu t'es</td><td>vous vous êtes</td></tr><tr class="odd"><td>il s'est</td><td>ils se sont</td></tr></tbody></table><table><thead><tr class="header"><th>否定</th><th>-</th></tr></thead><tbody><tr class="odd"><td>je ne me suis pas</td><td>nous ne nous sommes pas</td></tr><tr class="even"><td>tu ne t'es pas</td><td>vous ne vous êtes pas</td></tr><tr class="odd"><td>il ne s'est pas</td><td>ils ne se sont pas</td></tr></tbody></table><h3 id="第二组规则动词">第二组规则动词</h3><table><thead><tr class="header"><th>choisir</th><th>choisi</th></tr></thead><tbody><tr class="odd"><td>je choisis</td><td>nous choisissons</td></tr><tr class="even"><td>tu choisis</td><td>vous choisissez</td></tr><tr class="odd"><td>il choisit</td><td>ils choisissent</td></tr></tbody></table><h3 id="第三组不规则动词">第三组不规则动词</h3><table><thead><tr class="header"><th>être 直陈式</th><th>été</th></tr></thead><tbody><tr class="odd"><td>je suis</td><td>nous sommes</td></tr><tr class="even"><td>tu es</td><td>vous êtes</td></tr><tr class="odd"><td>il/elle est</td><td>ils/elles sont</td></tr></tbody></table><table><thead><tr class="header"><th>être 命令式</th><th></th></tr></thead><tbody><tr class="odd"><td>-</td><td>(nous) soyons</td></tr><tr class="even"><td>(tu) sois</td><td>(vous) soyez</td></tr></tbody></table><table><thead><tr class="header"><th>aller</th><th>allé</th></tr></thead><tbody><tr class="odd"><td>je vais</td><td>nous allons</td></tr><tr class="even"><td>tu vas</td><td>vous allez</td></tr><tr class="odd"><td>il/elle va</td><td>ils/elles vont</td></tr></tbody></table><table><thead><tr class="header"><th>avoir 直陈式</th><th>eu /y/</th></tr></thead><tbody><tr class="odd"><td>j'ai</td><td>nous avons</td></tr><tr class="even"><td>tu as</td><td>vous avez</td></tr><tr class="odd"><td>il/elle a</td><td>ils/elles ont</td></tr></tbody></table><table><thead><tr class="header"><th>avoir 命令式</th><th></th></tr></thead><tbody><tr class="odd"><td></td><td>(nous) ayons</td></tr><tr class="even"><td>(tu) aie</td><td>(vous) ayez</td></tr></tbody></table><table><thead><tr class="header"><th>faire</th><th>fait</th></tr></thead><tbody><tr class="odd"><td>je fais</td><td>nous faisons</td></tr><tr class="even"><td>tu fais</td><td>vous faites</td></tr><tr class="odd"><td>il/elle fait</td><td>ils/elles font</td></tr></tbody></table><table><thead><tr class="header"><th>prendre</th><th>pris</th></tr></thead><tbody><tr class="odd"><td>je prends</td><td>nous prenons</td></tr><tr class="even"><td>tu prends</td><td>vous prenez</td></tr><tr class="odd"><td>il prend</td><td>ils prennent</td></tr></tbody></table><table><thead><tr class="header"><th>partir</th><th>parti</th></tr></thead><tbody><tr class="odd"><td>je pars</td><td>nous partons</td></tr><tr class="even"><td>tu pars</td><td>vous partez</td></tr><tr class="odd"><td>il part</td><td>ils partent</td></tr></tbody></table><table><thead><tr class="header"><th>voir</th><th>vu</th></tr></thead><tbody><tr class="odd"><td>je vois</td><td>nous voyons</td></tr><tr class="even"><td>tu vois</td><td>vous voyez</td></tr><tr class="odd"><td>il voit</td><td>ils voient</td></tr></tbody></table><table><thead><tr class="header"><th>écrire</th><th>écrit</th></tr></thead><tbody><tr class="odd"><td>j'écris</td><td>nous écrivons</td></tr><tr class="even"><td>tu écris</td><td>vous écrivez</td></tr><tr class="odd"><td>il écrit</td><td>ils écrivent</td></tr></tbody></table><table><thead><tr class="header"><th>lire</th><th>lu</th></tr></thead><tbody><tr class="odd"><td>je lis</td><td>nous lisons</td></tr><tr class="even"><td>tu lis</td><td>vous lisez</td></tr><tr class="odd"><td>il lit</td><td>ils lisent</td></tr></tbody></table><table><thead><tr class="header"><th>dormir</th><th>dormi</th></tr></thead><tbody><tr class="odd"><td>je dors</td><td>nous dormons</td></tr><tr class="even"><td>tu dors</td><td>vous dormez</td></tr><tr class="odd"><td>il dort</td><td>ils dorment</td></tr></tbody></table><table><thead><tr class="header"><th>boire</th><th>bu</th></tr></thead><tbody><tr class="odd"><td>je bois</td><td>nous buvons</td></tr><tr class="even"><td>tu bois</td><td>vous buvez</td></tr><tr class="odd"><td>il boit</td><td>ils boivent</td></tr></tbody></table><table><thead><tr class="header"><th>venir（来）</th><th>venu</th></tr></thead><tbody><tr class="odd"><td>je viens</td><td>nous venons</td></tr><tr class="even"><td>tu viens</td><td>vous venez</td></tr><tr class="odd"><td>il vient</td><td>ils viennent</td></tr></tbody></table><table><thead><tr class="header"><th>descendre</th><th>descendu</th></tr></thead><tbody><tr class="odd"><td>je descends</td><td>nous descendons</td></tr><tr class="even"><td>tu descends</td><td>vous descendez</td></tr><tr class="odd"><td>il descend</td><td>ils descendent</td></tr></tbody></table><table><thead><tr class="header"><th>pouvoir（能）</th><th>pu</th></tr></thead><tbody><tr class="odd"><td>je peux</td><td>nous pouvons</td></tr><tr class="even"><td>tu peux</td><td>vous pouvez</td></tr><tr class="odd"><td>il peut</td><td>ils peuvent</td></tr></tbody></table><table><thead><tr class="header"><th>vouloir（想）</th><th>voulu</th></tr></thead><tbody><tr class="odd"><td>je veux</td><td>nous voulons</td></tr><tr class="even"><td>tu veux</td><td>vous voulez</td></tr><tr class="odd"><td>il veut</td><td>ils veulent</td></tr></tbody></table><table><thead><tr class="header"><th>dire（说）</th><th>dit</th></tr></thead><tbody><tr class="odd"><td>je dis</td><td>nous disons</td></tr><tr class="even"><td>tu dis</td><td>vous dites</td></tr><tr class="odd"><td>il dit</td><td>ils disent</td></tr></tbody></table><table><thead><tr class="header"><th>savoir（知道）</th><th>su</th></tr></thead><tbody><tr class="odd"><td>je sais</td><td>nous savons</td></tr><tr class="even"><td>tu sais</td><td>vous savez</td></tr><tr class="odd"><td>il sait</td><td>ils savent</td></tr></tbody></table><table><thead><tr class="header"><th>devoir（应该）</th><th>dû</th></tr></thead><tbody><tr class="odd"><td>je dois</td><td>nous devons</td></tr><tr class="even"><td>tu dois</td><td>vous devez</td></tr><tr class="odd"><td>il doit</td><td>ils doivent</td></tr></tbody></table><table><thead><tr class="header"><th>connaître（认识）</th><th>connu</th></tr></thead><tbody><tr class="odd"><td>je connais</td><td>nous connaissons</td></tr><tr class="even"><td>tu connais</td><td>vous connaissez</td></tr><tr class="odd"><td>il connaît</td><td>ils connaissent</td></tr></tbody></table><table><thead><tr class="header"><th>offrir（给）</th><th>offert</th></tr></thead><tbody><tr class="odd"><td>j'offre</td><td>nous offrons</td></tr><tr class="even"><td>tu offres</td><td>vous offrez</td></tr><tr class="odd"><td>il offre</td><td>ils offrent</td></tr></tbody></table><table><thead><tr class="header"><th>préférer（更喜欢）</th><th>préféré</th></tr></thead><tbody><tr class="odd"><td>je préfère</td><td>nous préférons</td></tr><tr class="even"><td>tu préfères</td><td>vous préférez</td></tr><tr class="odd"><td>il préfère</td><td>ils préfèrent</td></tr></tbody></table><table><thead><tr class="header"><th>vivre（生活）</th><th>vécu</th></tr></thead><tbody><tr class="odd"><td>je vis</td><td>nous vivons</td></tr><tr class="even"><td>tu vis</td><td>vous vivez</td></tr><tr class="odd"><td>il vit</td><td>ils vivent</td></tr></tbody></table><table><thead><tr class="header"><th>attendre（等）</th><th>attendu</th></tr></thead><tbody><tr class="odd"><td>j'attends</td><td>nous attendons</td></tr><tr class="even"><td>tu attends</td><td>vous attendez</td></tr><tr class="odd"><td>il attend</td><td>ils attendent</td></tr></tbody></table><table><thead><tr class="header"><th>ennuyer（使烦恼）</th><th>ennuyé</th></tr></thead><tbody><tr class="odd"><td>j'ennuie</td><td>nous ennuyons</td></tr><tr class="even"><td>tu ennuies</td><td>vous ennuyez</td></tr><tr class="odd"><td>il ennuie</td><td>ils ennuient</td></tr></tbody></table><table><thead><tr class="header"><th>suivre（跟随）</th><th>suivi</th></tr></thead><tbody><tr class="odd"><td>je suis</td><td>nous suivons</td></tr><tr class="even"><td>tu suis</td><td>vous suivez</td></tr><tr class="odd"><td>il suit</td><td>ils suivent</td></tr></tbody></table><table><thead><tr class="header"><th>pleuvoir（下雨）</th><th>plu (pleuvait)</th></tr></thead><tbody><tr class="odd"><td>il pleut</td><td></td></tr></tbody></table><table><thead><tr class="header"><th>croire（相信，觉得）</th><th>cru</th></tr></thead><tbody><tr class="odd"><td>je crois</td><td>nous croyons</td></tr><tr class="even"><td>tu crois</td><td>vous croyez</td></tr><tr class="odd"><td>il croit</td><td>ils croient</td></tr></tbody></table><table><thead><tr class="header"><th>essayer（试图）</th><th>essayé</th></tr></thead><tbody><tr class="odd"><td>j'essaie</td><td>nous essayons</td></tr><tr class="even"><td>tu essaies</td><td>vous essayez</td></tr><tr class="odd"><td>il essaie</td><td>ils essaient</td></tr></tbody></table><table><thead><tr class="header"><th>mettre（放置）</th><th>mis</th></tr></thead><tbody><tr class="odd"><td>je mets</td><td>nous mettons</td></tr><tr class="even"><td>tu mets</td><td>vous mettez</td></tr><tr class="odd"><td>il met</td><td>ils mettent</td></tr></tbody></table><h2 id="其他时态">其他时态</h2><h3 id="复合过去时中-17-个用-être-引导的不及物动词">复合过去时中 17 &nbsp;个用 être 引导的不及物动词</h3><table><thead><tr class="header"><th>aller/venir</th><th>allé</th></tr></thead><tbody><tr class="odd"><td>entrer/sortir</td><td>entré/sorti</td></tr><tr class="even"><td>arriver/partir</td><td>arrivé/parti</td></tr><tr class="odd"><td>monter/descendre</td><td>monté/descendu</td></tr><tr class="even"><td>naître/mourir</td><td>né/mort</td></tr><tr class="odd"><td>rester/passer</td><td>resté/passé</td></tr><tr class="even"><td>rentrer/revenir/retourner</td><td>rentré/revenu/retourné</td></tr><tr class="odd"><td>tomber</td><td>tombé</td></tr><tr class="even"><td>devenir（成为）</td><td>devenu</td></tr></tbody></table><h3 id="过去分词">过去分词</h3><table><thead><tr class="header"><th>不定式</th><th>过去分词</th></tr></thead><tbody><tr class="odd"><td>vendre</td><td>vendu</td></tr><tr class="even"><td>vivre</td><td>vécu</td></tr><tr class="odd"><td></td><td></td></tr></tbody></table><h3 id="未完成过去时变位">未完成过去时变位</h3><p>nous的变位去掉-ons：</p><table><thead><tr class="header"><th>je parlais</th><th>nous parlions</th></tr></thead><tbody><tr class="odd"><td>tu parlais</td><td>vous parliez</td></tr><tr class="even"><td>il parlait</td><td>ils parlaient</td></tr></tbody></table><h3 id="最近过去时">最近过去时</h3><p>venir de + 不定式，表示刚刚发生且完成的动作。</p><h3 id="简单将来时">简单将来时</h3><table><thead><tr class="header"><th>parler</th><th>第一组规则</th></tr></thead><tbody><tr class="odd"><td>je parlerai</td><td>nous parlerons</td></tr><tr class="even"><td>tu parleras</td><td>vous parlerez</td></tr><tr class="odd"><td>il parlera</td><td>ils parleront</td></tr></tbody></table><table><thead><tr class="header"><th>finir</th><th>第二组规则</th></tr></thead><tbody><tr class="odd"><td>je finirai</td><td>nous finirons</td></tr><tr class="even"><td>tu finiras</td><td>vous finirez</td></tr><tr class="odd"><td>il finira</td><td>ils finiront</td></tr></tbody></table><table><thead><tr class="header"><th>prendre</th><th>第三组re结尾</th></tr></thead><tbody><tr class="odd"><td>je prendrai</td><td>nous prendrons</td></tr><tr class="even"><td>tu prendra</td><td>vous prendrez</td></tr><tr class="odd"><td>il prendra</td><td>ils prendront</td></tr></tbody></table><table><thead><tr class="header"><th>avoir</th><th>j'aurai</th></tr></thead><tbody><tr class="odd"><td>être</td><td>je serai</td></tr><tr class="even"><td>aller</td><td>j'irai</td></tr><tr class="odd"><td>faire</td><td>je ferai</td></tr><tr class="even"><td>devoir</td><td>je devrai</td></tr><tr class="odd"><td>pouvoir</td><td>je pourrai</td></tr><tr class="even"><td>savoir</td><td>je saurai</td></tr><tr class="odd"><td>venir</td><td>je viendrai</td></tr><tr class="even"><td>voir</td><td>je verrai /e/</td></tr><tr class="odd"><td>vouloir</td><td>je voudrai</td></tr><tr class="even"><td>falloir</td><td>il faudra</td></tr><tr class="odd"><td>pleuvoir</td><td>il pleuvra</td></tr></tbody></table><h2 id="词汇">词汇</h2><h3 id="动词">动词</h3><table><thead><tr class="header"><th>traverser</th><th>穿过</th></tr></thead><tbody><tr class="odd"><td>*heurter</td><td>碰撞</td></tr><tr class="even"><td>rencontrer</td><td>遇到</td></tr><tr class="odd"><td>trouver</td><td>找到</td></tr><tr class="even"><td>apprendre</td><td>学习</td></tr><tr class="odd"><td>ouvrir / fermer</td><td>打开/关闭（物理）</td></tr><tr class="even"><td>allumer / éteindre</td><td>打开/关闭（电子）</td></tr></tbody></table><h3 id="连词">连词</h3><table><thead><tr class="header"><th>en plus</th><th>而且</th></tr></thead><tbody><tr class="odd"><td>d'abord</td><td>首先</td></tr><tr class="even"><td>ensuite/après/puis</td><td>然后</td></tr><tr class="odd"><td>enfin</td><td>最后</td></tr></tbody></table><h3 id="方位">方位</h3><p><img src="/posts/51760/preposition.png"></p><p><img src="/posts/51760/截屏2022-11-19 16.34.12.png" width="50%"></p><table><thead><tr class="header"><th>au bord de</th><th>在边上</th></tr></thead><tbody><tr class="odd"><td>se trouver</td><td>位于</td></tr><tr class="even"><td>aller tout droit</td><td>直走</td></tr></tbody></table><table><thead><tr class="header"><th>在……以南北东西</th><th>在……的南北东西部</th></tr></thead><tbody><tr class="odd"><td>au sud de</td><td>dans le sud de</td></tr><tr class="even"><td>au nord de</td><td>dans le nord de</td></tr><tr class="odd"><td>à l'est de</td><td>dans l'est de</td></tr><tr class="even"><td>à l'ouest de</td><td>dans l'ouest de</td></tr></tbody></table><h3 id="衣服">衣服</h3><table><thead><tr class="header"><th>vêtement</th><th>衣服</th></tr></thead><tbody><tr class="odd"><td>des baskets</td><td>运动鞋</td></tr><tr class="even"><td>une chemise</td><td>衬衫</td></tr><tr class="odd"><td>des lunettes</td><td>眼镜</td></tr><tr class="even"><td>un jean</td><td>牛仔裤</td></tr><tr class="odd"><td>un manteau</td><td>大衣</td></tr><tr class="even"><td>un blouson</td><td>夹克衫</td></tr><tr class="odd"><td>un pantalon</td><td>长裤</td></tr><tr class="even"><td>une robe</td><td>裙子</td></tr><tr class="odd"><td>une jupe</td><td>短裙</td></tr><tr class="even"><td>un tee-shirt</td><td>T恤</td></tr></tbody></table><h3 id="颜色">颜色</h3><p><img src="/posts/51760/截屏2022-11-19%2016.23.13.png"></p><h3 id="时间">时间</h3><table><thead><tr class="header"><th>ce matin</th><th>今早</th></tr></thead><tbody><tr class="odd"><td>ce midi</td><td>今天中午</td></tr><tr class="even"><td>ce soir</td><td>今晚</td></tr><tr class="odd"><td>ce mois</td><td>这个月</td></tr><tr class="even"><td>cette semaine</td><td>这周</td></tr><tr class="odd"><td>cette année</td><td>今年</td></tr><tr class="even"><td>l'après-midi</td><td>下午</td></tr><tr class="odd"><td>hier</td><td>昨天</td></tr><tr class="even"><td>aujourd'hui</td><td>今天</td></tr><tr class="odd"><td>demain</td><td>明天</td></tr><tr class="even"><td>l'année dernière</td><td>去年</td></tr><tr class="odd"><td>l'année prochaine</td><td>明年</td></tr></tbody></table><table><thead><tr class="header"><th>tout</th><th>-</th></tr></thead><tbody><tr class="odd"><td>tous les jours</td><td>每一天</td></tr><tr class="even"><td>tous les samedis soirs</td><td>每周六晚</td></tr><tr class="odd"><td>toute la journée</td><td>一整天</td></tr><tr class="even"><td>toute l'année</td><td>一整年</td></tr></tbody></table><table><thead><tr class="header"><th>周一</th><th>周二</th><th>周三</th><th>周四</th><th>周五</th><th>周六</th><th>周日</th></tr></thead><tbody><tr class="odd"><td>lundi</td><td>mardi</td><td>mercredi</td><td>jeudi</td><td>vendredi</td><td>samedi</td><td>dimanche</td></tr></tbody></table><table><thead><tr class="header"><th>时间</th><th>口语表示法</th></tr></thead><tbody><tr class="odd"><td>6:30</td><td>six heures <strong>et demie</strong></td></tr><tr class="even"><td>10:15</td><td>dix heures <strong>et quart</strong></td></tr><tr class="odd"><td>3:45</td><td>quatre heures <strong>moins le quart</strong></td></tr></tbody></table><table><thead><tr class="header"><th>au printemps</th><th>en été</th><th>en automne</th><th>en hiver</th></tr></thead><tbody><tr class="odd"><td>janvier</td><td>avril</td><td>juillet</td><td>octobre</td></tr><tr class="even"><td>février</td><td>mai</td><td>août</td><td>novembre</td></tr><tr class="odd"><td>mars /s/</td><td>juin</td><td>septembre</td><td>décembre</td></tr></tbody></table><table><thead><tr class="header"><th>Nous sommes en 1990.</th><th>在某年</th></tr></thead><tbody><tr class="odd"><td><strong>en</strong> septembre = <strong>au mois de</strong> septembre</td><td>在某月</td></tr><tr class="even"><td>Nous sommes <strong>le</strong> 7/premier.</td><td>在某日</td></tr><tr class="odd"><td>cinq ans <strong>plus tard</strong> / <strong>après</strong></td><td>五年后</td></tr><tr class="even"><td><strong>à partir de</strong> 6 ans</td><td>从六岁</td></tr><tr class="odd"><td><strong>de</strong> 2000 <strong>à</strong> 2010</td><td>从……到</td></tr><tr class="even"><td><strong>du</strong> lundi <strong>au</strong> vendredi</td><td>从周一到周五</td></tr><tr class="odd"><td><strong>jusqu'en</strong> 2008</td><td>直到</td></tr><tr class="even"><td><strong>pendant</strong> 10 jours</td><td>在……期间</td></tr><tr class="odd"><td><strong>Il y a 10 jours que</strong> nous sommes arrivés.</td><td>有……了</td></tr><tr class="even"><td>dans les années soixante</td><td>60年代</td></tr><tr class="odd"><td>à la fin d'année</td><td>年底</td></tr><tr class="even"><td>au début d'année</td><td>年初</td></tr><tr class="odd"><td>depuis longtemps</td><td>很久以来</td></tr><tr class="even"><td>tout de suite</td><td>马上</td></tr></tbody></table><h3 id="交通工具">交通工具</h3><p><img src="/posts/51760/截屏2022-11-19%2016.45.26.png"></p><table><thead><tr class="header"><th>à</th><th>露天</th><th>en</th><th>不露天</th></tr></thead><tbody><tr class="odd"><td>pied</td><td>步行</td><td>rollers</td><td>滑轮滑</td></tr><tr class="even"><td>moto</td><td>骑摩托车</td><td>voiture</td><td>坐车</td></tr><tr class="odd"><td>cheval</td><td>骑马</td><td>bus</td><td>坐公交车</td></tr><tr class="even"><td>vélo</td><td>骑自行车</td><td>taxi</td><td>坐出租车</td></tr><tr class="odd"><td>bicyclette</td><td>骑自行车</td><td>métro</td><td>坐地铁</td></tr><tr class="even"><td></td><td></td><td>train</td><td>坐火车</td></tr><tr class="odd"><td></td><td></td><td>avion</td><td>坐飞机</td></tr></tbody></table><h3 id="演奏运动">演奏，运动</h3><table><thead><tr class="header"><th>jouer...</th><th>运动</th><th>jouer</th><th>乐器</th></tr></thead><tbody><tr class="odd"><td>au foot</td><td>踢足球</td><td>du piano</td><td>弹钢琴</td></tr><tr class="even"><td>au tennis</td><td>打网球</td><td>du violon</td><td>拉小提琴</td></tr><tr class="odd"><td>au basket-ball</td><td>打篮球</td><td>de la guitare</td><td>弹吉他</td></tr><tr class="even"><td>aux cartes</td><td>打牌</td><td>de la basse</td><td>弹贝斯</td></tr></tbody></table><table><thead><tr class="header"><th>faire...</th><th>运动</th><th>faire</th><th>天气</th></tr></thead><tbody><tr class="odd"><td>du sport</td><td>做运动</td><td>de la musique</td><td>玩音乐</td></tr><tr class="even"><td>du ski</td><td>滑雪</td><td>du piano</td><td>弹钢琴</td></tr><tr class="odd"><td>du tennis</td><td>打网球</td><td>du violon</td><td>拉小提琴</td></tr><tr class="even"><td>du foot</td><td>踢足球</td><td></td><td></td></tr><tr class="odd"><td>de la natation</td><td>游泳</td><td></td><td></td></tr></tbody></table><h3 id="食物">食物</h3><table><thead><tr class="header"><th>du beurre</th><th>黄油</th></tr></thead><tbody><tr class="odd"><td>de la farine</td><td>面粉</td></tr><tr class="even"><td>du sucre</td><td>糖</td></tr><tr class="odd"><td>du sel</td><td>盐</td></tr><tr class="even"><td>de la viande</td><td>肉</td></tr><tr class="odd"><td>du vin / une bouteille de vin</td><td>酒</td></tr><tr class="even"><td>du riz /ri/</td><td>米饭</td></tr><tr class="odd"><td>du poisson</td><td>鱼肉</td></tr><tr class="even"><td>du fromage</td><td>奶酪</td></tr><tr class="odd"><td>des céréales</td><td>谷物</td></tr><tr class="even"><td>du lait / un litre de lait</td><td>牛奶</td></tr><tr class="odd"><td>du pain</td><td>面包</td></tr><tr class="even"><td>la pomme</td><td>苹果</td></tr><tr class="odd"><td>de la confiture</td><td>果酱</td></tr><tr class="even"><td>du cidre</td><td>苹果酒</td></tr><tr class="odd"><td>de l'eau minérale</td><td>矿泉水</td></tr><tr class="even"><td>des œufs</td><td>鸡蛋</td></tr><tr class="odd"><td>des légumes</td><td>蔬菜</td></tr><tr class="even"><td>pomme de terre</td><td>土豆</td></tr></tbody></table><h3 id="代词式动词">代词式动词</h3><table><thead><tr class="header"><th>se laver</th><th>洗漱/洗澡</th></tr></thead><tbody><tr class="odd"><td>se lever</td><td>起床</td></tr><tr class="even"><td>se promener</td><td>散步</td></tr><tr class="odd"><td>s'amuser</td><td>玩耍</td></tr><tr class="even"><td>se coucher</td><td>睡觉</td></tr><tr class="odd"><td>s'ennuyer</td><td>感到厌倦</td></tr><tr class="even"><td>se passer</td><td>发生</td></tr><tr class="odd"><td>s'inquiéter</td><td>担心</td></tr></tbody></table><h3 id="短语">短语</h3><table><thead><tr class="header"><th>购物</th><th>faire du shopping</th></tr></thead><tbody><tr class="odd"><td></td><td>faire des/les courses</td></tr><tr class="even"><td></td><td>faire des/les magasins</td></tr><tr class="odd"><td>度假</td><td>partir en vacances</td></tr><tr class="even"><td>上课</td><td>prendre le cours</td></tr></tbody></table><table><thead><tr class="header"><th>tout le temps</th><th>总是</th></tr></thead><tbody><tr class="odd"><td>tout le monde</td><td>大家</td></tr><tr class="even"><td>se souvenir de</td><td>想起</td></tr><tr class="odd"><td>depuis longtemps</td><td>已经很久</td></tr><tr class="even"><td>à l'étranger</td><td>在外国</td></tr><tr class="odd"><td>pour/dans un moment</td><td>现在/过一会</td></tr><tr class="even"><td>sur les lieux de</td><td>在……现场</td></tr><tr class="odd"><td>faire les études</td><td>上学</td></tr><tr class="even"><td>se souvenir de</td><td>想起</td></tr><tr class="odd"><td>être satisfait de</td><td>对……满意</td></tr><tr class="even"><td>être content de</td><td>对……开心</td></tr><tr class="odd"><td>être fier de</td><td>对……自豪</td></tr><tr class="even"><td>être certain/sûr de</td><td>对……确定</td></tr><tr class="odd"><td>s'inquiéter de/pour qch</td><td>对某事感到担心</td></tr><tr class="even"><td>ce type de</td><td>这种</td></tr><tr class="odd"><td>prendre qch <strong>sur</strong> qn</td><td>带某物在某人身上</td></tr><tr class="even"><td>avant de dormir</td><td>睡前</td></tr><tr class="odd"><td>avoir besoin de</td><td>需要</td></tr></tbody></table><table><thead><tr class="header"><th>à</th><th>-</th></tr></thead><tbody><tr class="odd"><td>donner qch à qn</td><td>给某人某物</td></tr><tr class="even"><td>offrir qch à qn</td><td>提供某人某物</td></tr><tr class="odd"><td>dire qch à qn</td><td>告诉某人某事</td></tr><tr class="even"><td>apprendre qch à qn</td><td>教某人某事</td></tr><tr class="odd"><td>apprendre à faire qch</td><td>学做某事</td></tr><tr class="even"><td>commencer à faire qch</td><td>开始做某事</td></tr><tr class="odd"><td>aider qn à faire qch</td><td>帮助某人某事</td></tr><tr class="even"><td>parler à/avec qn</td><td>和某人讲话</td></tr></tbody></table><table><thead><tr class="header"><th>de</th><th>-</th></tr></thead><tbody><tr class="odd"><td>parler <strong>de</strong> qn / qch</td><td>谈论某人/某事</td></tr><tr class="even"><td>Il est interdit/important <strong>de</strong> faire qch</td><td>做某事被禁止/很重要</td></tr><tr class="odd"><td>avoir l'habitude <strong>de</strong> faire qch</td><td>习惯于做某事</td></tr><tr class="even"><td>arrêter <strong>de</strong> faire qch</td><td>停止做某事</td></tr><tr class="odd"><td>essayer <strong>de</strong> faire qch</td><td>力争做某事</td></tr><tr class="even"><td>avoir envie/besoin <strong>de</strong> (faire) qch</td><td>想要/需要做某事</td></tr></tbody></table><h2 id="语法">语法</h2><ul><li><p>形容词前置（beau-belle/nouveau-nouvelle/vieux-vieille），名词前的复数不定冠词 des 变为 de</p><blockquote><p>des nouveaux films -&gt; de nouveaux films</p></blockquote></li><li><p>绝对否定：否定句中，直接宾语前的不定冠词/部分冠词变为 de</p><blockquote><p>Ils ont des lunettes. -&gt; Ils n'ont pas de lunettes.</p></blockquote></li><li><p>动词与主语人称代词倒装后元音相撞，加 t</p><blockquote><p>Comment va-t-elle au bureau?</p></blockquote></li><li><p>复杂倒装：名词主语 + 谓语动词 + 主语人称代词</p><blockquote><p>Comment Farid va-t-il au bureau?</p><p>Isabelle travaille-t-elle à Londres?</p></blockquote></li><li><p>我知道他没有给你说</p><blockquote><p>Je sais qu'il ne t'a pas dit.</p></blockquote></li><li><p>parler à qn 用间宾代词代替，parler de qch 用 en 代替，parler de qn 用 de + 重读人称代词</p></li><li><p>代词式动词过去分词的性数配合：被动意义和绝对意义无条件配合；自反意义和相互意义直宾配合，间宾不配合</p><blockquote><p>Elles se sont lavées hier.（直宾配合）</p><p>Elles se sont lavé les mains hier.（间宾不配合）</p><p>Elles se sont parlé hier.（间宾不配合）</p></blockquote></li></ul><h3 id="名词转阴">名词转阴</h3><ul><li>étudiant - étudiante</li><li>direc<strong>teur</strong> - directrice</li><li>dans<strong>eur</strong> - danseuse, chanteur - chanteuse</li><li>boulang<strong>er</strong> - boulangère</li><li>jui<strong>f</strong> - juive</li><li>informati<strong>cien</strong> - informaticienne</li><li>secrétair<strong>e</strong> - secrétaire</li></ul><h3 id="名词复数">名词复数</h3><ul><li>homme - hommes</li><li>fils - fils, nez - nez</li><li>noyau - noyaux, chapeau - chapeaux, feu - feux</li><li>cheval - chevaux</li></ul><h3 id="时态代词否定句">时态，代词，否定句</h3><ul><li><p>avoir</p><blockquote><p>j'ai regardé -&gt; je n'ai pas regardé</p></blockquote></li><li><p>être</p><blockquote><p>Oui, nous y sommes allés.</p><p>Non, nous n'y sommes pas allés.</p></blockquote></li><li><p>COI（间接宾语人称代词）</p><blockquote><p>Il parle à ses parents.</p><p>Il leur parle.</p><p>Il ne leur parle pas.</p></blockquote></li><li><p>COI + 命令式</p><blockquote><p>Tu me racontes cette histoire.</p><p>Raconte-moi cette histoire.</p><p>Ne me raconte pas cette histoire.</p></blockquote></li><li><p>COI + aller（最近将来时）</p><blockquote><p>Oui, je vais lui téléphoner.</p><p>Non, je ne vais pas lui téléphoner.</p></blockquote></li><li><p>COI + avoir（复合过去时）</p><blockquote><p>Paul lui a téléphoné hier matin.</p><p>Je ne leur ai pas acheté ce livre.</p><p>Il ne nous a pas dit bonjour.</p></blockquote></li></ul><h3 id="en-de-ça">en = de ça</h3><ul><li>N'en parlez pas.</li><li>J'en suis certain.</li><li>Qu'est-ce que tu en penses?</li></ul>]]></content>
      
      
      <categories>
          
          <category> 语言 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>计算定积分</title>
      <link href="/posts/46715/"/>
      <url>/posts/46715/</url>
      
        <content type="html"><![CDATA[<p>计算定积分 <span class="math display">\[I_n=\int_0^1(1-x^2)^n\d x.\]</span> <span id="more"></span></p><h2 id="递推">递推</h2><p><span class="math display">\[\begin{align*}I_n&amp;=\int_0^1(1-x^2)^n\,\mathrm dx\\&amp;=\int_0^1(1-x^2)(1-x^2)^{n-1}\,\mathrm dx\\&amp;=\int_0^1(1-x^2)^{n-1}\,\mathrm dx-\int_0^1x^2(1-x^2)^{n-1}\,\mathrm dx\\&amp;=I_{n-1}+\frac{1}{2n}\int_0^1x\,\mathrm d(1-x^2)^{n}\\&amp;=I_{n-1}+\frac{1}{2n}\left.x(1-x^2)^n\right|_0^1-\frac{1}{2n}\int_0^1(1-x^2)^n\,\mathrm dx\\&amp;=I_{n-1}-\frac{1}{2n}I_n\\&amp;={2n\over2n+1}I_{n-1},%&amp;=\left.t(1-t^2)\right|_{0}^1-n\int_0^1t(1-t^2)^{n-1}\,\mathrm dt\\%&amp;=-n\left(\left.t^2(1-t^2)^{n-1}\right|_0^1-\int_0^1\left((1-t^2)^{n-1}-2(n-1)t^2(1-t^2)^{n-2}\right)\,\mathrm dt\right)\\%&amp;=n\int_0^1(1-t^2)^{n-1}\,\mathrm dt+2n(n-1)\int_0^1t^2(1-t^2)^{n-2}\,\mathrm dt%&amp;=\int_0^1\sum_{k=0}^n{n\choose k}(-t^2)^k\,\mathrm dt\\%&amp;=\int_0^1\sum_{k=0}^n{n\choose k}(-1)^kt^{2k}\,\mathrm dt\\%&amp;=\sum_{k=0}^n{n\choose k}(-1)^k\int_0^1t^{2k}\,\mathrm dt\\%&amp;=\sum_{k=0}^n{(-1)^k{n\choose k}\over 2k+1}\end{align*}\]</span></p><p>利用 <span class="math inline">\(I_0=1\)</span> 递推可得 <span class="math display">\[I_n={(2n)!!\over(2n+1)!!}.\]</span></p><h2 id="gamma-函数">Gamma 函数</h2><p>作代换 <span class="math inline">\(x=\sqrt{t}\)</span>，可得 <span class="math display">\[\begin{align*}\int_0^1(1-x^2)^n\d x &amp;= \frac12\int_0^1 (1-t)^n t^{-\frac12}\d t\\&amp;= \frac12 \B\left(n+1, \frac12\right)\\&amp;= \frac12 {\Gamma(n+1)\Gamma\left(\frac12\right)\over\Gamma\left(n+\frac32\right)}\\&amp;=\frac12{n!\cdot\Gamma\left(\frac12\right)\over\frac{2n+1}{2}\times\cdots\times\frac32\times\frac12 \Gamma\left(\frac12\right)}\\&amp;= {2^nn!\over (2n+1)!!}\\&amp;={(2n)!!\over (2n+1)!!}.\end{align*}\]</span></p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 微积分 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Gauss 积分</title>
      <link href="/posts/48382/"/>
      <url>/posts/48382/</url>
      
        <content type="html"><![CDATA[<p>证明 <span class="math display">\[I=\int_{-\infty}^\infty\e^{-x^2}\d x=\sqrt{\pi}.\]</span> <span id="more"></span></p><h2 id="二重积分泊松的方法">二重积分（泊松的方法）</h2><p><span class="math display">\[\begin{align*}I^2 &amp;= \left(\int_{-\infty}^\infty\e^{-x^2}\d x\right)\left(\int_{-\infty}^\infty\e^{-y^2}\d y\right) \\&amp;= \int_{-\infty}^{\infty}\int_{-\infty}^{\infty}\e^{-(x^2+y^2)}\d x\d y\end{align*}\]</span></p><p>利用<a href="/posts/26639/index.html">极坐标换元</a>可以得到 <span class="math display">\[\begin{align*}I^2&amp;=\int_{0}^{2\pi}\int_0^\infty\e^{-r^2}r\d r\d\theta\\&amp;= 2\pi\int_0^\infty\e^{-r^2}r\d r\\&amp;= 2\pi\cdot\frac12\int_0^\infty\e^{-r^2}\d(r^2)\\&amp;= -\pi\cdot\left[\e^{-r^2}\right]_0^\infty\\&amp;= -\pi\cdot(0-1)\\&amp;= \pi.\end{align*}\]</span> 显然 <span class="math inline">\(I&gt;0\)</span>, 于是 <span class="math display">\[I=\sqrt{\pi}.\]</span></p><blockquote><p>注：其中需要严格证明反常重积分与累次积分是相等的。首先，利用比较判别法说明 <span class="math inline">\(I\)</span> 是绝对收敛的，就可以说明 <span class="math inline">\(I\)</span> 与其柯西主值相等。即 <span class="math display">\[I=\lim_{a\to+\infty}I(a)=\lim_{a\to+\infty}\int_{-a}^a\e^{-x^2}\d x.\]</span> 利用 Fubini 定理可以说明对于 <span class="math inline">\(I(a)\)</span>，二重积分与累次积分是相等的。此时积分区域是一个正方形，边长为 <span class="math inline">\(2a\)</span>。</p><p>之后，我们利用该正方形的<strong>外接圆</strong>和<strong>内切圆</strong>来用极坐标代换算两个重积分，这两个重积分最终都收敛于 <span class="math inline">\(\sqrt{\pi}\)</span>。最后利用夹逼准则说明结果成立。</p></blockquote><h2 id="笛卡尔坐标系拉普拉斯的方法">笛卡尔坐标系（拉普拉斯的方法）</h2><p>由于被积函数是偶函数，可以利用对称性得到 <span class="math display">\[I=2\int_0^\infty\e^{-x^2}\d x,\]</span> 那么 <span class="math display">\[I^2=4\int_0^\infty\left(\int_0^\infty\e^{-(x^2+y^2)}\d y\right)\d x.\]</span> 这里关键的代换是在 <span class="math inline">\(y\)</span> 的积分里让 <span class="math inline">\(y=xs\)</span> （此时把 <span class="math inline">\(x\)</span> 看作常数，积分关于 <span class="math inline">\(s\)</span>），如果 <span class="math inline">\(x\)</span> 和 <span class="math inline">\(y\)</span> 都可正可负，会让 <span class="math inline">\(s\)</span> 的范围难以确定，所以之前都换成了正的范围。</p><p>接下来 <span class="math display">\[\begin{align*}I^2&amp;=4\int_0^\infty\left(\int_0^\infty\e^{-(x^2+x^2s^2)}x\d s\right)\d x\\&amp;= 4\int_0^\infty\left(\int_0^\infty\e^{-x^2(1+s^2)}x\d x\right)\d s\\&amp;= 4\int_0^\infty\left(\frac12\int_0^\infty\e^{-x^2(1+s^2)}\d (x^2)\right)\d s\\&amp;= 2\int_0^\infty\left(\left.-\frac{1}{1+s^2}\e^{-x^2(1+s^2)}\right|_{x=0}^{x=\infty}\right)\d s\\&amp;=2\int_0^\infty\frac{1}{1+s^2}\d s\\&amp;= 2\ \left.\arctan s\right|_0^\infty\\&amp;=2\times\frac\pi2\\&amp;= \pi,\end{align*}\]</span> 同样 <span class="math inline">\(I=\sqrt\pi\)</span>.</p><blockquote><p>注：我们同样利用 Fubini 定理保障了积分换序不影响结果。</p></blockquote><h2 id="gamma-函数">Gamma 函数</h2><p>做变量代换 <span class="math inline">\(x=\sqrt{t}\)</span> 可以得到 <span class="math display">\[I=2\int_0^\infty\e^{-x^2}\d x=2\int_0^\infty\e^{-t}\cdot\frac12t^{-\frac12}\d t=\Gamma\left(\frac12\right).\]</span> 之后可以利用 Gamma 函数的性质比如</p><ul><li><p>余元公式 <span class="math display">\[\Gamma(1-z)\Gamma(z)={\pi\over\sin\pi z}\]</span> 中令 <span class="math inline">\(z=\frac12\)</span>.</p></li><li><p>倍乘公式 <span class="math display">\[\Gamma(2z)={2^{2z-1}\over\sqrt\pi}\Gamma(z)\Gamma\left(z+\frac12\right)\]</span> 中令 <span class="math inline">\(z=\frac12\)</span>.</p></li><li><p>Beta 函数 <span class="math display">\[B(x,y)={\Gamma(x)\Gamma(y)\over\Gamma(x+y)}\]</span> 中令 <span class="math inline">\(x=y=\frac12\)</span>，那么 <span class="math display">\[\Gamma\left(\frac12\right)=\sqrt {B\left(\frac12, \frac12\right)}.\]</span> 其中 <span class="math display">\[\begin{align*}B\left(\frac12, \frac12\right)&amp;=\int_0^1x^{-\frac12}(1-x)^{-\frac12}\d x\\&amp;=\int_0^{1}(t^2)^{-\frac12}(1- t^2)^{-\frac12}\cdot2t\d t\qquad (x=t^2)\\&amp;=2\int_0^1(1-t^2)^{-\frac12}\d t\\&amp;=2\left.\arcsin t\right|_0^1\\&amp;=\pi.\end{align*}\]</span></p></li><li><p>递推公式 <span class="math display">\[\Gamma\left(n+\frac12\right)=\Gamma\left(\frac12\right)\times\frac12\times\frac32\times\cdots\times{2n-1\over2}=\Gamma\left(\frac12\right)\cdot{(2n)!\over2^{2n}n!}\]</span> 中令 <span class="math inline">\(n\to\infty\)</span> 并利用 Stirling 公式。</p></li></ul><h2 id="积分号下求导">积分号下求导</h2><h3 id="法一">法一</h3><p>令 <span class="math display">\[A(t)=\left(\int_0^t\e^{-x^2}\d x\right)^2,\ B(t)=\int_0^1{\e^{-t^2(1+x^2)}\over1+x^2}\d x\]</span> 可以得到 <span class="math inline">\(A'(t)=-B'(t)\)</span>，其中 <span class="math inline">\(t&gt;0\)</span>。之后可以得到 <span class="math display">\[A(t)=B(t)+\frac\pi4,\]</span> 这个常数是通过让 <span class="math inline">\(t\to0^+\)</span> 得出的。</p><p>再让 <span class="math inline">\(t\to+\infty\)</span> 便得到了 <span class="math display">\[\left(\int_0^\infty\e^{-x^2}\d x\right)^2=\frac\pi4.\]</span></p><h3 id="法二">法二</h3><p>令 <span class="math display">\[F(t)=\int_0^\infty{\e^{-t^2(1+x^2)}\over 1+x^2}\d x,\]</span> 可得 <span class="math display">\[F'(t)=-I\e^{-t^2}\]</span> 那么 <span class="math display">\[F(+\infty)-F(0)=\int_0^\infty F'(t)\d t=\int_0^\infty -I\e^{-t^2}\d t=-\frac12I^2,\]</span> 所以 <span class="math display">\[I^2=2\left(F(0)-F(+\infty)\right)=2\int_0^\infty{1\over1+x^2}\d x=\pi.\]</span></p><h2 id="留数定理奇葩的方法">留数定理（奇葩的方法）</h2><p>令 <span class="math display">\[f(z)={\e^{-\frac{z^2}{2}}\over 1+\e^{-\tau z}},\]</span> 其中 <span class="math inline">\(\tau=\sqrt{\pi}(1+\i)\)</span>.</p><p>这样的取值满足 <span class="math display">\[\begin{equation}\label{shift}f(z)-f(z+\tau)=\e^{-\frac{z^2}{2}}.\end{equation}\]</span> <span class="math inline">\(f\)</span> 的奇点落在 <span class="math inline">\(y=x\)</span> 上，围道与奇点如图：</p><p><img src="/posts/48382/截屏2022-10-04%2021.12.16.png"></p><p>由留数定理，可得 <span class="math display">\[\oint_{\gamma_R}f(z)\d z=2\pi\i\cdot\mathrm{Res}\left(f;z=\frac\tau2\right)=\sqrt{2\pi}.\]</span> 令 <span class="math inline">\(R\to\infty\)</span>，只剩下上下两条边对积分有贡献，于是 <span class="math display">\[\begin{align*}\sqrt{2\pi}&amp;=\int_{-\infty}^\infty f(x)\d x-\int_{-\infty}^\infty f(x+\i\sqrt\pi)\d x\\&amp;=\int_{-\infty}^\infty f(x)\d x-\int_{-\infty}^\infty f(x+\tau-\pi)\d x\\&amp;=\int_{-\infty}^\infty f(x)\d x-\int_{-\infty}^\infty f(x+\tau)\d x\\&amp;=\int_{-\infty}^\infty \left(f(x)-f(x+\tau)\right)\d x\\\end{align*}\]</span> 利用性质 <span class="math inline">\(\eqref{shift}\)</span>​ 可得 <span class="math display">\[\sqrt{2\pi}=\int_{-\infty}^\infty\e^{-\frac{x^2}{2}}\d x,\]</span> 再代换 <span class="math inline">\(x=\sqrt 2t\)</span> 即可得 <span class="math inline">\(I=\sqrt\pi\)</span>.</p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 微积分 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Boosting</title>
      <link href="/posts/1458/"/>
      <url>/posts/1458/</url>
      
        <content type="html"><![CDATA[<p><span class="math display">\[f(\theta)=L(\theta)+\Omega(\theta)\]</span></p><p>其中 <span class="math inline">\(L\)</span> 是误差函数，衡量拟合程度；<span class="math inline">\(\Omega\)</span> 是正则项，衡量模型复杂度。</p><blockquote><p>复杂的模型（参数多）：神经网络</p><p>简单的模型：树、线性回归</p></blockquote><p>Tree 不需要正则化，因为不同属性之间不做比较。</p><h2 id="adaptive-boosting">Adaptive Boosting</h2><p>先训练第一个模型，增加预测错误的样本的权重，并减小预测正确的样本的权重，喂给第二个模型。</p><p>最终也会给每个弱模型自己的权重。</p><h2 id="gradient-boosting">Gradient Boosting</h2><p>通过梯度下降来最小化误差。在每一次迭代，通过现有集成模型的误差来训练当前的模型。</p><span id="more"></span><h3 id="xgboost">XGBoost</h3><ul><li>每个树内部的并行计算</li><li>正则化</li><li>处理稀疏性</li><li>同层生长（横向优先）</li><li>大样本比较慢</li><li>只接受数值型，需要 encoding</li><li>参数：<ul><li>General：种类</li><li>Tree：<ul><li>eta（学习率）</li><li>max_depth,</li><li>n_estimators,</li><li>subsample（每次取样本的一部分）,</li><li>colsample_bytree（取样本特征的一部分）</li><li>gamma（生长树的阈值）</li><li>alpha（L1 正则）</li><li>lambda（L2 正则）</li></ul></li><li>Task：</li><li>objective</li></ul></li></ul><h3 id="lightgmb">LightGMB</h3><ul><li>one-side sampling: 全部预测错误的和部分预测正确的，样本少，速度快</li><li>exclusive feature bundling</li><li>histogram-based algorithm</li><li>垂直生长（纵向优先）</li><li>容易过拟合</li><li>自带 encoding</li><li>参数<ul><li>Core:<ul><li>objective</li><li>boosting</li><li>num_iterations</li><li>learning_rate</li><li>num_leaves</li></ul></li><li>Learning:<ul><li>max_depth</li><li>min_data_in_leaf</li><li>feature_fraction</li><li>lambda_l1</li><li>lambda_l2</li></ul></li><li>IO:<ul><li>max_bin（控制 histogram）</li></ul></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>弱模型的集合 (ensemble)</title>
      <link href="/posts/36436/"/>
      <url>/posts/36436/</url>
      
        <content type="html"><![CDATA[<h2 id="bagging">Bagging</h2><ul><li><strong>homogeneous</strong> weak learner</li><li>learn each <strong>independently</strong> in parallel</li><li>combine through averaging</li><li>reduce variance</li></ul><h2 id="boosting">Boosting</h2><ul><li><strong>homogeneous</strong> weak learner</li><li>learn each <strong>sequentially</strong> in an adaptive way</li><li>combine through deternimistic strategy</li><li>reduce bias</li></ul><h2 id="stacking">Stacking</h2><ul><li><strong>heterogeneous</strong> weak learner</li><li>learn each <strong>independently</strong> in parallel</li><li>combine on each prediction</li></ul>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>图搜索算法</title>
      <link href="/posts/29510/"/>
      <url>/posts/29510/</url>
      
        <content type="html"><![CDATA[<h1 id="bfs">BFS</h1><h2 id="之字形遍历树">之字形遍历树</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  3</span><br><span class="line"> / \</span><br><span class="line">9  20</span><br><span class="line">   /\</span><br><span class="line">  15 7   </span><br></pre></td></tr></tbody></table></figure><p>返回 <code>[[3], [20,9], [15,7]]</code>.</p><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">zigzag</span>(<span class="params">root</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">        <span class="keyword">return</span> []</span><br><span class="line">    frontier = [root]</span><br><span class="line">    reverse = <span class="literal">False</span></span><br><span class="line">    ans = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> frontier:</span><br><span class="line">        <span class="built_in">next</span>, cur = [], []</span><br><span class="line">        <span class="comment"># next 存储邻域节点, cur 存储当前层的值</span></span><br><span class="line">        <span class="keyword">for</span> u <span class="keyword">in</span> frontier:</span><br><span class="line">            cur.append(u.val)</span><br><span class="line">            <span class="keyword">if</span> u.left:</span><br><span class="line">                <span class="built_in">next</span>.append(u.left)</span><br><span class="line">            <span class="keyword">if</span> u.right:</span><br><span class="line">                <span class="built_in">next</span>.append(u.right)</span><br><span class="line">        ans.append(cur[::-<span class="number">1</span>] <span class="keyword">if</span> reverse <span class="keyword">else</span> cur)</span><br><span class="line">        frontier = <span class="built_in">next</span></span><br><span class="line">        reverse = <span class="keyword">not</span> reverse</span><br><span class="line">    <span class="keyword">return</span> ans</span><br></pre></td></tr></tbody></table></figure><h2 id="岛屿数量">岛屿数量</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">11110</span><br><span class="line">11010</span><br><span class="line">11000</span><br><span class="line">00000</span><br></pre></td></tr></tbody></table></figure><p>其中 1 代表陆地, 0 代表水. 返回岛屿数量, 即 1.</p><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">BFS</span>(<span class="params">grid, r, c, marked</span>):</span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    (r, c) is the starting point</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="comment"># delta row and col</span></span><br><span class="line">    dr, dc = [-<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>]</span><br><span class="line">    marked.add((r, c))</span><br><span class="line">    frontier = [(r, c)]</span><br><span class="line">    <span class="keyword">while</span> frontier:</span><br><span class="line">        <span class="built_in">next</span> = []</span><br><span class="line">        <span class="keyword">for</span> r, c <span class="keyword">in</span> frontier:</span><br><span class="line">            <span class="keyword">for</span> d <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">                nr, nc = r + dr[d], c + dc[d]</span><br><span class="line">                <span class="keyword">if</span> <span class="number">0</span> &lt;= nr &lt; <span class="built_in">len</span>(grid) <span class="keyword">and</span> <span class="number">0</span> &lt;= nc &lt; <span class="built_in">len</span>(grid[<span class="number">0</span>]) \</span><br><span class="line">                  <span class="keyword">and</span> grid[nr][nc] == <span class="string">'1'</span> <span class="keyword">and</span> (nr, nc) <span class="keyword">not</span> <span class="keyword">in</span> marked:</span><br><span class="line">                    marked.add((nr, nc))</span><br><span class="line">                    <span class="built_in">next</span>.append((nr, nc))</span><br><span class="line">        frontier = <span class="built_in">next</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">numIslands</span>(<span class="params">grid</span>):</span><br><span class="line">    res = <span class="number">0</span></span><br><span class="line">    marked = <span class="built_in">set</span>()</span><br><span class="line">    <span class="keyword">for</span> r <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(grid)):</span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(grid[<span class="number">0</span>])):</span><br><span class="line">            <span class="keyword">if</span> grid[r][c] == <span class="string">'1'</span> <span class="keyword">and</span> (r, c) <span class="keyword">not</span> <span class="keyword">in</span> marked:</span><br><span class="line">                BFS(grid, r, c, marked)</span><br><span class="line">                res += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></tbody></table></figure><h2 id="单词变换">单词变换</h2><p>从 <code>hit</code> 变成 <code>cog</code>, 每次只变一个字符, 要求过程单词在列表 <code>[hot, dot, dog, lot, log, cog]</code> 中.</p><p>返回最短的变换路径长度 (5): <code>hit - hot - dot - dog - cog</code>. </p><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> string</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ladder_length</span>(<span class="params">begin, end, words</span>):</span><br><span class="line">    words = <span class="built_in">set</span>(words)</span><br><span class="line">    <span class="keyword">if</span> end <span class="keyword">not</span> <span class="keyword">in</span> words:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    ans = <span class="number">1</span></span><br><span class="line">    frontier = [begin]</span><br><span class="line">    used = <span class="built_in">set</span>(frontier)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> frontier:</span><br><span class="line">        <span class="built_in">next</span> = []</span><br><span class="line">        <span class="keyword">for</span> word <span class="keyword">in</span> frontier:</span><br><span class="line">            <span class="keyword">for</span> p <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(word)):</span><br><span class="line">                <span class="keyword">for</span> c <span class="keyword">in</span> string.ascii_lowercase:</span><br><span class="line">                    new_word = word[:p] + c + word[p+<span class="number">1</span>:]</span><br><span class="line">                    <span class="keyword">if</span> new_word == end:</span><br><span class="line">                        <span class="keyword">return</span> ans + <span class="number">1</span></span><br><span class="line">                    <span class="keyword">if</span> new_word <span class="keyword">in</span> words <span class="keyword">and</span> new_word <span class="keyword">not</span> <span class="keyword">in</span> used:</span><br><span class="line">                        used.add(new_word)</span><br><span class="line">                        <span class="built_in">next</span>.append(new_word)</span><br><span class="line">        frontier = <span class="built_in">next</span></span><br><span class="line">        ans += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(ladder_length(<span class="string">'hit'</span>, <span class="string">'cog'</span>, [<span class="string">'hot'</span>, <span class="string">'dot'</span>, <span class="string">'dog'</span>, <span class="string">'lot'</span>, <span class="string">'log'</span>, <span class="string">'cog'</span>]))</span><br></pre></td></tr></tbody></table></figure><p></p><h2 id="路径填充">路径填充</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">INF  -1   0   INF</span><br><span class="line">INF  INF INF  -1</span><br><span class="line">INF  -1  INF  -1</span><br><span class="line">0    -1  INF  INF</span><br></pre></td></tr></tbody></table></figure><p>INF 表示空房间, -1 表示墙, 0 表示门.</p><p>需要把 INF 都填充为走到最近的门的路径长度, 若没有路径还填 INF. 返回 </p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3 -1  0  1</span><br><span class="line">2  2  1 -1</span><br><span class="line">1 -1  2 -1</span><br><span class="line">0 -1  3  4</span><br></pre></td></tr></tbody></table></figure><p></p><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">walls_and_gates</span>(<span class="params">rooms</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> rooms:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    dr, dc = [-<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>]</span><br><span class="line">    N, C = <span class="built_in">len</span>(rooms), <span class="built_in">len</span>(rooms[<span class="number">0</span>])</span><br><span class="line">    frontier = [(r, c) <span class="keyword">for</span> r <span class="keyword">in</span> <span class="built_in">range</span>(N) <span class="keyword">for</span> c <span class="keyword">in</span> <span class="built_in">range</span>(C) <span class="keyword">if</span> rooms[r][c] == <span class="number">0</span>]</span><br><span class="line">    INF = <span class="number">2147483647</span></span><br><span class="line">    dist = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> frontier:</span><br><span class="line">        <span class="built_in">next</span> = []</span><br><span class="line">        <span class="keyword">for</span> r, c <span class="keyword">in</span> frontier:</span><br><span class="line">            <span class="keyword">for</span> d <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">                nr, nc = r + dr[d], c + dc[d]</span><br><span class="line">                <span class="keyword">if</span> <span class="number">0</span> &lt;= nr &lt; N <span class="keyword">and</span> <span class="number">0</span> &lt;= nc &lt; C \</span><br><span class="line">                    <span class="keyword">and</span> rooms[nr][nc] == INF:</span><br><span class="line">                    rooms[nr][nc] = dist + <span class="number">1</span></span><br><span class="line">                    <span class="built_in">next</span>.append((nr, nc))</span><br><span class="line">        frontier = <span class="built_in">next</span></span><br><span class="line">        dist += <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure><h1 id="dfs">DFS</h1><h2 id="检查是否有圈">检查是否有圈</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">directed_graph, visit_status, u</span>):</span><br><span class="line">    <span class="comment"># 0 表示还在访问, 1 表示访问结束</span></span><br><span class="line">    visit_status[u] = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> v <span class="keyword">in</span> directed_graph[u]:</span><br><span class="line">        <span class="keyword">if</span> v <span class="keyword">not</span> <span class="keyword">in</span> visit_status:</span><br><span class="line">            <span class="keyword">if</span> dfs(directed_graph, visit_status, v):</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">elif</span> visit_status[v] == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    visit_status[u] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">has_cycle</span>(<span class="params">directed_graph</span>):</span><br><span class="line">    visit_status = {}</span><br><span class="line">    <span class="keyword">for</span> v <span class="keyword">in</span> directed_graph:</span><br><span class="line">        <span class="keyword">if</span> v <span class="keyword">not</span> <span class="keyword">in</span> visit_status <span class="keyword">and</span> dfs(directed_graph, visit_status, v):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></tbody></table></figure><h2 id="拓扑排序">拓扑排序</h2><p>从任意节点出发, 遍历邻居, 直到遍历结束, 把邻居放入结果. 再把自己放入结果. 最后反转结果.</p><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">courses = []</span><br><span class="line">visited = [-<span class="number">1</span>] * num</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">u</span>):</span><br><span class="line">    visited[u] = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> v <span class="keyword">in</span> graph[u]:</span><br><span class="line">        <span class="keyword">if</span> visited[v] == <span class="number">0</span> <span class="keyword">or</span> (visited[v] == -<span class="number">1</span> <span class="keyword">and</span> <span class="keyword">not</span> dfs(v)):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    visited[u] = <span class="number">1</span></span><br><span class="line">    courses.append(u)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> u <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">    <span class="keyword">if</span> visited[u] == -<span class="number">1</span> <span class="keyword">and</span> <span class="keyword">not</span> dfs(u):</span><br><span class="line">      <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">courses.reverse()</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>如何避免过拟合</title>
      <link href="/posts/46474/"/>
      <url>/posts/46474/</url>
      
        <content type="html"><![CDATA[<p>过拟合是因为模型过于复杂, 而学习数据有限.</p><ul><li>增加学习样本.</li><li>避免过度训练.<ul><li>减少特征: 相关性分析, PCA ...</li><li>正则化.</li><li>集成学习.</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>PCA</title>
      <link href="/posts/4593/"/>
      <url>/posts/4593/</url>
      
        <content type="html"><![CDATA[<p>"降维" 是减少数据特征, 不是减少样本.</p><span id="more"></span><p>设 <span class="math inline">\(X\in\R^{N\times d}\)</span> 是 <span class="math inline">\(d\)</span> 维的数据矩阵 <span class="math display">\[X=\begin{bmatrix}x_{11} &amp; \cdots &amp; x_{1d}\\x_{21} &amp; \cdots &amp; x_{2d}\\\vdots &amp; \ddots &amp; \vdots\\x_{N1} &amp; \cdots &amp; x_{Nd}\end{bmatrix},\]</span> 其中 <span class="math inline">\(d\)</span> 是特征个数, <span class="math inline">\(N\)</span> 是样本个数. 希望把它降到 <span class="math inline">\(k\)</span> 维.</p><h2 id="例子">例子</h2><p>设只有两个特征 <span class="math inline">\(a\)</span> 和 <span class="math inline">\(b\)</span>. <span class="math display">\[X=\begin{bmatrix}a_1 &amp; b_1\\a_2 &amp; b_2\\\vdots &amp; \vdots\\a_N &amp; b_N\\\end{bmatrix},\]</span> 那么 <span class="math display">\[\frac1N X^TX=\begin{bmatrix}\frac1N \sum a_i^2 &amp; \frac 1N \sum a_ib_i\\\frac1N \sum a_ib_i &amp; \frac 1N\sum b_i^2\end{bmatrix}.\]</span> 对数据归一化之后, 两个特征里所有样本的均值为 0. 那么 <span class="math display">\[\frac1N X^TX=\begin{bmatrix}\mathrm{Cov}(a,a) &amp; \mathrm{Cov}(a,b)\\\mathrm{Cov}(b,a) &amp; \mathrm{Cov}(b,b)\end{bmatrix}\]</span> 是协方差阵.</p><h2 id="步骤">步骤</h2><ol type="1"><li>对数据进行归一化. (便于计算协方差阵)</li><li>计算协方差矩阵 <span class="math inline">\(X^TX= A\in\R^{d\times d}\)</span>. (实际上差一个常数, 但不影响)</li><li>特征值分解 <span class="math inline">\(A=Q\Lambda Q^T\)</span>.</li><li>取前 <span class="math inline">\(k\)</span> 个主导特征向量组成 <span class="math inline">\(Q_k\in\R^{d\times k}\)</span>.</li><li>把 <span class="math inline">\(X\)</span> 投影成了新矩阵 <span class="math inline">\(XQ_k\in\R^{N\times k}\)</span>.</li></ol>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>BST中的第二大元素</title>
      <link href="/posts/32090/"/>
      <url>/posts/32090/</url>
      
        <content type="html"><![CDATA[<h2 id="解法一">解法一</h2><p>反向的中序遍历, 第二个节点就是第二大的. </p><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">second_largest</span>(<span class="params">self</span>):</span><br><span class="line">        self.count = <span class="number">0</span></span><br><span class="line">        self.result = <span class="literal">None</span></span><br><span class="line">        self.traverse(root)</span><br><span class="line">        <span class="keyword">return</span> self.result</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">traverse</span>(<span class="params">self, root</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        self.traverse(root.right)</span><br><span class="line">        self.count += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> self.count == <span class="number">2</span>:</span><br><span class="line">            self.result = root.val</span><br><span class="line">            <span class="keyword">return</span>       </span><br><span class="line">        <span class="keyword">if</span> self.count &gt; <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        self.traverse(root.left)</span><br></pre></td></tr></tbody></table></figure> 时间: <span class="math inline">\(O(h)\)</span> 空间: <span class="math inline">\(O(h)\)</span><p></p><h2 id="解法二">解法二</h2><p>分类讨论. </p><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">find_largest</span>(<span class="params">root</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root.right:  <span class="comment"># 没有右子树时, 根是最大的</span></span><br><span class="line">        <span class="keyword">return</span> root</span><br><span class="line">    <span class="keyword">return</span> find_largest(root.right)  <span class="comment"># 有右子树时, 找其中最大的</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find_2nd_largest</span>(<span class="params">root</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root.right:  <span class="comment"># 没有右子树, 根最大; 左子树的最大就是第二大</span></span><br><span class="line">        <span class="keyword">return</span> find_largest(root.left)</span><br><span class="line">    <span class="comment"># 有右子树, 此时最大元素在右子树中</span></span><br><span class="line">    right = root.right</span><br><span class="line">    <span class="comment"># 右子树只有一个节点, 它是最大的, 根第二大</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> right.left <span class="keyword">and</span> <span class="keyword">not</span> right.right:  </span><br><span class="line">        <span class="keyword">return</span> root</span><br><span class="line">    <span class="comment"># 右子树还有子树, 在这里面找第二大的</span></span><br><span class="line">    <span class="keyword">return</span> find_2nd_largest(right)</span><br></pre></td></tr></tbody></table></figure><p></p>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>最长无重复子串的长度</title>
      <link href="/posts/1239/"/>
      <url>/posts/1239/</url>
      
        <content type="html"><![CDATA[<p><code>abcabcbb</code> 返回 3, 因为任意长度为 4 的子串都有重复字符. </p><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">longest_substring</span>(<span class="params">s</span>):</span><br><span class="line">    result = <span class="number">0</span></span><br><span class="line">    occurred = defaultdict(<span class="built_in">int</span>)</span><br><span class="line">    left = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> right <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(s)):</span><br><span class="line">        occurred[s[right]] += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> occurred[s[right]] &gt; <span class="number">1</span>:</span><br><span class="line">            occurred[s[left]] -= <span class="number">1</span></span><br><span class="line">            left += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        result = <span class="built_in">max</span>(result, right - left + <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></tbody></table></figure><p></p>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>找到离原点第k近的点</title>
      <link href="/posts/38610/"/>
      <url>/posts/38610/</url>
      
        <content type="html"><![CDATA[<p>利用大根堆: </p><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"><span class="keyword">from</span> numpy.linalg <span class="keyword">import</span> norm</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">k_closest</span>(<span class="params">points, k</span>):</span><br><span class="line">    h = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(points)):</span><br><span class="line">        dist = - norm(points[i])</span><br><span class="line">        heapq.heappush(h, (dist, i))</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(h) &gt; k:</span><br><span class="line">            heapq.heappop(h)  <span class="comment"># 把最远的 pop 出去了</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> [points[item[<span class="number">1</span>]] <span class="keyword">for</span> item <span class="keyword">in</span> h]</span><br></pre></td></tr></tbody></table></figure><p></p>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>字符串去重</title>
      <link href="/posts/47268/"/>
      <url>/posts/47268/</url>
      
        <content type="html"><![CDATA[<p><code>"aabbbccd"</code> 返回 <code>"abcd"</code>.</p><p>利用快慢指针, <code>fast</code> 负责遍历, <code>slow</code> 左边的是要保留的, 没有重复的字符. 可以做到原地修改. </p><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">remove_duplicate</span>(<span class="params">string</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(string) <span class="keyword">in</span> (<span class="number">0</span>, <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">return</span> string</span><br><span class="line"></span><br><span class="line">    string = <span class="built_in">list</span>(string)</span><br><span class="line">    slow, fast = <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> fast &lt; <span class="built_in">len</span>(string):</span><br><span class="line">        <span class="keyword">if</span> string[fast] != string[slow-<span class="number">1</span>]:</span><br><span class="line">            string[slow] = string[fast]</span><br><span class="line">            slow += <span class="number">1</span></span><br><span class="line">        fast += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">''</span>.join(string[:slow])</span><br></pre></td></tr></tbody></table></figure><p></p>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>逆波兰表达式</title>
      <link href="/posts/16754/"/>
      <url>/posts/16754/</url>
      
        <content type="html"><![CDATA[<p><code>1 2 + 3 * 4 /</code> 代表 <code>(1 + 2) * 3 / 4</code>.</p><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">evalRPN</span>(<span class="params">tokens</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(tokens) == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    stack = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(tokens)):</span><br><span class="line">        <span class="keyword">if</span> tokens[i] == <span class="string">'+'</span>:</span><br><span class="line">            r = stack.pop()</span><br><span class="line">            l = stack.pop()</span><br><span class="line">            stack.append(l + r)</span><br><span class="line">        <span class="keyword">elif</span> tokens[i] == <span class="string">'-'</span>:</span><br><span class="line">            r = stack.pop()</span><br><span class="line">            l = stack.pop()</span><br><span class="line">            stack.append(l - r)</span><br><span class="line">        <span class="keyword">elif</span> tokens[i] == <span class="string">'*'</span>:</span><br><span class="line">            r = stack.pop()</span><br><span class="line">            l = stack.pop()</span><br><span class="line">            stack.append(l * r)</span><br><span class="line">        <span class="keyword">elif</span> tokens[i] == <span class="string">'/'</span>:</span><br><span class="line">            r = stack.pop()</span><br><span class="line">            l = stack.pop()</span><br><span class="line">            stack.append(l // r)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            stack.append(<span class="built_in">int</span>(tokens[i]))</span><br><span class="line">    <span class="keyword">return</span> stack.pop()</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>树的按层遍历 (BFS)</title>
      <link href="/posts/8322/"/>
      <url>/posts/8322/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    3</span><br><span class="line">   / \</span><br><span class="line">  9  20</span><br><span class="line"> /  /  \</span><br><span class="line">3  15   7</span><br></pre></td></tr></tbody></table></figure><p>输出 <code>[3, 9, 20, 3, 15, 7]</code>.</p><span id="more"></span><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"></span><br><span class="line">queue = deque([root])</span><br><span class="line">result = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> queue:</span><br><span class="line">    node = queue.popleft()</span><br><span class="line">    result.append(node.val)</span><br><span class="line">    <span class="keyword">if</span> node.left:</span><br><span class="line">        queue.append(node.left)</span><br><span class="line">    <span class="keyword">if</span> node.right:</span><br><span class="line">        queue.append(node.right)</span><br></pre></td></tr></tbody></table></figure><h2 id="要求保存每一层">要求保存每一层</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    3</span><br><span class="line">   / \</span><br><span class="line">  9  20</span><br><span class="line"> /  /  \</span><br><span class="line">3  15   7</span><br><span class="line">  /  \</span><br><span class="line"> 21  22 </span><br></pre></td></tr></tbody></table></figure><p>输出 <code>[[3], [9, 20], [3, 15, 7], [21, 22]]</code>.</p><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">queue = deque([root])</span><br><span class="line">result = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> queue:</span><br><span class="line">    count = <span class="built_in">len</span>(queue)  <span class="comment"># 当前层有几个值?</span></span><br><span class="line">    current_level = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(count):</span><br><span class="line">        node = queue.popleft()</span><br><span class="line">        current_level.append(node.val)</span><br><span class="line">        <span class="keyword">if</span> node.left:</span><br><span class="line">            queue.append(node.left)</span><br><span class="line">        <span class="keyword">if</span> node.right:</span><br><span class="line">            queue.append(node.right)</span><br><span class="line">    result.append(current_level)</span><br></pre></td></tr></tbody></table></figure><p>时间: <span class="math inline">\(O(n)\)</span></p><p>空间: <span class="math inline">\(O(n)\)</span> (最宽的那一层)</p>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>卡方检验</title>
      <link href="/posts/7261/"/>
      <url>/posts/7261/</url>
      
        <content type="html"><![CDATA[<p>原假设: 两个 (binary) 变量独立.</p><table><thead><tr class="header"><th></th><th><span class="math inline">\(Y=0\)</span></th><th><span class="math inline">\(Y=1\)</span></th><th>total</th></tr></thead><tbody><tr class="odd"><td><span class="math inline">\(Z=0\)</span></td><td><span class="math inline">\(X_{00}\)</span></td><td><span class="math inline">\(X_{01}\)</span></td><td><span class="math inline">\(X_{0\cdot}\)</span></td></tr><tr class="even"><td><span class="math inline">\(Z=1\)</span></td><td><span class="math inline">\(X_{10}\)</span></td><td><span class="math inline">\(X_{11}\)</span></td><td><span class="math inline">\(X_{1\cdot}\)</span></td></tr><tr class="odd"><td>total</td><td><span class="math inline">\(X_{\cdot0}\)</span></td><td><span class="math inline">\(X_{\cdot1}\)</span></td><td><span class="math inline">\(X_{\cdot\cdot}=n\)</span></td></tr></tbody></table><p><span class="math display">\[U = \sum_{i=0}^1\sum_{j=0}^1\frac{(X_{ij}-E_{ij})^2}{E_{ij}},\]</span> 其中 <span class="math display">\[E_{ij}=\frac{X_{i\cdot}X_{\cdot j}}{n}\]</span> 含义是原假设下该单元格的期望值.</p><p>在原假设下, <span class="math inline">\(U\sim \chi_1^2\)</span>. 其中自由度为 <span class="math inline">\((I-1)(J-1)\)</span>.</p><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> chi2_contingency</span><br><span class="line"></span><br><span class="line">table = [[<span class="number">90</span>, <span class="number">165</span>], [<span class="number">84</span>, <span class="number">307</span>]]</span><br><span class="line">U, p, dof, expected = chi2_contingency(table, correction=<span class="literal">False</span>)</span><br></pre></td></tr></tbody></table></figure><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">U = 14.95864355957614</span><br><span class="line">p = 0.00010989348314654599</span><br><span class="line">dof = 1</span><br><span class="line">expected = [[ 68.68421053 186.31578947]</span><br><span class="line">            [105.31578947 285.68421053]]</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 统计 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>消消乐</title>
      <link href="/posts/34214/"/>
      <url>/posts/34214/</url>
      
        <content type="html"><![CDATA[<p>重复去重, 比如 abbbaz -&gt; aaz -&gt; z.</p><span id="more"></span><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">remove_duplicate_repeatedly</span>(<span class="params">string</span>):</span><br><span class="line">    <span class="comment"># corner case</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(string) &lt; <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> string</span><br><span class="line">    <span class="comment"># init</span></span><br><span class="line">    stack = deque()</span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="comment"># loop</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(string):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(stack) &gt; <span class="number">0</span> <span class="keyword">and</span> string[i] == stack[-<span class="number">1</span>]:</span><br><span class="line">            <span class="comment"># find duplicate: skip</span></span><br><span class="line">            <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(string) <span class="keyword">and</span> string[i] == stack[-<span class="number">1</span>]:</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            stack.pop()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            stack.append(string[i])</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">''</span>.join(stack)</span><br></pre></td></tr></tbody></table></figure><p>时间: <span class="math inline">\(O(n)\)</span></p><p>时间: <span class="math inline">\(O(n)\)</span></p><p>改进: 用慢指针存储栈顶.</p><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">remove_duplicate</span>(<span class="params">string</span>):</span><br><span class="line">    string = <span class="built_in">list</span>(string)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(string) &lt;= <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> string</span><br><span class="line">    s, f = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> f &lt; <span class="built_in">len</span>(string):</span><br><span class="line">        <span class="keyword">if</span> s &gt; <span class="number">0</span> <span class="keyword">and</span> <span class="built_in">input</span>[f] == <span class="built_in">input</span>[s]:  <span class="comment"># 栈非空</span></span><br><span class="line">            <span class="keyword">while</span> f &lt; <span class="built_in">len</span>(string) <span class="keyword">and</span> <span class="built_in">input</span>[f] == <span class="built_in">input</span>[s]:</span><br><span class="line">                f += <span class="number">1</span></span><br><span class="line">            s -= <span class="number">1</span>  <span class="comment"># 出栈</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            string[s + <span class="number">1</span>] = string[f]  <span class="comment"># 入栈</span></span><br><span class="line">            f += <span class="number">1</span></span><br><span class="line">            s += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">""</span>.join(string[:s+<span class="number">1</span>])</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>堆</title>
      <link href="/posts/21992/"/>
      <url>/posts/21992/</url>
      
        <content type="html"><![CDATA[<p>堆是一种完全二叉树. 即, 除了最后一层都是满的, 且所有节点尽量靠左. </p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">       11</span><br><span class="line">     /    \</span><br><span class="line">    10     7</span><br><span class="line">   / \    / \</span><br><span class="line">  9   5  6   4</span><br><span class="line"> /\  /\</span><br><span class="line">8  2 3 1</span><br></pre></td></tr></tbody></table></figure> 按列表存储更省空间: <code>[11, 10, 7, 9, 5, 6, 4, 8, 2, 3, 1]</code>.<p></p><span id="more"></span><p><code>left = parent * 2 + 1</code>, <code>right = parent * 2 + 2</code>, <code>parent = (child - 1) // 2</code></p><p><strong>小根堆</strong>: 每个节点都比孩子小.</p><p><strong>大根堆</strong>: 每个节点都比孩子大.</p><p>以小根堆为例:</p><h2 id="sift-up">sift up</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">sift_up</span>(<span class="params">array, index</span>):</span><br><span class="line">    parent_idx = (index - <span class="number">1</span>) // <span class="number">2</span></span><br><span class="line">    <span class="comment"># root or already min heap</span></span><br><span class="line">    <span class="keyword">if</span> parent_idx &lt; <span class="number">0</span> <span class="keyword">or</span> array[index] &gt; array[parent_idx]:  </span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    array[index], array[parent_idx] = array[parent_idx], array[index]</span><br><span class="line">    sift_up(array, parent_idx)</span><br></pre></td></tr></tbody></table></figure><p>时间: <span class="math inline">\(O(\log n)\)</span></p><p>空间: <span class="math inline">\(O(\log n)\)</span></p><h2 id="sift-down">sift down</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">sift_down</span>(<span class="params">array, index</span>):</span><br><span class="line">    left = index * <span class="number">2</span> + <span class="number">1</span></span><br><span class="line">    right = left + <span class="number">1</span></span><br><span class="line">    small = index</span><br><span class="line">    <span class="comment"># have left and left smaller</span></span><br><span class="line">    <span class="keyword">if</span> left &lt; <span class="built_in">len</span>(array) <span class="keyword">and</span> array[left] &lt; array[small]:</span><br><span class="line">        small = left</span><br><span class="line">    <span class="comment"># have right and right smaller</span></span><br><span class="line">    <span class="keyword">if</span> right &lt; <span class="built_in">len</span>(array) <span class="keyword">and</span> array[right] &lt; array[small]:</span><br><span class="line">        small = right</span><br><span class="line">    <span class="comment"># need to swap</span></span><br><span class="line">    <span class="keyword">if</span> small != index:</span><br><span class="line">        array[small], array[index] = array[index], array[small]</span><br><span class="line">        sift_down(array, small)</span><br></pre></td></tr></tbody></table></figure><p>时间: <span class="math inline">\(O(\log n)\)</span></p><p>空间: <span class="math inline">\(O(\log n)\)</span></p><h2 id="初始化">初始化</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">build_heap</span>(<span class="params">arr</span>):</span><br><span class="line">    <span class="comment"># start from the parent of last leaf, end at root</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(arr)//<span class="number">2</span> - <span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">        sift_down(arr, i)</span><br></pre></td></tr></tbody></table></figure><p>时间: <span class="math inline">\(O(n)\)</span></p><p>这是因为不是每次都需要 <span class="math inline">\(\log n\)</span> 的复杂度, 它与节点的深度有关.</p><p><span class="math inline">\(0\times n/2 + 1\times n/4 + 2\times n/8 + \cdots + \log n \times 1=O(n)\)</span>.</p><h2 id="实现">实现</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Heap</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.array = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">push</span>(<span class="params">self, val</span>):</span><br><span class="line">        self.array.append(val)</span><br><span class="line">        sift_up(self.array, <span class="built_in">len</span>(self.array)-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">pop</span>(<span class="params">self</span>):</span><br><span class="line">        res = self.array[<span class="number">0</span>]</span><br><span class="line">        self.array[<span class="number">0</span>], self.array[-<span class="number">1</span>] = self.array[-<span class="number">1</span>], self.array[<span class="number">0</span>]</span><br><span class="line">        self.array.pop()</span><br><span class="line">        sift_down(self.array, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></tbody></table></figure><h2 id="前-k-小的数据">前 k 小的数据</h2><p>step 1: 取前 k 个值放入大根堆.</p><p>step 2: 对剩余值, 与大根堆的堆顶比.</p><ul><li>若比堆顶大, 忽略;</li><li>若比堆顶小, 去堆顶, 加入该值.</li></ul><p>时间: <span class="math inline">\(O\left(k+(n-1)\log k\right)\)</span></p><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">kSmallest</span>(<span class="params">array</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> array:</span><br><span class="line">        <span class="keyword">return</span> array</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(array) &lt;= k:</span><br><span class="line">        <span class="keyword">return</span> array</span><br><span class="line">    res = [-i <span class="keyword">for</span> i <span class="keyword">in</span> array[:k]]</span><br><span class="line">    heapq.heapify(res)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(k, <span class="built_in">len</span>(array)):</span><br><span class="line">        <span class="keyword">if</span> array[i] &lt; -res[<span class="number">0</span>]:</span><br><span class="line">            heapq.heappop(res)</span><br><span class="line">            heapq.heappush(res, -array[i])</span><br><span class="line">    <span class="keyword">return</span> [-i <span class="keyword">for</span> i <span class="keyword">in</span> res]</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>树的路径和等于目标值</title>
      <link href="/posts/40717/"/>
      <url>/posts/40717/</url>
      
        <content type="html"><![CDATA[<h2 id="top-down">Top Down</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">exist</span>(<span class="params">self, root, target</span>):</span><br><span class="line">        self.target = target</span><br><span class="line">        self.ret = <span class="literal">False</span></span><br><span class="line">        self.helper(root, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> self.ret</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">helper</span>(<span class="params">selr, root, current</span>):</span><br><span class="line">        <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span> root.left <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">and</span> root.right <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            self.ret = self.ret <span class="keyword">or</span> current + root.val == self.target</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span> self.ret == <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        self.helper(root.left, current + root.val)</span><br><span class="line">        self.helper(root.right, current + root.val)</span><br></pre></td></tr></tbody></table></figure><h2 id="top-down-bottom-up">Top Down + Bottom Up</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">exist</span>(<span class="params">self, root, target</span>):</span><br><span class="line">        self.target = target</span><br><span class="line">        <span class="keyword">return</span> self.helper(root, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">helper</span>(<span class="params">self, root, current</span>):</span><br><span class="line">        <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">if</span> root.left <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">and</span> root.right <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> current + root.val == self.target</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> self.helper(root.left, current + root.val) <span class="keyword">or</span> self.helper(root.right, current + root.val)</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>树的最大路径和</title>
      <link href="/posts/49292/"/>
      <url>/posts/49292/</url>
      
        <content type="html"><![CDATA[<h2 id="叶子到根">叶子到根</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   10</span><br><span class="line">  /  \</span><br><span class="line"> -2   7</span><br><span class="line"> /\</span><br><span class="line">8 -4 </span><br></pre></td></tr></tbody></table></figure><p>最大路径和为 <span class="math inline">\(10+7=17\)</span>.</p><span id="more"></span><h3 id="bottom-up">Bottom Up</h3><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">maxPathSum</span>(<span class="params">root</span>):</span><br><span class="line">    <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> -<span class="built_in">float</span>(<span class="string">'inf'</span>)</span><br><span class="line">    <span class="keyword">if</span> root.left <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">and</span> root.right <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> root.val</span><br><span class="line"></span><br><span class="line">    left = maxPathSum(root.left)</span><br><span class="line">    right = maxPathSum(root.right)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>(left, right) + root.val</span><br></pre></td></tr></tbody></table></figure><h3 id="top-down">Top Down</h3><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">maxPathSum</span>(<span class="params">self, root</span>):</span><br><span class="line">        self.ret = -<span class="built_in">float</span>(<span class="string">'inf'</span>)</span><br><span class="line">        self.helper(root, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> self.ret</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">helper</span>(<span class="params">self, root, curSum</span>):</span><br><span class="line">        <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span> root.left <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">and</span> root.right <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            self.ret = <span class="built_in">max</span>(self.ret, curSum + root.val)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        self.helper(root.left, curSum + root.val)</span><br><span class="line">        self.helper(root.right, curSum + root.val)</span><br></pre></td></tr></tbody></table></figure><h2 id="叶子到根或部分">叶子到根或部分</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> -10</span><br><span class="line"> /  \</span><br><span class="line">2   11</span><br><span class="line">   /  \</span><br><span class="line">  6   14</span><br><span class="line">       \</span><br><span class="line">        -1</span><br></pre></td></tr></tbody></table></figure><p>最大路径和为 <span class="math inline">\(11+14=25\)</span>.</p><h3 id="top-down-1">Top Down</h3><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">maxPath</span>(<span class="params">self, root</span>):</span><br><span class="line">        <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        self.result = root.val</span><br><span class="line">        self.helper(root, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> self.result</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">helper</span>(<span class="params">self, root, prev</span>):</span><br><span class="line">        <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        prev = <span class="built_in">max</span>(root.val, prev + root.val)</span><br><span class="line">        self.result = <span class="built_in">max</span>(self.result, prev)</span><br><span class="line">        self.helper(root.left, prev)</span><br><span class="line">        self.helper(root.right, prev)</span><br></pre></td></tr></tbody></table></figure><h2 id="叶子到叶子">叶子到叶子</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">maxPathSum</span>(<span class="params">self, root</span>):</span><br><span class="line">        self.result = -<span class="built_in">float</span>(<span class="string">'inf'</span>)</span><br><span class="line">        self.helper(root)</span><br><span class="line">        <span class="keyword">return</span> self.result</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">helper</span>(<span class="params">self, root</span>):</span><br><span class="line">        <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> root.left <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">and</span> root.right <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> root.val</span><br><span class="line"></span><br><span class="line">        left = self.helper(root.left)</span><br><span class="line">        right = self.helper(root.right)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> root.left <span class="keyword">and</span> root.right:</span><br><span class="line">            self.result = <span class="built_in">max</span>(self.result, left + right + root.val)</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">max</span>(left, right) + root.val</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> root.left <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">and</span> root.right:</span><br><span class="line">                <span class="keyword">return</span> right + root.val</span><br><span class="line">            <span class="keyword">elif</span> root.left <span class="keyword">and</span> root.right <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">return</span> left + root.val</span><br></pre></td></tr></tbody></table></figure><h2 id="任意两个节点">任意两个节点</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">find_max</span>(<span class="params">self, root</span>):</span><br><span class="line">        self.<span class="built_in">max</span> = -<span class="built_in">float</span>(<span class="string">'inf'</span>)</span><br><span class="line">        self.helper(root)</span><br><span class="line">        <span class="keyword">return</span> self.<span class="built_in">max</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">helper</span>(<span class="params">self, root</span>):</span><br><span class="line">        <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        left = self.helper(root.left)</span><br><span class="line">        right = self.helper(root.right)</span><br><span class="line">        self.<span class="built_in">max</span> = <span class="built_in">max</span>(self.<span class="built_in">max</span>, root.val + <span class="built_in">max</span>(left, <span class="number">0</span>) + <span class="built_in">max</span>(right, <span class="number">0</span>))</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">max</span>(left, right, <span class="number">0</span>) + root.val</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>树的最小高度</title>
      <link href="/posts/64764/"/>
      <url>/posts/64764/</url>
      
        <content type="html"><![CDATA[<h2 id="bottom-up">Bottom Up</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">minDepth</span>(<span class="params">root</span>):</span><br><span class="line">    <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> helper(root)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">helper</span>(<span class="params">root</span>):</span><br><span class="line">    <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">float</span>(<span class="string">'inf'</span>)  <span class="comment"># 如果只有一个孩子, 返回该孩子处的高度</span></span><br><span class="line">    <span class="keyword">if</span> root.left <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">and</span> root.right <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    l = helper(root.left)</span><br><span class="line">    r = helper(root.right)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">min</span>(l, r) + <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure><h2 id="top-down">Top Down</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">minDepth</span>(<span class="params">self, root</span>):</span><br><span class="line">        <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        self.ret = <span class="built_in">float</span>(<span class="string">'inf'</span>)</span><br><span class="line">        self.helper(root, <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> self.ret</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">helper</span>(<span class="params">self, root, depth</span>):</span><br><span class="line">        <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span> root.left <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">and</span> root.right <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            self.ret = <span class="built_in">min</span>(self.ret, depth)</span><br><span class="line">        </span><br><span class="line">        self.helper(root.left, depth + <span class="number">1</span>)</span><br><span class="line">        self.helper(root.right, depth + <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>假设性检验</title>
      <link href="/posts/24350/"/>
      <url>/posts/24350/</url>
      
        <content type="html"><![CDATA[<p>假定原假设 <span class="math inline">\(H_0\)</span> 是正确的, 根据观测值决定是否推翻它.</p><span id="more"></span><p><img src="/posts/24350/tails.png"></p><p>在 <span class="math inline">\(H_0\)</span> 的假定下, 出现了当前的观测值 (或出现更极端的结果) 的概率被称为 <strong><span class="math inline">\(p\)</span> 值</strong>.</p><ul><li><p><strong>第一类错误</strong>: 拒绝了真的 <span class="math inline">\(H_0\)</span>. (冤案)</p></li><li><p><strong>第二类错误</strong>: 未拒绝假的 <span class="math inline">\(H_0\)</span>. (漏网)</p></li></ul><p>可能同时避免两类错误, 不可能同时犯两类错误.</p><hr><p>犯第一类错误的概率为 <span class="math inline">\(\alpha\)</span>, 即显著性水平.</p><p>犯第二类错误的概率为 <span class="math inline">\(\beta\)</span>.</p><p><img src="/posts/24350/H01.png" width="500"></p><p>不犯第二类错误的概率, 即正确拒绝一个假的 <span class="math inline">\(H_0\)</span> 的概率为 <span class="math inline">\(1-\beta\)</span>, 被称为<strong>功效</strong> (power).</p><h2 id="z-检验-已知总体的分布-或样本足够多"><span class="math inline">\(z\)</span> 检验: 已知总体的分布, 或样本足够多</h2><h3 id="一个组">一个组</h3><p>标准寿命为 <span class="math inline">\(10\)</span>. 抽取 <span class="math inline">\(100\)</span> 个样本, 样本均值为 <span class="math inline">\(11.2\)</span>, 样本方差为 <span class="math inline">\(0.25\)</span>. 是否可以判断样本的寿命比标准的长?</p><blockquote><p>样本容量超过 <span class="math inline">\(30\)</span>, 用样本方差来代替原方差.</p></blockquote><p><span class="math display">\[z = {11.2-10\over \sqrt{0.25/100}}=24\]</span></p><p><span class="math inline">\(p\)</span> 值 <span class="math inline">\(=F_{\text {normal}}(-24)\ll 0.01\)</span>, 拒绝原假设.</p><hr><p>扔 <span class="math inline">\(10\)</span> 次硬币有 <span class="math inline">\(6\)</span> 次正面向上, 是否 biased?</p><p><span class="math display">\[z = {0.6-0.5\over\sqrt{0.5\times(1-0.5)/10}} = 0.632\]</span></p><p>不能拒绝原假设.</p><h3 id="两个组">两个组</h3><p><span class="math display">\[z = {\mu_1-\mu_2\over\sqrt{\sigma_1^2/n_1+\sigma_2^2/n_2}}\]</span> 第一组 <span class="math inline">\(1000\)</span> 个, 均值 <span class="math inline">\(1000\)</span>; 第二组 <span class="math inline">\(500\)</span> 个, 均值 <span class="math inline">\(600\)</span>. 哪一组均值更大?</p><p><span class="math display">\[z = {p_1-p_2\over\sqrt{p(1-p)(1/n_1+1/n_2)}}\]</span> 第一组 <span class="math inline">\(1000\)</span> 个有 <span class="math inline">\(100\)</span> 次点击, 第二组 <span class="math inline">\(500\)</span> 个有 <span class="math inline">\(60\)</span> 次点击, 哪个转化率更高?</p><h2 id="t-检验-未知总体方差-且样本少"><span class="math inline">\(t\)</span> 检验: 未知总体方差, 且样本少</h2><p>样本量足够大时, <span class="math inline">\(t\)</span> 检验趋于 <span class="math inline">\(z\)</span> 检验.</p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 统计 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>BST</title>
      <link href="/posts/7069/"/>
      <url>/posts/7069/</url>
      
        <content type="html"><![CDATA[<h2 id="判断-中序遍历">判断: 中序遍历</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">inorder</span>(<span class="params">root, prev</span>):</span><br><span class="line">    <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">if</span> inorder(root.left, prev) == <span class="literal">False</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">if</span> root.val &lt;= prev[<span class="number">0</span>]:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    prev[<span class="number">0</span>] = root.val</span><br><span class="line">    <span class="keyword">if</span> inorder(root.right, prev) == <span class="literal">False</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">is_bst</span>(<span class="params">root</span>):</span><br><span class="line">    prev = [<span class="built_in">float</span>(<span class="string">'-inf'</span>)]</span><br><span class="line">    <span class="keyword">return</span> inorder(root, prev)</span><br></pre></td></tr></tbody></table></figure><h2 id="判断-先序遍历-向下传递">判断: 先序遍历 (向下传递)</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">helper</span>(<span class="params">root, m, M</span>):</span><br><span class="line">    <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> (m &lt; root.val &lt; M):</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> helper(root.left, m, root.val) <span class="keyword">and</span> helper(root.right, root.val, M)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">is_bst</span>(<span class="params">root</span>):</span><br><span class="line">    <span class="keyword">return</span> helper(root, <span class="built_in">float</span>(<span class="string">'-inf'</span>), <span class="built_in">float</span>(<span class="string">'inf'</span>))</span><br></pre></td></tr></tbody></table></figure><h2 id="搜索-递归">搜索: 递归</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">query</span>(<span class="params">root, target</span>):</span><br><span class="line">    <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    <span class="keyword">if</span> root.key == target:</span><br><span class="line">        <span class="keyword">return</span> root</span><br><span class="line">    <span class="keyword">if</span> root.key &gt; target:</span><br><span class="line">        <span class="keyword">return</span> query(root.left, target)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> query(root.right, target)</span><br></pre></td></tr></tbody></table></figure><p>时间: <span class="math inline">\(O(h)\)</span></p><p>空间: <span class="math inline">\(O(h)\)</span></p><h2 id="搜索-迭代">搜索: 迭代</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">query</span>(<span class="params">root, target</span>):</span><br><span class="line">    cur = root</span><br><span class="line">    <span class="keyword">while</span> cur <span class="keyword">and</span> cur.key != target:</span><br><span class="line">        <span class="keyword">if</span> cur.key &gt; target:</span><br><span class="line">            cur = cur.left</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            cur = cur.right</span><br><span class="line">    <span class="keyword">return</span> cur</span><br></pre></td></tr></tbody></table></figure><p>时间: <span class="math inline">\(O(h)\)</span></p><p>空间: <span class="math inline">\(O(1)\)</span></p><h2 id="插入">插入</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">insert</span>(<span class="params">root, key</span>):</span><br><span class="line">    <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> Node(key)</span><br><span class="line">    <span class="keyword">if</span> key &lt; root.key:</span><br><span class="line">        root.left = insert(root.left, key)</span><br><span class="line">    <span class="keyword">elif</span> key &gt; root.key:</span><br><span class="line">        root.right = insert(root.right, key)</span><br><span class="line">    <span class="keyword">return</span> root</span><br></pre></td></tr></tbody></table></figure><p>时间: <span class="math inline">\(O(h)\)</span></p><p>空间: <span class="math inline">\(O(h)\)</span></p>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SQL 基础</title>
      <link href="/posts/19528/"/>
      <url>/posts/19528/</url>
      
        <content type="html"><![CDATA[<h2 id="select">SELECT</h2><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> Country) <span class="keyword">FROM</span> Customers;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Customers <span class="keyword">WHERE</span> <span class="keyword">not</span> (Country<span class="operator">=</span><span class="string">'Germany'</span> <span class="keyword">and</span> city<span class="operator">=</span><span class="string">'Berlin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Customers <span class="keyword">WHERE</span> Country <span class="keyword">IN</span> (<span class="keyword">SELECT</span> Country <span class="keyword">FROM</span> Suppliers);</span><br></pre></td></tr></tbody></table></figure><h2 id="like">LIKE</h2><p><code>%</code>: zero, one or multiple char</p><p><code>_</code>: a single char </p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Customers <span class="keyword">WHERE</span> <span class="built_in">lower</span>(CustomerName) <span class="keyword">LIKE</span> <span class="string">'a%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Customers <span class="keyword">WHERE</span> city <span class="keyword">LIKE</span> <span class="string">'____'</span>;</span><br></pre></td></tr></tbody></table></figure><p></p><h2 id="group-by">GROUP BY</h2><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ...</span><br><span class="line"><span class="keyword">FROM</span> ...</span><br><span class="line"><span class="keyword">WHERE</span> ...</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> ...</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> ... <span class="keyword">ASC</span> <span class="operator">/</span> <span class="keyword">DESC</span>;</span><br></pre></td></tr></tbody></table></figure><h2 id="aggregate-functions">Aggregate functions</h2><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Min</span>(), <span class="built_in">Max</span>(), <span class="built_in">Count</span>(), <span class="built_in">Sum</span>(), <span class="built_in">Avg</span>()</span><br></pre></td></tr></tbody></table></figure><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">avg</span>(sum_id) <span class="keyword">as</span> avg_spend_per_orderid</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">(<span class="keyword">SELECT</span> order_id, <span class="built_in">sum</span>(spend) <span class="keyword">as</span> sum_id</span><br><span class="line"><span class="keyword">FROM</span> example</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="number">1</span>)</span><br></pre></td></tr></tbody></table></figure><h2 id="having">HAVING</h2><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ...</span><br><span class="line"><span class="keyword">FROM</span> ...</span><br><span class="line"><span class="keyword">WHERE</span> ...</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> ...</span><br><span class="line"><span class="keyword">HAVING</span> ...</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> ...</span><br></pre></td></tr></tbody></table></figure><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Country, <span class="built_in">count</span>(CustomerID)</span><br><span class="line"><span class="keyword">FROM</span> Customers</span><br><span class="line"><span class="keyword">WHERE</span> Country <span class="keyword">in</span> (<span class="string">'Brazil'</span>, <span class="string">'France'</span>, <span class="string">'USA'</span>)</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> Country</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">count</span>(CustomerID) <span class="operator">&gt;</span> <span class="number">5</span>;</span><br></pre></td></tr></tbody></table></figure><h2 id="union">UNION</h2><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Country <span class="keyword">FROM</span> Customers</span><br><span class="line"><span class="keyword">UNION</span> (<span class="keyword">ALL</span>)</span><br><span class="line"><span class="keyword">SELECT</span> Country <span class="keyword">FROM</span> Suppliers</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="number">1</span>;</span><br></pre></td></tr></tbody></table></figure><h2 id="with">WITH</h2><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WITH</span> cate15 <span class="keyword">as</span> (</span><br><span class="line">  <span class="keyword">SELECT</span> categoryid, productid</span><br><span class="line">  <span class="keyword">FROM</span> products</span><br><span class="line">  <span class="keyword">WHERE</span> categoryid <span class="keyword">BETWEEN</span> <span class="number">1</span> <span class="keyword">and</span> <span class="number">5</span></span><br><span class="line">),</span><br><span class="line">od15 <span class="keyword">as</span> (</span><br><span class="line">  <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> orderdetails</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> od15 </span><br><span class="line"><span class="keyword">WHERE</span> productid <span class="keyword">in</span> (<span class="keyword">SELECT</span> productid <span class="keyword">from</span> cate15)</span><br></pre></td></tr></tbody></table></figure><h2 id="windows-function">Windows function</h2><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">row_number</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> ... <span class="keyword">order</span> <span class="keyword">by</span> ...)</span><br></pre></td></tr></tbody></table></figure><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> category, product, sales, row_num</span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line">  <span class="keyword">SELECT</span> category, product, sales, </span><br><span class="line">  <span class="built_in">row_number</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> category <span class="keyword">order</span> <span class="keyword">by</span> sales <span class="keyword">desc</span>) <span class="keyword">as</span> row_num</span><br><span class="line">  <span class="keyword">FROM</span> tab</span><br><span class="line">)</span><br><span class="line"><span class="keyword">WHERE</span> row_num <span class="operator">&lt;=</span> <span class="number">2</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">categoryid, productid, price, </span><br><span class="line"><span class="built_in">sum</span>(price) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> categoryid <span class="keyword">order</span> <span class="keyword">by</span> productid) <span class="keyword">as</span> cum_sum</span><br><span class="line"><span class="keyword">FROM</span> products</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="number">1</span>,<span class="number">2</span>;</span><br></pre></td></tr></tbody></table></figure><p><code>lag()</code>: above, <code>lead()</code>: below </p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span>,</span><br><span class="line"><span class="built_in">lag</span>(birthdate, <span class="number">1</span>) <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> birthdate),</span><br><span class="line"><span class="built_in">lead</span>(birthdate, <span class="number">2</span>) <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> birthdate)</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br></pre></td></tr></tbody></table></figure><p></p><h2 id="case-when">CASE WHEN</h2><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Country,</span><br><span class="line">       <span class="keyword">case</span> <span class="keyword">when</span> country <span class="keyword">in</span> (<span class="string">'USA'</span>) <span class="keyword">then</span> <span class="string">'America'</span></span><br><span class="line">            <span class="keyword">when</span> country <span class="keyword">in</span> (<span class="string">'Mexico'</span>) <span class="keyword">then</span> <span class="string">'emerging markets'</span></span><br><span class="line">            <span class="keyword">else</span> <span class="string">'other markets'</span> <span class="keyword">end</span> <span class="keyword">as</span> country_flag</span><br><span class="line"><span class="keyword">FROM</span> customers;</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> SQL </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>检查 Binary search tree (BST)</title>
      <link href="/posts/32064/"/>
      <url>/posts/32064/</url>
      
        <content type="html"><![CDATA[<p>定义: 对每个节点, 左子树的值都比它小, 右子树的值都比它大. </p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    10</span><br><span class="line">   /  \</span><br><span class="line">  5    15</span><br><span class="line"> / \   / \</span><br><span class="line">2   7 12 20</span><br></pre></td></tr></tbody></table></figure> <figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">BST</span>(<span class="params">root</span>):</span><br><span class="line">    <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    min_val = <span class="built_in">float</span>(<span class="string">'-inf'</span>)</span><br><span class="line">    max_val = <span class="built_in">float</span>(<span class="string">'inf'</span>)</span><br><span class="line">    <span class="keyword">return</span> isBST(root, min_val, max_val)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">isBST</span>(<span class="params">root, min_val, max_val</span>):</span><br><span class="line">    <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">if</span> root.val &lt;= min_val <span class="keyword">or</span> root.val &gt;= max_val:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> isBST(root.left, min_val, root.val) <span class="keyword">and</span> isBST(root.right, root.val, max_val)</span><br></pre></td></tr></tbody></table></figure><p></p>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>用两个 stack 实现 queue</title>
      <link href="/posts/27896/"/>
      <url>/posts/27896/</url>
      
        <content type="html"><![CDATA[<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Queue</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        self.s1 = []  <span class="comment"># entrance</span></span><br><span class="line">        self.s2 = []  <span class="comment"># exit</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">enqueue</span>(<span class="params">self, x</span>):</span><br><span class="line">        self.s1.append(x)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">dequeue</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.s2:</span><br><span class="line">            <span class="keyword">while</span> self.s1:</span><br><span class="line">                self.s2.append(self.s1.pop())</span><br><span class="line">        <span class="keyword">return</span> self.s2.pop()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">is_empty</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">not</span> self.s1 <span class="keyword">and</span> <span class="keyword">not</span> self.s2</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">size</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.s1) + <span class="built_in">len</span>(self.s2)</span><br></pre></td></tr></tbody></table></figure><p>时间:</p><ul><li>入队 <span class="math inline">\(O(1)\)</span></li><li>出队最差 <span class="math inline">\(O(n)\)</span>, amortized <span class="math inline">\(O(1)\)</span></li></ul>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>翻转二叉树</title>
      <link href="/posts/22393/"/>
      <url>/posts/22393/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    1            4</span><br><span class="line">   / \          / \</span><br><span class="line">  2   3   -&gt;   5   2</span><br><span class="line"> / \              / \</span><br><span class="line">4   5            3   1</span><br></pre></td></tr></tbody></table></figure><p>单元: </p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  A          B</span><br><span class="line"> / \   -&gt;   / \</span><br><span class="line">B   C      C   A</span><br></pre></td></tr></tbody></table></figure> <figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root.left.left = root.right</span><br><span class="line">root.left.right = root</span><br><span class="line">root.left = <span class="literal">None</span></span><br><span class="line">root.right = <span class="literal">None</span></span><br></pre></td></tr></tbody></table></figure><p></p><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">upside</span>(<span class="params">root</span>):</span><br><span class="line">    <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> root</span><br><span class="line">    <span class="keyword">if</span> root.left <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">and</span> root.right <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> root</span><br><span class="line">    new_root = upside(root.left)</span><br><span class="line">    root.left.left = root.right</span><br><span class="line">    root.left.right = root</span><br><span class="line">    root.left = <span class="literal">None</span></span><br><span class="line">    root.right = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">return</span> new_root</span><br></pre></td></tr></tbody></table></figure><p>时间: <span class="math inline">\(O(n/3)=O(n)\)</span></p><p>空间: <span class="math inline">\(O(n/3)=O(n)\)</span></p>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>二叉树的一些遍历</title>
      <link href="/posts/47437/"/>
      <url>/posts/47437/</url>
      
        <content type="html"><![CDATA[<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TreeNode</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, val</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        self.val = val</span><br><span class="line">        self.left = <span class="literal">None</span></span><br><span class="line">        self.right = <span class="literal">None</span></span><br></pre></td></tr></tbody></table></figure><span id="more"></span><h2 id="先序-pre-order-val-left-right">先序 Pre-order: val, left, right</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">preorder</span>(<span class="params">root</span>):</span><br><span class="line">    <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="built_in">print</span>(root.val, end=<span class="string">' '</span>)</span><br><span class="line">    preorder(root.left)</span><br><span class="line">    preorder(root.right)</span><br></pre></td></tr></tbody></table></figure><p>时间: <span class="math inline">\(O(n)\)</span></p><p>空间: <span class="math inline">\(O(h)\)</span>, <span class="math inline">\(h\)</span> 是树的高度</p><h2 id="中序根序-in-order-left-val-right">中序/根序 In-order: left, val, right</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">inorder</span>(<span class="params">root</span>):</span><br><span class="line">    <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    inorder(root.left)</span><br><span class="line">    <span class="built_in">print</span>(root.val)</span><br><span class="line">    inorder(root.right)</span><br></pre></td></tr></tbody></table></figure><h2 id="后序-post-order-left-right-val">后序 Post-order: left, right, val</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">postorder</span>(<span class="params">root</span>):</span><br><span class="line">    <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    postorder(root.left)</span><br><span class="line">    postorder(root.right)</span><br><span class="line">    <span class="built_in">print</span>(root.val)</span><br></pre></td></tr></tbody></table></figure><h2 id="获取高度">获取高度</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_height</span>(<span class="params">root</span>):</span><br><span class="line">    <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    left = get_height(root.left)</span><br><span class="line">    right = get_height(root.right)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>(left, right) + <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure><p>时间: <span class="math inline">\(O(n)\)</span></p><p>空间: <span class="math inline">\(O(h)\)</span></p><h2 id="获取节点数">获取节点数</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_sum</span>(<span class="params">root</span>):</span><br><span class="line">    <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    left = get_sum(root.left)</span><br><span class="line">    right = get_sum(root.right)</span><br><span class="line">    <span class="keyword">return</span> left + right + <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure><h2 id="按行打印">按行打印</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">print_by_row</span>(<span class="params">root</span>):</span><br><span class="line">    q = deque()</span><br><span class="line">    q.append(root)</span><br><span class="line">    <span class="keyword">while</span> q:</span><br><span class="line">        head = q.popleft()</span><br><span class="line">        <span class="built_in">print</span>(head.val, end=<span class="string">' '</span>)</span><br><span class="line">        <span class="keyword">if</span> head.left:</span><br><span class="line">            q.append(head.left)</span><br><span class="line">        <span class="keyword">if</span> head.right:</span><br><span class="line">            q.append(head.right)</span><br></pre></td></tr></tbody></table></figure><h2 id="按行打印-中途要求回车">按行打印, 中途要求回车</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">print_by_row2</span>(<span class="params">root</span>):</span><br><span class="line">    cur = deque([root])</span><br><span class="line">    <span class="built_in">next</span> = deque()</span><br><span class="line">    <span class="keyword">while</span> cur:</span><br><span class="line">        head = cur.popleft()</span><br><span class="line">        <span class="built_in">print</span>(head.val, end=<span class="string">' '</span>)</span><br><span class="line">        <span class="keyword">if</span> head.left:</span><br><span class="line">            <span class="built_in">next</span>.append(head.left)</span><br><span class="line">        <span class="keyword">if</span> head.right:</span><br><span class="line">            <span class="built_in">next</span>.append(head.right)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> cur:</span><br><span class="line">            <span class="built_in">print</span>()</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">next</span>:</span><br><span class="line">                cur, <span class="built_in">next</span> = <span class="built_in">next</span>, deque()</span><br></pre></td></tr></tbody></table></figure><h2 id="非递归遍历">非递归遍历</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">stack = [(root, <span class="number">1</span>)]</span><br><span class="line"><span class="keyword">while</span> stack:</span><br><span class="line">    node, count = stack.pop()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> count == <span class="number">1</span>:</span><br><span class="line">        <span class="built_in">print</span>(node.val)  <span class="comment"># 更改这一句以实现三种顺序</span></span><br><span class="line">        stack.append((node, count + <span class="number">1</span>))</span><br><span class="line">        <span class="keyword">if</span> node.left:</span><br><span class="line">            stack.append((node.left, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> count == <span class="number">2</span>:</span><br><span class="line">        stack.append((node, count + <span class="number">1</span>))</span><br><span class="line">        <span class="keyword">if</span> node.right:</span><br><span class="line">            stack.append((node.right, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> count == <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">continue</span></span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>链表删除值</title>
      <link href="/posts/57079/"/>
      <url>/posts/57079/</url>
      
        <content type="html"><![CDATA[<p>比如 <code>8 -&gt; 5 -&gt; 8 -&gt; 8 -&gt; 1 -&gt; 8</code> 删除 <code>8</code>, 返回 <code>5 -&gt; 1</code>.</p><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">remove</span>(<span class="params">head, val</span>):</span><br><span class="line">    <span class="keyword">if</span> head <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> head</span><br><span class="line"></span><br><span class="line">    fake = ListNode(<span class="literal">None</span>)</span><br><span class="line">    fake.<span class="built_in">next</span> = head</span><br><span class="line">    prev, cur = fake, head</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> cur:</span><br><span class="line">        <span class="keyword">if</span> cur.val == val:</span><br><span class="line">            prev.<span class="built_in">next</span> = cur.<span class="built_in">next</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            prev = cur    </span><br><span class="line">        cur = cur.<span class="built_in">next</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> fake.<span class="built_in">next</span></span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>二分查找</title>
      <link href="/posts/42877/"/>
      <url>/posts/42877/</url>
      
        <content type="html"><![CDATA[<h2 id="原始问题-找到返回下标-找不到返回空">原始问题: 找到返回下标, 找不到返回空</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">binary_search</span>(<span class="params">array, target</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> array:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        </span><br><span class="line">    left, right = <span class="number">0</span>, <span class="built_in">len</span>(array)-<span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> left &lt;= right:</span><br><span class="line">        mid = (left + right) // <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> array[mid] &gt; target:</span><br><span class="line">            right = mid - <span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> array[mid] &lt; target:</span><br><span class="line">            left = mid + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> mid</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></tbody></table></figure><p>时间: <span class="math inline">\(O(\log N)\)</span></p><p>空间: <span class="math inline">\(O(1)\)</span></p><h2 id="变种-有序矩阵">变种: 有序矩阵</h2><p>比如在下面的矩阵中找 10 </p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1  2  3  4</span><br><span class="line">5  6  7  8</span><br><span class="line">9  10 11 12</span><br></pre></td></tr></tbody></table></figure> 应该返回 <code>(2, 1)</code>. 设矩阵是 <code>M*N</code> 的.<p></p><p>关键就在于压平后的下标和行标, 列标之间的关系.</p><ul><li><code>idx = row_idx * N + col_idx</code></li><li><code>row_idx = idx // N</code></li><li><code>col_idx = idx % N</code></li></ul><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">binary_search_2d</span>(<span class="params">matrix, target</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> matrix:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    M, N = <span class="built_in">len</span>(matrix), <span class="built_in">len</span>(matrix[<span class="number">0</span>])</span><br><span class="line">    left, right = <span class="number">0</span>, M*N-<span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> left &lt;= right:</span><br><span class="line">        mid = (left + right) // <span class="number">2</span></span><br><span class="line">        row = mid // N</span><br><span class="line">        col = mid % N</span><br><span class="line">        <span class="keyword">if</span> matrix[row][col] &gt; target:</span><br><span class="line">            right = mid - <span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> matrix[row][col] &lt; target:</span><br><span class="line">            left = mid + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> (row, col)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></tbody></table></figure><p>时间: <span class="math inline">\(\log(MN)\)</span></p><h2 id="变种-找最近的数">变种: 找最近的数</h2><p>比如在 <code>[1, 2, 5, 9]</code> 中找 <code>3</code>, 应该返回下标 <code>1</code>. </p><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">find_closest</span>(<span class="params">array, target</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> array:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    left, right = <span class="number">0</span>, <span class="built_in">len</span>(array)-<span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> left &lt; right - <span class="number">1</span>:</span><br><span class="line">        mid = (left + right) // <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> array[mid] &gt; target:</span><br><span class="line">            right = mid</span><br><span class="line">        <span class="keyword">elif</span> array[mid] &lt; target:</span><br><span class="line">            left = mid</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> mid</span><br><span class="line">    <span class="keyword">return</span> left <span class="keyword">if</span> <span class="built_in">abs</span>(target - array[left]) &lt; <span class="built_in">abs</span>(target - array[right]) <span class="keyword">else</span> right</span><br></pre></td></tr></tbody></table></figure><p></p><h2 id="变种-找第一次出现的下标">变种: 找第一次出现的下标</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">find_first</span>(<span class="params">array, target</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> array:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    left, right = <span class="number">0</span>, <span class="built_in">len</span>(array)-<span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> left &lt; right - <span class="number">1</span>:</span><br><span class="line">        mid = (left + right) // <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> array[mid] &gt; target:</span><br><span class="line">            right = mid - <span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> array[mid] &lt; target:</span><br><span class="line">            left = mid + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            right = mid</span><br><span class="line">    <span class="keyword">if</span> array[left] == target:</span><br><span class="line">        <span class="keyword">return</span> left</span><br><span class="line">    <span class="keyword">if</span> array[right] == target:</span><br><span class="line">        <span class="keyword">return</span> right</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></tbody></table></figure><h2 id="变种-找最后一次出现的下标">变种: 找最后一次出现的下标</h2><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">find_last</span>(<span class="params">array, target</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> array:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    left, right = <span class="number">0</span>, <span class="built_in">len</span>(array)-<span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> left &lt; right - <span class="number">1</span>:</span><br><span class="line">        mid = (left + right) // <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> array[mid] &gt; target:</span><br><span class="line">            right = mid - <span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> array[mid] &lt; target:</span><br><span class="line">            left = mid + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            left = mid</span><br><span class="line">    <span class="keyword">if</span> array[right] == target:</span><br><span class="line">        <span class="keyword">return</span> right</span><br><span class="line">    <span class="keyword">if</span> array[left] == target:</span><br><span class="line">        <span class="keyword">return</span> left</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>排序</title>
      <link href="/posts/37489/"/>
      <url>/posts/37489/</url>
      
        <content type="html"><![CDATA[<h2 id="冒泡排序-bubble-sort">冒泡排序 (bubble sort)</h2><h3 id="解法一">解法一</h3><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">bubble_sort1</span>(<span class="params">array</span>):</span><br><span class="line">    <span class="comment"># 每次都排好最后一个元素, 所以关注的列表长度 (n) 依次少 1</span></span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(array)-<span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>):    </span><br><span class="line">        <span class="comment"># 从左到右比较, 把最大的数串到最右边</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            <span class="keyword">if</span> array[i] &gt; array[i+<span class="number">1</span>]:</span><br><span class="line">                array[i], array[i+<span class="number">1</span>] = array[i+<span class="number">1</span>], array[i]</span><br></pre></td></tr></tbody></table></figure><h3 id="解法二">解法二</h3><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">bubble_sort2</span>(<span class="params">array</span>):</span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(array)):</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(array)-n-<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> array[i] &gt; array[i+<span class="number">1</span>]:</span><br><span class="line">                array[i], array[i+<span class="number">1</span>] = array[i+<span class="number">1</span>], array[i]</span><br></pre></td></tr></tbody></table></figure><p>时间: <span class="math inline">\(O(n^2)\)</span></p><p>空间: <span class="math inline">\(O(1)\)</span></p><h2 id="选择排序-selection-sort">选择排序 (selection sort)</h2><h3 id="解法一-1">解法一</h3><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">selection_sort1</span>(<span class="params">array</span>):</span><br><span class="line">    <span class="comment"># 每次都排好最后一个元素, 所以关注的列表长度 (n) 依次少 1</span></span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(array)-<span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>):</span><br><span class="line">        <span class="comment"># 找到当前窗口的最大元素</span></span><br><span class="line">        max_ind = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n+<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> array[i] &gt; array[max_ind]:</span><br><span class="line">                max_ind = i</span><br><span class="line">        <span class="comment"># 把它和当前最后一个元素交换</span></span><br><span class="line">        array[n], array[max_ind] = array[max_ind], array[n]</span><br></pre></td></tr></tbody></table></figure><h3 id="解法二-1">解法二</h3><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">selection_sort2</span>(<span class="params">array</span>):</span><br><span class="line">    <span class="comment"># 每次都排好第一个元素, 从第 i 个开始看</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(array)):</span><br><span class="line">        <span class="comment"># 找到最小元素</span></span><br><span class="line">        min_ind = i</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i, <span class="built_in">len</span>(array)):</span><br><span class="line">            <span class="keyword">if</span> array[j] &lt; array[min_ind]:</span><br><span class="line">                min_ind = j</span><br><span class="line">        <span class="comment"># 和第一个元素交换</span></span><br><span class="line">        array[i], array[min_ind] = array[min_ind], array[i]</span><br></pre></td></tr></tbody></table></figure><p>时间: <span class="math inline">\(O(n^2)\)</span></p><p>空间: <span class="math inline">\(O(1)\)</span></p><h2 id="插入排序-insertion-sort">插入排序 (insertion sort)</h2><h3 id="方法一">方法一</h3><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">insert_num</span>(<span class="params">array, num</span>):</span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    insert num into array, while keeping array sorted</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    array.append(num)</span><br><span class="line">    idx = <span class="built_in">len</span>(array)-<span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> idx &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">if</span> array[idx-<span class="number">1</span>] &gt; array[idx]:</span><br><span class="line">            array[idx-<span class="number">1</span>], array[idx] = array[idx], array[idx-<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        idx -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">insertion_sort</span>(<span class="params">array</span>):</span><br><span class="line">    new = []</span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> array:</span><br><span class="line">        insert_num(new, num)</span><br><span class="line">    <span class="keyword">return</span> new</span><br></pre></td></tr></tbody></table></figure><p>时间: <span class="math inline">\(O(n^2)\)</span></p><p>空间: <span class="math inline">\(O(n)\)</span></p><h3 id="方法二">方法二</h3><figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">insertion_sort2</span>(<span class="params">array</span>):</span><br><span class="line">    <span class="comment"># i 之后的是没见过的数, i 之前的是插入排好的</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(array)):</span><br><span class="line">        k = i   <span class="comment"># 要插入的数</span></span><br><span class="line">        <span class="comment"># 插入下标 k 的数</span></span><br><span class="line">        <span class="keyword">while</span> k &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">if</span> array[k-<span class="number">1</span>] &gt; array[k]:</span><br><span class="line">                array[k-<span class="number">1</span>], array[k] = array[k], array[k-<span class="number">1</span>]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            k -= <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure><p>时间: <span class="math inline">\(O(n^2)\)</span></p><p>空间: <span class="math inline">\(O(1)\)</span></p><h2 id="归并排序-merge-sort">归并排序 (merge sort)</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">merge</span>(<span class="params">l1, l2</span>):</span><br><span class="line">    new = []</span><br><span class="line">    i = j = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(l1) <span class="keyword">and</span> j &lt; <span class="built_in">len</span>(l2):</span><br><span class="line">        <span class="keyword">if</span> l1[i] &lt; l2[j]:</span><br><span class="line">            new.append(l1[i])</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            new.append(l2[j])</span><br><span class="line">            j += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> i &lt; <span class="built_in">len</span>(l1):</span><br><span class="line">        new.extend(l1[i:])</span><br><span class="line">    <span class="keyword">if</span> j &lt; <span class="built_in">len</span>(l2):</span><br><span class="line">        new.extend(l2[j:])</span><br><span class="line">    <span class="keyword">return</span> new</span><br></pre></td></tr></tbody></table></figure><p>时间: <span class="math inline">\(O(n)\)</span></p><p>空间: <span class="math inline">\(O(n)\)</span></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">merge_sort</span>(<span class="params">array</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(array) <span class="keyword">in</span> (<span class="number">0</span>, <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">return</span> array</span><br><span class="line">    mid = (<span class="built_in">len</span>(array) + <span class="number">1</span>) // <span class="number">2</span></span><br><span class="line">    left = merge_sort(array[:mid])</span><br><span class="line">    right = merge_sort(array[mid:])</span><br><span class="line">    <span class="keyword">return</span> merge(left, right)</span><br></pre></td></tr></tbody></table></figure><p>时间: <span class="math inline">\(O(n\log n)\)</span></p><p>空间: <span class="math inline">\(O(\log n)+O(n)=O(n)\)</span></p><p>recursion 层数 + 最多同时用到的空间</p><h2 id="快速排序-quick-sort">快速排序 (quick sort)</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">partition</span>(<span class="params">array, start, end, pivot_ind</span>):</span><br><span class="line">    array[pivot_ind], array[end] = array[end], array[pivot_ind]</span><br><span class="line">    store = start  <span class="comment"># store 左边都比 pivot 小</span></span><br><span class="line">    pivot = array[end]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(start, end):</span><br><span class="line">        <span class="keyword">if</span> array[i] &lt; pivot:</span><br><span class="line">            array[i], array[store] = array[store], array[i]</span><br><span class="line">            store += <span class="number">1</span></span><br><span class="line">    array[store], array[end] = array[end], array[store]</span><br><span class="line">    <span class="keyword">return</span> store</span><br></pre></td></tr></tbody></table></figure><p>时间: <span class="math inline">\(O(n)\)</span></p><p>空间: <span class="math inline">\(O(1)\)</span> </p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randrange</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">helper</span>(<span class="params">array, start, end</span>):</span><br><span class="line">    <span class="keyword">if</span> start &gt;= end:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    pivot_ind = randrange(start, end + <span class="number">1</span>)</span><br><span class="line">    new_pivot_ind = partition(array, start, end, pivot_ind)</span><br><span class="line">    helper(array, start, new_pivot_ind - <span class="number">1</span>)</span><br><span class="line">    helper(array, new_pivot_ind + <span class="number">1</span>, end)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">quick_sort</span>(<span class="params">array</span>):</span><br><span class="line">    helper(array, <span class="number">0</span>, <span class="built_in">len</span>(array)-<span class="number">1</span>)</span><br></pre></td></tr></tbody></table></figure> 快速排序是不稳定的.<p></p><p>时间:</p><ul><li><span class="math inline">\(O(n\log n)\)</span> (理想情况, pivot 取中位数)</li><li><span class="math inline">\(O(n^2)\)</span> (最差情况, pivot 取最值)</li></ul><p>空间:</p><ul><li><span class="math inline">\(O(\log n)\)</span> (平均情况)</li><li><span class="math inline">\(O(n)\)</span> (小概率)</li></ul>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Time Series</title>
      <link href="/posts/23857/"/>
      <url>/posts/23857/</url>
      
        <content type="html"><![CDATA[<h2 id="type">type</h2><ul><li>exploratory analysis</li><li>autocorrelation analysis</li><li>spectral analysis</li></ul><span id="more"></span><h2 id="approach">approach</h2><ul><li>plot and see if there is ...<ul><li>a trend</li><li>a seasonal component 标准循环</li><li>any apparent sharp change</li><li>any outlying observation</li><li><span class="math display">\[\text{Observed}=\text{Trend}+\text{Cyclic}+\text{Irregular}\]</span></li></ul></li><li>remove trend and seasonal to get <strong>stationary</strong> residual</li><li>choose a model to fit the residual</li></ul><h2 id="definitions">Definitions</h2><p><span class="math display">\[\mu_X(t):= E[X_t]\]</span> <span class="math display">\[\gamma_X(r,s):= \mathrm{Cov}(X_r,X_s)\]</span> weakly stationary:</p><ul><li>均值恒定: <span class="math inline">\(\mu_X(t)\)</span> is independent of <span class="math inline">\(t\)</span>.</li><li>协方差可以平移: <span class="math inline">\(\gamma_X(t+h,t)\)</span> is independent of <span class="math inline">\(t\)</span> for each <span class="math inline">\(h\)</span>.</li></ul><p>ACVF (AutoCoVariance function): <span class="math display">\[\gamma_X(h)=\gamma_X(t+h,t)\]</span></p><p>ACF (AutoCorrelation Function): <span class="math display">\[\rho_X(h)=\gamma_X(h)/\gamma_X(0)\]</span></p><p>Differencing:</p><ul><li><span class="math inline">\(\nabla X_t=X_t-X_{t-1}\)</span></li><li><span class="math inline">\(\nabla^2 X_t=X_t-2X_{t-1}+X_{t-2}\)</span></li></ul><h2 id="how-to-check">How to check?</h2><p>ADF test.</p><h2 id="models">Models</h2><p>AR, MA, ARMA 都需要平稳; ARIMA 不需要.</p><h3 id="autoregressive-process-of-order-p-arp">Autoregressive process of order <span class="math inline">\(p\)</span>: AR(p)</h3><p><span class="math display">\[\phi(B)X_t=Z_t\]</span> 来源于前值.</p><p>ACF tail off, PACF cut off</p><h3 id="moving-average-process-of-order-q-maq">Moving-average process of order <span class="math inline">\(q\)</span>: MA(q)</h3><p><span class="math display">\[X_t=\theta(B)Z_t\]</span> 来源于误差.</p><p>ACF cut off, PACF tail off</p><h3 id="armap-q">ARMA(p, q)</h3><p><span class="math display">\[\phi(B)X_t=\theta(B)Z_t\]</span></p><h3 id="arimad-p-q">ARIMA(d, p, q)</h3><p><span class="math display">\[\phi(B)(1-B)^dX_t=\theta(B)Z_t\]</span></p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 统计 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Confusion Matrix</title>
      <link href="/posts/39658/"/>
      <url>/posts/39658/</url>
      
        <content type="html"><![CDATA[<p>对于二分类问题, 结果被分为真阳, 假阳, 真阴, 假阴四种情况.</p><table><thead><tr class="header"><th style="text-align: center;"></th><th style="text-align: center;">P</th><th style="text-align: center;">N</th></tr></thead><tbody><tr class="odd"><td style="text-align: center;">Y</td><td style="text-align: center;">TP</td><td style="text-align: center;">FP</td></tr><tr class="even"><td style="text-align: center;">N</td><td style="text-align: center;">FN</td><td style="text-align: center;">TN</td></tr></tbody></table><span id="more"></span><p><strong>accuracy</strong>: 有多少预测是正确的? <span class="math display">\[\text{accuracy}={TP+TN\over TP+FP+TN+FN}={T\over\text{all}}\]</span></p><p><strong>precision</strong>: 所有的预测阳性中多少是真的? <span class="math display">\[\text{precision}={TP\over TP+FP}={TP\over Y}\]</span></p><p><strong>recall</strong>: 所有的阳性中有多少被预测出来? <span class="math display">\[\text{recall}={TP\over TP+FN}={TP\over P}\]</span></p><p><strong>F1 score</strong>: recall 和 precision 的调和平均. <span class="math display">\[\text{F}_1={2\over{1\over\text{recall}}+{1\over\text{precision}}}\]</span></p><p><strong>FPR (False Positive Rate)</strong>: 假阳率, 假阳占阴性的比率. <span class="math display">\[\text{FPR}={FP\over N}\]</span></p><p><strong>TPR (True Positive Rate)</strong>: 真阳率, 真阳占阳性的比率. <span class="math display">\[\text{TPR}={TP\over P}=\text{recall}\]</span></p><p><strong>ROC (Receiver Operating Characteristic) 曲线</strong>: TPR-FPR 图, 两者都随 threshold 变化.</p><p><img src="/posts/39658/ROC_curve.png" width="50%"></p><p><strong>AUC (Area Under Curve)</strong>: ROC 曲线下的面积, 取值范围 <span class="math inline">\([0,1]\)</span>.</p>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>模型误差与过拟合</title>
      <link href="/posts/12469/"/>
      <url>/posts/12469/</url>
      
        <content type="html"><![CDATA[<p>误差分解 <span class="math display">\[E(\text{error})=\text{bias}^2+\text{Var}+\varepsilon.\]</span></p><span id="more"></span><hr><p>先定义:</p><p>均方误差 <span class="math display">\[\text{MSE}(\hat\theta)=E[(\hat\theta-\theta)^2]\]</span> 偏差 <span class="math display">\[\text{bias}(\hat\theta,\theta)=E[\hat\theta]-\theta\]</span></p><p>那么 <span class="math display">\[\begin{align*}\text{MSE}(\hat\theta)&amp;=E\left[\left(\hat\theta-\theta\right)^2\right]\\&amp;=E\left[\left(\hat\theta-E[\hat\theta]+E[\hat\theta]-\theta\right)^2\right]\\&amp;=E\left[\left(\hat\theta-E[\hat\theta]\right)^2+2\left(\hat\theta-E[\hat\theta]\right)\left(E[\hat\theta]-\theta\right)+\left(E[\hat\theta]-\theta\right)^2\right]\\&amp;=E\left[\left(\hat\theta-E[\hat\theta]\right)^2\right]+2E\left[\left(\hat\theta-E[\hat\theta]\right)\left(E[\hat\theta]-\theta\right)\right]+E\left[\left(E[\hat\theta]-\theta\right)^2\right]\\&amp;=\text{Var}(\hat\theta)+2\left(E[\hat\theta]-\theta\right)E\left[\left(\hat\theta-E[\hat\theta]\right)\right]+\left(E[\hat\theta]-\theta\right)^2\\&amp;=\text{Var}+\text{bias}^2\end{align*}\]</span></p><p>随着模型复杂度的增加, bias 减少, variance 增加. 也就是说, 能力变强, 不稳定性变大. 那么总误差呈现一个先减后增的趋势: <img src="/posts/12469/error.png"> 这就是 bias-variance dilemma.</p>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>判断回文链表</title>
      <link href="/posts/14907/"/>
      <url>/posts/14907/</url>
      
        <content type="html"><![CDATA[<p>判断一个链表是否回文, 思路是反转后半段, 和前半段比较.</p><span id="more"></span><p>首先需要找到<a href="/posts/19136/index.html">链表中点</a>, 其中方法一需要分奇偶长度讨论, 而用方法二可以统一返回慢指针的下一个节点. 从该节点<a href="/posts/967/index.html">反转链表</a>后与前半段比较即可.</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">find_mid</span>(<span class="params">head</span>):</span><br><span class="line">    <span class="keyword">if</span> head <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">or</span> head.<span class="built_in">next</span> <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> head</span><br><span class="line">    <span class="comment"># 快慢指针</span></span><br><span class="line">    fast, slow = head, head</span><br><span class="line">    <span class="keyword">while</span> fast <span class="keyword">and</span> fast.<span class="built_in">next</span> <span class="keyword">and</span> fast.<span class="built_in">next</span>.<span class="built_in">next</span>:</span><br><span class="line">        fast = fast.<span class="built_in">next</span>.<span class="built_in">next</span></span><br><span class="line">        slow = slow.<span class="built_in">next</span></span><br><span class="line">    <span class="keyword">return</span> slow</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">is_palindrome</span>(<span class="params">head</span>):</span><br><span class="line">    <span class="keyword">if</span> head <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="comment"># 分成前后两段</span></span><br><span class="line">    head1 = head</span><br><span class="line">    head2 = reverse(find_mid(head).<span class="built_in">next</span>)</span><br><span class="line">    <span class="comment"># 比较两段</span></span><br><span class="line">    <span class="keyword">while</span> head1 <span class="keyword">and</span> head2:</span><br><span class="line">        <span class="keyword">if</span> head1.val != head2.val:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        head1 = head1.<span class="built_in">next</span></span><br><span class="line">        head2 = head2.<span class="built_in">next</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>链表中点</title>
      <link href="/posts/19136/"/>
      <url>/posts/19136/</url>
      
        <content type="html"><![CDATA[<p>用快慢指针的方法找链表的中点.</p><span id="more"></span><h2 id="方法一">方法一</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> fast <span class="keyword">and</span> fast.<span class="built_in">next</span>:</span><br><span class="line">    fast = fast.<span class="built_in">next</span>.<span class="built_in">next</span></span><br><span class="line">    slow = slow.<span class="built_in">next</span></span><br></pre></td></tr></tbody></table></figure><p>结果: </p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a -&gt; b -&gt; c -&gt; d -&gt; e</span><br><span class="line">          S         F</span><br></pre></td></tr></tbody></table></figure> <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a -&gt; b -&gt; c -&gt; d -&gt; e -&gt; f</span><br><span class="line">               S            F</span><br></pre></td></tr></tbody></table></figure><p></p><h2 id="方法二">方法二</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> fast <span class="keyword">and</span> fast.<span class="built_in">next</span> <span class="keyword">and</span> fast.<span class="built_in">next</span>.<span class="built_in">next</span>:</span><br><span class="line">    fast = fast.<span class="built_in">next</span>.<span class="built_in">next</span></span><br><span class="line">    slow = slow.<span class="built_in">next</span></span><br></pre></td></tr></tbody></table></figure><p>结果: </p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a -&gt; b -&gt; c -&gt; d -&gt; e</span><br><span class="line">          S         F</span><br></pre></td></tr></tbody></table></figure> <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a -&gt; b -&gt; c -&gt; d -&gt; e -&gt; f</span><br><span class="line">          S         F</span><br></pre></td></tr></tbody></table></figure> 两种结果的区别就在于链表长度为偶数时, 慢指针的停留位置.<p></p>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>链表相加</title>
      <link href="/posts/30822/"/>
      <url>/posts/30822/</url>
      
        <content type="html"><![CDATA[<p>比如一个链表是 <code>1 -&gt; 2 -&gt; 3</code>, 一个是 <code>2 -&gt; 7</code>, 结果应该返回 <code>1 -&gt; 5 -&gt; 0</code>.</p><p>因为 <span class="math inline">\(123+27=150\)</span>.</p><span id="more"></span><p>有一个加法右对齐的问题, 因为给出两个 head 之后链表是左对齐的. 为了方便起见, 先进行<a href="/posts/967/index.html">反转链表</a>的操作.</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add_list</span>(<span class="params">head1, head2</span>):</span><br><span class="line">    <span class="comment"># 反转两个链表</span></span><br><span class="line">    head1 = reverse(head1)</span><br><span class="line">    head2 = reverse(head2)</span><br><span class="line">    <span class="comment"># dummy head</span></span><br><span class="line">    fake = ListNode(<span class="literal">None</span>)</span><br><span class="line">    cur = fake</span><br><span class="line"></span><br><span class="line">    carry = <span class="number">0</span> <span class="comment"># 存储进位</span></span><br><span class="line">    <span class="comment"># 只要两个链表有一个没到结尾, 就可以继续</span></span><br><span class="line">    <span class="keyword">while</span> head1 <span class="keyword">or</span> head2: </span><br><span class="line">        tmp = carry <span class="comment"># 存储该位置的和, 完整的和是 head1.val + head2.val + carry</span></span><br><span class="line">        <span class="comment"># 分情况讨论, 哪个节点有值就加上哪个节点</span></span><br><span class="line">        <span class="comment"># 如果两个节点都有值就都加, 没有 else 的关系</span></span><br><span class="line">        <span class="keyword">if</span> head1:</span><br><span class="line">            tmp += head1.val</span><br><span class="line">            head1 = head1.<span class="built_in">next</span></span><br><span class="line">        <span class="keyword">if</span> head2:</span><br><span class="line">            tmp += head2.val</span><br><span class="line">            head2 = head2.<span class="built_in">next</span></span><br><span class="line">        <span class="comment"># 下一位应该是临时和的个位</span></span><br><span class="line">        cur.<span class="built_in">next</span> = ListNode(tmp % <span class="number">10</span>)</span><br><span class="line">        <span class="comment"># 进位是临时和的十位</span></span><br><span class="line">        carry = tmp // <span class="number">10</span></span><br><span class="line">        cur = cur.<span class="built_in">next</span></span><br><span class="line">    <span class="comment"># 如果遍历完成之后还有进位, 还要多一位</span></span><br><span class="line">    <span class="keyword">if</span> carry &gt; <span class="number">0</span>:</span><br><span class="line">        cur.<span class="built_in">next</span> = ListNode(carry)</span><br><span class="line">    <span class="keyword">return</span> reverse(fake.<span class="built_in">next</span>)</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>反转链表</title>
      <link href="/posts/967/"/>
      <url>/posts/967/</url>
      
        <content type="html"><![CDATA[<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ListNode</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, val</span>):</span><br><span class="line">        self.val = val</span><br><span class="line">        self.<span class="built_in">next</span> = <span class="literal">None</span></span><br></pre></td></tr></tbody></table></figure><p>我们传入一个 ListNode 作为 head 节点, 然后需要一个函数 reverse 来反转这个链表, 返回新的 head 节点 (实际上是原来的 tail).</p><span id="more"></span><h2 id="iteration">iteration</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">reverse</span>(<span class="params">head</span>):</span><br><span class="line">    prev = <span class="literal">None</span> <span class="comment"># 保存 head 的上一个节点</span></span><br><span class="line">    <span class="keyword">while</span> head:</span><br><span class="line">        <span class="built_in">next</span> = head.<span class="built_in">next</span>  <span class="comment"># 先保存下一个, 否则反转后找不到</span></span><br><span class="line">        head.<span class="built_in">next</span> = prev  <span class="comment"># 反转</span></span><br><span class="line">        <span class="comment"># prev 和 head 往后走</span></span><br><span class="line">        prev = head</span><br><span class="line">        head = <span class="built_in">next</span></span><br><span class="line">    <span class="keyword">return</span> prev <span class="comment"># 此时 head 走到了 None</span></span><br></pre></td></tr></tbody></table></figure><p>时间: <span class="math inline">\(O(n)\)</span></p><p>空间: <span class="math inline">\(O(1)\)</span></p><h2 id="recursion">recursion</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">reverse</span>(<span class="params">head</span>):</span><br><span class="line">    <span class="comment"># base case: 空链表或只有一个节点, 不用反转</span></span><br><span class="line">    <span class="keyword">if</span> head <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">or</span> head.<span class="built_in">next</span> <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> head</span><br><span class="line">    <span class="comment"># 从第二个节点开始反转, 返回新的 head 节点</span></span><br><span class="line">    new_head = reverse(head.<span class="built_in">next</span>)</span><br><span class="line">    <span class="comment"># 把 head 和新的 head 节点之间的连接反过来</span></span><br><span class="line">    head.<span class="built_in">next</span>.<span class="built_in">next</span> = head</span><br><span class="line">    head.<span class="built_in">next</span> = <span class="literal">None</span>  <span class="comment"># 否则出现环</span></span><br><span class="line">    <span class="keyword">return</span> new_head</span><br></pre></td></tr></tbody></table></figure><p>给出原始问题... <img src="/posts/967/rev1.png"> 先完成子问题... <img src="/posts/967/rev2.png"> 再处理最后的连接... <img src="/posts/967/rev3.png"> 时间: <span class="math inline">\(O(n)\)</span></p><p>空间: <span class="math inline">\(O(n)\)</span></p>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>虚拟语气</title>
      <link href="/posts/22564/"/>
      <url>/posts/22564/</url>
      
        <content type="html"><![CDATA[<h2 id="不可能假设">不可能假设</h2><p>现在:</p><ul><li>If I saw the rabbit now, I would bite him.</li></ul><p>将来:</p><ul><li>If I should (were to) see the rabbit tomorrow, I would bite him.</li></ul><p>过去:</p><ul><li>If I had seen the rabbit yesterday, I would have bitten him.</li></ul><span id="more"></span><h2 id="愿望">愿望</h2><p>现在:</p><ul><li><p>I wish (that) I were a rabbit.</p></li><li><p>I would rather you didn't eat the carrot.</p></li><li><p>I suggest/insist/order/demand that you (should) give me a carrot.</p></li><li><p>It is (high) time that you ate a carrot.</p></li></ul><p>过去:</p><ul><li><p>I wish I had eaten the carrot.</p></li><li><p>I would rather you hadn't eaten the carrot.</p></li><li><p>I suggested/insisted/ordered/demanded that you (should) give me a carrot.</p></li></ul><p>将来:</p><ul><li>I wish I could eat the carrot.</li></ul>]]></content>
      
      
      <categories>
          
          <category> 语言 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>决策树的信息增益</title>
      <link href="/posts/56956/"/>
      <url>/posts/56956/</url>
      
        <content type="html"><![CDATA[<p>基于熵减, 或者说信息增益, 来决定决策树的 feature 选择. ID3 算法优先 split 可以带来最大熵减的那个 feature, 也就是一种贪心算法.</p><span id="more"></span><p>如果一件事情的发生概率为 <span class="math inline">\(p\)</span>, 它带来的 entropy 被定义为 <span class="math inline">\(-\log_2 p\)</span>: 它的概率越小, 给系统带来的扰动就越大, 熵趋于无穷; 它的概率为 1 时, 没有任何不确定性, 熵为 0. 可以按不同的事件划分做加权平均. 在下面的例子中, A, B, C 为 feature, U 为 label.</p><table><thead><tr class="header"><th>Real Avatar(A)</th><th>Friends(B)</th><th>Blog(C)</th><th>Real User Account (U)</th></tr></thead><tbody><tr class="odd"><td>N</td><td>S</td><td>S</td><td>N</td></tr><tr class="even"><td>Y</td><td>L</td><td>S</td><td>Y</td></tr><tr class="odd"><td>Y</td><td>M</td><td>L</td><td>Y</td></tr><tr class="even"><td>Y</td><td>M</td><td>M</td><td>Y</td></tr><tr class="odd"><td>Y</td><td>M</td><td>L</td><td>Y</td></tr><tr class="even"><td>N</td><td>L</td><td>M</td><td>Y</td></tr><tr class="odd"><td>N</td><td>S</td><td>M</td><td>N</td></tr><tr class="even"><td>N</td><td>M</td><td>L</td><td>Y</td></tr><tr class="odd"><td>N</td><td>S</td><td>M</td><td>Y</td></tr><tr class="even"><td>Y</td><td>S</td><td>S</td><td>N</td></tr></tbody></table><p>一共有 10 条数据, Y 占 7 条, N 占 3 条. 那么本身的熵为 <span class="math display">\[H=-0.7\times\log_20.7-0.3\times\log_20.3=0.8813\]</span></p><p><strong>以计算 A 为例...</strong></p><p>A 把数据分成了两类. 对 Y 类:</p><table><thead><tr class="header"><th>Real Avatar(A)</th><th>Real User Account (U)</th></tr></thead><tbody><tr class="odd"><td>Y</td><td>Y</td></tr><tr class="even"><td>Y</td><td>Y</td></tr><tr class="odd"><td>Y</td><td>Y</td></tr><tr class="even"><td>Y</td><td>Y</td></tr><tr class="odd"><td>Y</td><td>N</td></tr></tbody></table><p>熵为 <span class="math display">\[-0.8\times\log_20.8-0.2\times\log_20.2=0.7219\]</span> 对 N 类:</p><table><thead><tr class="header"><th>Real Avatar(A)</th><th>Real User Account (U)</th></tr></thead><tbody><tr class="odd"><td>N</td><td>N</td></tr><tr class="even"><td>N</td><td>Y</td></tr><tr class="odd"><td>N</td><td>N</td></tr><tr class="even"><td>N</td><td>Y</td></tr><tr class="odd"><td>N</td><td>Y</td></tr></tbody></table><p>熵为 <span class="math display">\[-0.6\times\log_20.6-0.4\times\log_20.4=0.9710\]</span></p><p>对整体进行加权平均, 就是按 A 分类带来的熵: <span class="math display">\[H_A=0.5\times0.7219+0.5\times0.9710=0.8465\]</span></p><p>按 A 分类带来的熵减就是 <span class="math inline">\(0.8813-0.8465=0.0348\)</span>.</p>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>OR-Tools 之 scheduling</title>
      <link href="/posts/52763/"/>
      <url>/posts/52763/</url>
      
        <content type="html"><![CDATA[<h2 id="倒班问题">倒班问题</h2><h3 id="基础版">基础版</h3><p>在一个 3 天的时间窗里, 每天有三班倒. 一共 4 名员工来安排倒班.</p><p>每班只给一个人, 每天一个人最多做一班 (这个人也可以放假). <span id="more"></span></p><hr><p>准备工作... </p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> ortools.sat.python <span class="keyword">import</span> cp_model</span><br><span class="line"></span><br><span class="line">num_nurses = <span class="number">4</span></span><br><span class="line">num_shifts = <span class="number">3</span></span><br><span class="line">num_days = <span class="number">3</span></span><br><span class="line"></span><br><span class="line">all_nurses = <span class="built_in">range</span>(num_nurses)</span><br><span class="line">all_shifts = <span class="built_in">range</span>(num_shifts)</span><br><span class="line">all_days = <span class="built_in">range</span>(num_days)</span><br><span class="line"></span><br><span class="line"><span class="comment"># creat the model</span></span><br><span class="line">model = cp_model.CpModel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># create the variables</span></span><br><span class="line">shifts = {}</span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> all_nurses:</span><br><span class="line">    <span class="keyword">for</span> d <span class="keyword">in</span> all_days:</span><br><span class="line">        <span class="keyword">for</span> s <span class="keyword">in</span> all_shifts:</span><br><span class="line">            shifts[(n, d, s)] = model.NewBoolVar(<span class="string">'shift_n%id%is%i'</span> % (n, d, s))</span><br></pre></td></tr></tbody></table></figure> 约束: <figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># each shift is assigned to a single nurse per day</span></span><br><span class="line"><span class="keyword">for</span> d <span class="keyword">in</span> all_days:</span><br><span class="line">    <span class="keyword">for</span> s <span class="keyword">in</span> all_shifts:</span><br><span class="line">        model.AddExactlyOne(shifts[(n, d, s)] <span class="keyword">for</span> n <span class="keyword">in</span> all_nurses)</span><br><span class="line"></span><br><span class="line"><span class="comment"># each nurse works at most one shift per day</span></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> all_nurses:</span><br><span class="line">    <span class="keyword">for</span> d <span class="keyword">in</span> all_days:</span><br><span class="line">        model.AddAtMostOne(shifts[(n, d, s)] <span class="keyword">for</span> s <span class="keyword">in</span> all_shifts)</span><br><span class="line"></span><br><span class="line"><span class="comment"># distribute as evenly as possible</span></span><br><span class="line">min_shifts_per_nurse = (num_shifts * num_days) // num_nurses</span><br><span class="line"><span class="keyword">if</span> num_shifts * num_days % num_nurses == <span class="number">0</span>:</span><br><span class="line">    max_shifts_per_nurse = min_shifts_per_nurse</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    max_shifts_per_nurse = min_shifts_per_nurse + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> all_nurses:</span><br><span class="line">    num_shifts_worked = []</span><br><span class="line">    <span class="keyword">for</span> d <span class="keyword">in</span> all_days:</span><br><span class="line">        <span class="keyword">for</span> s <span class="keyword">in</span> all_shifts:</span><br><span class="line">            num_shifts_worked.append(shifts[(n, d, s)])</span><br><span class="line">    model.Add(min_shifts_per_nurse &lt;= <span class="built_in">sum</span>(num_shifts_worked))</span><br><span class="line">    model.Add(<span class="built_in">sum</span>(num_shifts_worked) &lt;= max_shifts_per_nurse)</span><br></pre></td></tr></tbody></table></figure> 模型参数设定... <figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># update solver para</span></span><br><span class="line">solver = cp_model.CpSolver()</span><br><span class="line">solver.parameters.linearization_level = <span class="number">0</span></span><br><span class="line"><span class="comment"># enumerate all solutions</span></span><br><span class="line">solver.parameters.enumerate_all_solutions = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NursesPartialSolutionPrinter</span>(cp_model.CpSolverSolutionCallback):</span><br><span class="line">    <span class="string">"""Print intermediate solutions."""</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, shifts, num_nurses, num_days, num_shifts, limit</span>):</span><br><span class="line">        cp_model.CpSolverSolutionCallback.__init__(self)</span><br><span class="line">        self._shifts = shifts</span><br><span class="line">        self._num_nurses = num_nurses</span><br><span class="line">        self._num_days = num_days</span><br><span class="line">        self._num_shifts = num_shifts</span><br><span class="line">        self._solution_count = <span class="number">0</span></span><br><span class="line">        self._solution_limit = limit</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">on_solution_callback</span>(<span class="params">self</span>):</span><br><span class="line">        self._solution_count += <span class="number">1</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">'Solution %i'</span> % self._solution_count)</span><br><span class="line">        <span class="keyword">for</span> d <span class="keyword">in</span> <span class="built_in">range</span>(self._num_days):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">'Day %i'</span> % d)</span><br><span class="line">            <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(self._num_nurses):</span><br><span class="line">                is_working = <span class="literal">False</span></span><br><span class="line">                <span class="keyword">for</span> s <span class="keyword">in</span> <span class="built_in">range</span>(self._num_shifts):</span><br><span class="line">                    <span class="keyword">if</span> self.Value(self._shifts[(n, d, s)]):</span><br><span class="line">                        is_working = <span class="literal">True</span></span><br><span class="line">                        <span class="built_in">print</span>(<span class="string">'\tNurse %i works shift %i'</span> % (n, s))</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> is_working:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">'\tNurse {} does not work'</span>.<span class="built_in">format</span>(n))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">'='</span>*<span class="number">50</span>)</span><br><span class="line">        <span class="keyword">if</span> self._solution_count &gt;= self._solution_limit:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">'Stop search after %i solutions'</span> % self._solution_limit)</span><br><span class="line">            self.StopSearch()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">solution_count</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self._solution_count</span><br></pre></td></tr></tbody></table></figure> 求解与输出... <figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Display the first five solutions.</span></span><br><span class="line">solution_limit = <span class="number">5</span></span><br><span class="line">solution_printer = NursesPartialSolutionPrinter(shifts, num_nurses,</span><br><span class="line">                                                num_days, num_shifts,</span><br><span class="line">                                                solution_limit)</span><br><span class="line"></span><br><span class="line"><span class="comment"># solve</span></span><br><span class="line">solver.Solve(model, solution_printer)</span><br></pre></td></tr></tbody></table></figure> 输出 <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">Solution 1</span><br><span class="line">Day 0</span><br><span class="line">        Nurse 0 does not work</span><br><span class="line">        Nurse 1 works shift 0</span><br><span class="line">        Nurse 2 works shift 1</span><br><span class="line">        Nurse 3 works shift 2</span><br><span class="line">Day 1</span><br><span class="line">        Nurse 0 works shift 2</span><br><span class="line">        Nurse 1 does not work</span><br><span class="line">        Nurse 2 works shift 1</span><br><span class="line">        Nurse 3 works shift 0</span><br><span class="line">Day 2</span><br><span class="line">        Nurse 0 works shift 2</span><br><span class="line">        Nurse 1 works shift 1</span><br><span class="line">        Nurse 2 works shift 0</span><br><span class="line">        Nurse 3 does not work</span><br><span class="line">==================================================</span><br><span class="line">Solution 2</span><br><span class="line">Day 0</span><br><span class="line">        Nurse 0 works shift 0</span><br><span class="line">        Nurse 1 does not work</span><br><span class="line">        Nurse 2 works shift 1</span><br><span class="line">        Nurse 3 works shift 2</span><br><span class="line">Day 1</span><br><span class="line">        Nurse 0 does not work</span><br><span class="line">        Nurse 1 works shift 2</span><br><span class="line">        Nurse 2 works shift 1</span><br><span class="line">        Nurse 3 works shift 0</span><br><span class="line">Day 2</span><br><span class="line">        Nurse 0 works shift 2</span><br><span class="line">        Nurse 1 works shift 1</span><br><span class="line">        Nurse 2 works shift 0</span><br><span class="line">        Nurse 3 does not work</span><br><span class="line">==================================================</span><br><span class="line">Solution 3</span><br><span class="line">Day 0</span><br><span class="line">        Nurse 0 works shift 0</span><br><span class="line">        Nurse 1 does not work</span><br><span class="line">        Nurse 2 works shift 1</span><br><span class="line">        Nurse 3 works shift 2</span><br><span class="line">Day 1</span><br><span class="line">        Nurse 0 works shift 1</span><br><span class="line">        Nurse 1 works shift 2</span><br><span class="line">        Nurse 2 does not work</span><br><span class="line">        Nurse 3 works shift 0</span><br><span class="line">Day 2</span><br><span class="line">        Nurse 0 works shift 2</span><br><span class="line">        Nurse 1 works shift 1</span><br><span class="line">        Nurse 2 works shift 0</span><br><span class="line">        Nurse 3 does not work</span><br><span class="line">==================================================</span><br><span class="line">Solution 4</span><br><span class="line">Day 0</span><br><span class="line">        Nurse 0 works shift 0</span><br><span class="line">        Nurse 1 does not work</span><br><span class="line">        Nurse 2 works shift 1</span><br><span class="line">        Nurse 3 works shift 2</span><br><span class="line">Day 1</span><br><span class="line">        Nurse 0 works shift 2</span><br><span class="line">        Nurse 1 works shift 1</span><br><span class="line">        Nurse 2 does not work</span><br><span class="line">        Nurse 3 works shift 0</span><br><span class="line">Day 2</span><br><span class="line">        Nurse 0 works shift 2</span><br><span class="line">        Nurse 1 works shift 1</span><br><span class="line">        Nurse 2 works shift 0</span><br><span class="line">        Nurse 3 does not work</span><br><span class="line">==================================================</span><br><span class="line">Solution 5</span><br><span class="line">Day 0</span><br><span class="line">        Nurse 0 does not work</span><br><span class="line">        Nurse 1 works shift 0</span><br><span class="line">        Nurse 2 works shift 1</span><br><span class="line">        Nurse 3 works shift 2</span><br><span class="line">Day 1</span><br><span class="line">        Nurse 0 works shift 2</span><br><span class="line">        Nurse 1 works shift 1</span><br><span class="line">        Nurse 2 does not work</span><br><span class="line">        Nurse 3 works shift 0</span><br><span class="line">Day 2</span><br><span class="line">        Nurse 0 works shift 2</span><br><span class="line">        Nurse 1 works shift 1</span><br><span class="line">        Nurse 2 works shift 0</span><br><span class="line">        Nurse 3 does not work</span><br><span class="line">==================================================</span><br><span class="line">Stop search after 5 solutions</span><br></pre></td></tr></tbody></table></figure><p></p><h3 id="进阶版">进阶版</h3><p>上面的问题有很多组解, 这一节中引入一个 <code>request</code>, 也就是每一个护士的志愿.</p><p>在下面的例子中, <code>shift_requests</code> 记录了 5 个护士的 7 天志愿, 比如 <code>[0, 0, 1]</code> 就表示希望这一天轮到第 3 班.</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">num_nurses = <span class="number">5</span></span><br><span class="line">num_shifts = <span class="number">3</span></span><br><span class="line">num_days = <span class="number">7</span></span><br><span class="line">all_nurses = <span class="built_in">range</span>(num_nurses)</span><br><span class="line">all_shifts = <span class="built_in">range</span>(num_shifts)</span><br><span class="line">all_days = <span class="built_in">range</span>(num_days)</span><br><span class="line">shift_requests = [[[<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">                   [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>]],</span><br><span class="line">                  [[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>], [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">                   [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>]],</span><br><span class="line">                  [[<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">                   [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]],</span><br><span class="line">                  [[<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">                   [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]],</span><br><span class="line">                  [[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">                   [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]]]</span><br></pre></td></tr></tbody></table></figure><p>建模和约束是一样的... </p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create model and variables</span></span><br><span class="line">model = cp_model.CpModel()</span><br><span class="line"></span><br><span class="line">shifts = {}</span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> all_nurses:</span><br><span class="line">    <span class="keyword">for</span> d <span class="keyword">in</span> all_days:</span><br><span class="line">        <span class="keyword">for</span> s <span class="keyword">in</span> all_shifts:</span><br><span class="line">            shifts[(n, d, s)] = model.NewBoolVar(<span class="string">'shift_n%id%is%i'</span> % (n, d, s))</span><br><span class="line"></span><br><span class="line"><span class="comment"># constraints</span></span><br><span class="line"><span class="keyword">for</span> d <span class="keyword">in</span> all_days:</span><br><span class="line">    <span class="keyword">for</span> s <span class="keyword">in</span> all_shifts:</span><br><span class="line">        model.AddExactlyOne(shifts[(n, d, s)] <span class="keyword">for</span> n <span class="keyword">in</span> all_nurses)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> all_nurses:</span><br><span class="line">    <span class="keyword">for</span> d <span class="keyword">in</span> all_days:</span><br><span class="line">        model.AddAtMostOne(shifts[(n, d, s)] <span class="keyword">for</span> s <span class="keyword">in</span> all_shifts)</span><br><span class="line"></span><br><span class="line"><span class="comment"># distribute the shifts evenly</span></span><br><span class="line">min_shifts_per_nurse = (num_shifts * num_days) // num_nurses</span><br><span class="line"><span class="keyword">if</span> num_shifts * num_days % num_nurses == <span class="number">0</span>:</span><br><span class="line">    max_shifts_per_nurse = min_shifts_per_nurse</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    max_shifts_per_nurse = min_shifts_per_nurse + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> all_nurses:</span><br><span class="line">    num_shifts_worked = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> d <span class="keyword">in</span> all_days:</span><br><span class="line">        <span class="keyword">for</span> s <span class="keyword">in</span> all_shifts:</span><br><span class="line">            num_shifts_worked += shifts[(n, d, s)]</span><br><span class="line">    model.Add(min_shifts_per_nurse &lt;= num_shifts_worked)</span><br><span class="line">    model.Add(num_shifts_worked &lt;= max_shifts_per_nurse)</span><br></pre></td></tr></tbody></table></figure> 不过现在有一个目标函数, 希望被满足的志愿最大化: <figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># objective</span></span><br><span class="line">model.Maximize(</span><br><span class="line">    <span class="built_in">sum</span>(</span><br><span class="line">        shift_requests[n][d][s] * shifts[(n, d, s)] </span><br><span class="line">        <span class="keyword">for</span> n <span class="keyword">in</span> all_nurses </span><br><span class="line">        <span class="keyword">for</span> d <span class="keyword">in</span> all_days </span><br><span class="line">        <span class="keyword">for</span> s <span class="keyword">in</span> all_shifts</span><br><span class="line">    )</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure> 求解与输出... <figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">solver = cp_model.CpSolver()</span><br><span class="line">status = solver.Solve(model)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> status == cp_model.OPTIMAL:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'Solution:'</span>)</span><br><span class="line">    <span class="keyword">for</span> d <span class="keyword">in</span> all_days:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">'Day'</span>, d)</span><br><span class="line">        <span class="keyword">for</span> n <span class="keyword">in</span> all_nurses:</span><br><span class="line">            <span class="keyword">for</span> s <span class="keyword">in</span> all_shifts:</span><br><span class="line">                <span class="keyword">if</span> solver.Value(shifts[(n, d, s)]) == <span class="number">1</span>:</span><br><span class="line">                    <span class="keyword">if</span> shift_requests[n][d][s] == <span class="number">1</span>:</span><br><span class="line">                        <span class="built_in">print</span>(<span class="string">'Nurse'</span>, n, <span class="string">'works shift'</span>, s, <span class="string">'(requested).'</span>)</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        <span class="built_in">print</span>(<span class="string">'Nurse'</span>, n, <span class="string">'works shift'</span>, s, <span class="string">'(not requested).'</span>)</span><br><span class="line">        <span class="built_in">print</span>()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f'Number of shift requests met = <span class="subst">{solver.ObjectiveValue()}</span>'</span>, <span class="string">f'(out of <span class="subst">{num_nurses*min_shifts_per_nurse}</span>)'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'No optimal solution found.'</span>)</span><br></pre></td></tr></tbody></table></figure> 输出 <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">Solution:</span><br><span class="line">Day 0</span><br><span class="line">Nurse 1 works shift 0 (not requested).</span><br><span class="line">Nurse 2 works shift 1 (requested).</span><br><span class="line">Nurse 3 works shift 2 (requested).</span><br><span class="line"></span><br><span class="line">Day 1</span><br><span class="line">Nurse 1 works shift 0 (not requested).</span><br><span class="line">Nurse 2 works shift 1 (requested).</span><br><span class="line">Nurse 4 works shift 2 (requested).</span><br><span class="line"></span><br><span class="line">Day 2</span><br><span class="line">Nurse 0 works shift 2 (not requested).</span><br><span class="line">Nurse 3 works shift 0 (requested).</span><br><span class="line">Nurse 4 works shift 1 (requested).</span><br><span class="line"></span><br><span class="line">Day 3</span><br><span class="line">Nurse 0 works shift 2 (not requested).</span><br><span class="line">Nurse 2 works shift 0 (requested).</span><br><span class="line">Nurse 3 works shift 1 (requested).</span><br><span class="line"></span><br><span class="line">Day 4</span><br><span class="line">Nurse 0 works shift 2 (requested).</span><br><span class="line">Nurse 1 works shift 1 (not requested).</span><br><span class="line">Nurse 4 works shift 0 (requested).</span><br><span class="line"></span><br><span class="line">Day 5</span><br><span class="line">Nurse 0 works shift 2 (not requested).</span><br><span class="line">Nurse 3 works shift 0 (requested).</span><br><span class="line">Nurse 4 works shift 1 (requested).</span><br><span class="line"></span><br><span class="line">Day 6</span><br><span class="line">Nurse 0 works shift 2 (requested).</span><br><span class="line">Nurse 1 works shift 1 (not requested).</span><br><span class="line">Nurse 2 works shift 0 (not requested).</span><br><span class="line"></span><br><span class="line">Number of shift requests met = 13.0 (out of 20)</span><br></pre></td></tr></tbody></table></figure><p></p><h2 id="工程分配问题">工程分配问题</h2><h3 id="背景">背景</h3><p>一个 job 由几个 task 组成, 它们之间有先后次序的要求. 每个 task 有对应的机器, 其中一个机器只能一次完成一个 task.</p><p>每个 task 有自己的完成时间, 而这个 task 一旦在机器上开始就必须做完.</p><p>比如下面这个例子: </p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">job0 = [(<span class="number">0</span>, <span class="number">3</span>), (<span class="number">1</span>, <span class="number">2</span>), (<span class="number">2</span>, <span class="number">2</span>)]</span><br><span class="line">job1 = [(<span class="number">0</span>, <span class="number">2</span>), (<span class="number">2</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">4</span>)]</span><br><span class="line">job2 = [(<span class="number">1</span>, <span class="number">4</span>), (<span class="number">2</span>, <span class="number">3</span>)]</span><br></pre></td></tr></tbody></table></figure> 意思是 <code>job0</code> 由三个 task 组成, 第一个在机器 0 上完成, 需要 3 个时间单位; 第二个在机器 1 上完成, 需要 2 个时间单位; 第三个在机器 2 上完成, 需要 2 个时间单位. 同理对 <code>job1</code> 和 <code>job2</code>.<p></p><p>一个可能的方案如图: <img src="/posts/52763/schedule1.png"></p><p>这个并不是最优解, 我们希望最小化总时间.</p><h3 id="建模">建模</h3><p>我们记 <span class="math inline">\(t_{i,j}\)</span> 为 task (i, j) 的开始时间, 其中 task (i, j) 指的是 job i 的第 j 个 task. 比如上面的例子中, task (0, 2) 对应的是 <code>(1, 2)</code>, task (0, 3) 对应的是 <code>(2, 2)</code>.</p><p><strong>优先级约束</strong></p><p>必须先完成 task (0, 2), 再开始 task (0, 3). 而 task (0, 2) 需要 2 个时间单位来完成, 所以有 <span class="math display">\[t_{0,2} + 2 \le t_{0,3}\]</span></p><p><strong>不重叠约束</strong></p><p>task (0, 2) 和 task (2, 1) 都在机器 1 上完成, 而工作时间分别为 2 和 4. 所以, 以下两个约束中的一个成立:</p><p><span class="math display">\[t_{0,2} + 2 \le t_{2,1}\]</span> 或 <span class="math display">\[t_{2,1} + 4 \le t_{0,2}.\]</span></p><p><strong>目标函数</strong></p><p>最小化时间跨度, 也就是从最早的开始时间到最晚的结束时间.</p><h3 id="求解">求解</h3><p>导包与数据... </p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"><span class="keyword">from</span> ortools.sat.python <span class="keyword">import</span> cp_model</span><br><span class="line"></span><br><span class="line"><span class="comment"># data...</span></span><br><span class="line">jobs_data = [</span><br><span class="line">    [(<span class="number">0</span>, <span class="number">3</span>), (<span class="number">1</span>, <span class="number">2</span>), (<span class="number">2</span>, <span class="number">2</span>)],</span><br><span class="line">    [(<span class="number">0</span>, <span class="number">2</span>), (<span class="number">2</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">4</span>)],</span><br><span class="line">    [(<span class="number">1</span>, <span class="number">4</span>), (<span class="number">2</span>, <span class="number">3</span>)]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">machines_count = <span class="number">1</span> + <span class="built_in">max</span>(task[<span class="number">0</span>] <span class="keyword">for</span> job <span class="keyword">in</span> jobs_data <span class="keyword">for</span> task <span class="keyword">in</span> job)</span><br><span class="line">all_machines = <span class="built_in">range</span>(machines_count)</span><br><span class="line"><span class="comment"># the sum of all durations</span></span><br><span class="line">horizon = <span class="built_in">sum</span>(task[<span class="number">1</span>] <span class="keyword">for</span> job <span class="keyword">in</span> jobs_data <span class="keyword">for</span> task <span class="keyword">in</span> job)</span><br></pre></td></tr></tbody></table></figure> 建模与变量... <figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">model = cp_model.CpModel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># variables...</span></span><br><span class="line">task_type = collections.namedtuple(<span class="string">'task_type'</span>, <span class="string">'start end interval'</span>)</span><br><span class="line">assigned_task_type = collections.namedtuple(<span class="string">'assigned_task_type'</span>, <span class="string">'start job index duration'</span>)</span><br><span class="line"></span><br><span class="line">all_tasks = {}</span><br><span class="line">machine_to_intervals = collections.defaultdict(<span class="built_in">list</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> job_id, job <span class="keyword">in</span> <span class="built_in">enumerate</span>(jobs_data):</span><br><span class="line">    <span class="keyword">for</span> task_id, task <span class="keyword">in</span> <span class="built_in">enumerate</span>(job):</span><br><span class="line">        machine = task[<span class="number">0</span>]</span><br><span class="line">        duration = task[<span class="number">1</span>]</span><br><span class="line">        suffix = <span class="string">'_%i_%i'</span> % (job_id, task_id)</span><br><span class="line">        start_var = model.NewIntVar(<span class="number">0</span>, horizon, <span class="string">'start'</span> + suffix)</span><br><span class="line">        end_var = model.NewIntVar(<span class="number">0</span>, horizon, <span class="string">'end'</span> + suffix)</span><br><span class="line">        interval_var = model.NewIntervalVar(start_var, duration, end_var, <span class="string">'interval'</span> + suffix)</span><br><span class="line">        all_tasks[job_id, task_id] = task_type(start=start_var, end=end_var, interval=interval_var)</span><br><span class="line">        machine_to_intervals[machine].append(interval_var)</span><br></pre></td></tr></tbody></table></figure> 约束... <figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># disjunctive constraints</span></span><br><span class="line"><span class="keyword">for</span> machine <span class="keyword">in</span> all_machines:</span><br><span class="line">    model.AddNoOverlap(machine_to_intervals[machine])</span><br><span class="line"></span><br><span class="line"><span class="comment"># precidences inside a job</span></span><br><span class="line"><span class="keyword">for</span> job_id, job <span class="keyword">in</span> <span class="built_in">enumerate</span>(jobs_data):</span><br><span class="line">    <span class="keyword">for</span> task_id <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(job)-<span class="number">1</span>):</span><br><span class="line">        model.Add(all_tasks[job_id, task_id+<span class="number">1</span>].start &gt;= all_tasks[job_id, task_id].end)</span><br></pre></td></tr></tbody></table></figure> 目标函数... <figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># objective...</span></span><br><span class="line">obj_var = model.NewIntVar(<span class="number">0</span>, horizon, <span class="string">'makespan'</span>)</span><br><span class="line">model.AddMaxEquality(obj_var, [</span><br><span class="line">    all_tasks[job_id, <span class="built_in">len</span>(job)-<span class="number">1</span>].end <span class="keyword">for</span> job_id, job <span class="keyword">in</span> <span class="built_in">enumerate</span>(jobs_data)</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">model.Minimize(obj_var)</span><br></pre></td></tr></tbody></table></figure> 求解与输出... <figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># solve...</span></span><br><span class="line">solver = cp_model.CpSolver()</span><br><span class="line">status = solver.Solve(model)</span><br><span class="line"></span><br><span class="line"><span class="comment"># results...</span></span><br><span class="line"><span class="keyword">if</span> status == cp_model.OPTIMAL <span class="keyword">or</span> status == cp_model.FEASIBLE:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'Solution:'</span>)</span><br><span class="line">    <span class="comment"># create one list of assigned tasks per machine</span></span><br><span class="line">    assigned_jobs = collections.defaultdict(<span class="built_in">list</span>)</span><br><span class="line">    <span class="keyword">for</span> job_id, job <span class="keyword">in</span> <span class="built_in">enumerate</span>(jobs_data):</span><br><span class="line">        <span class="keyword">for</span> task_id, task <span class="keyword">in</span> <span class="built_in">enumerate</span>(job):</span><br><span class="line">            machine = task[<span class="number">0</span>]</span><br><span class="line">            assigned_jobs[machine].append(</span><br><span class="line">                assigned_task_type(start=solver.Value(all_tasks[job_id, task_id].start),</span><br><span class="line">                job=job_id,</span><br><span class="line">                index=task_id,</span><br><span class="line">                duration=task[<span class="number">1</span>])</span><br><span class="line">            )</span><br><span class="line">    <span class="comment"># create per machine output lines</span></span><br><span class="line">    output = <span class="string">''</span></span><br><span class="line">    <span class="keyword">for</span> machine <span class="keyword">in</span> all_machines:</span><br><span class="line">        <span class="comment"># sort by starting time</span></span><br><span class="line">        assigned_jobs[machine].sort()</span><br><span class="line">        sol_line_tasks = <span class="string">'Machine '</span> + <span class="built_in">str</span>(machine) + <span class="string">': '</span></span><br><span class="line">        sol_line = <span class="string">'\t'</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> assigned_task <span class="keyword">in</span> assigned_jobs[machine]:</span><br><span class="line">            name = <span class="string">'job_%i_task_%i'</span> % (assigned_task.job, assigned_task.index)</span><br><span class="line">            <span class="comment"># align columns</span></span><br><span class="line">            sol_line_tasks += <span class="string">'%-15s'</span> % name</span><br><span class="line"></span><br><span class="line">            start = assigned_task.start</span><br><span class="line">            duration = assigned_task.duration</span><br><span class="line">            sol_tmp = <span class="string">'[%i, %i]'</span> % (start, start + duration)</span><br><span class="line">            <span class="comment"># align columns</span></span><br><span class="line">            sol_line += <span class="string">'%-15s'</span> % sol_tmp</span><br><span class="line"></span><br><span class="line">        sol_line += <span class="string">'\n'</span></span><br><span class="line">        sol_line_tasks += <span class="string">'\n'</span></span><br><span class="line">        output += sol_line_tasks</span><br><span class="line">        output += sol_line</span><br><span class="line"></span><br><span class="line">    <span class="comment"># print the solution</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f'Optimal Schedule Length: <span class="subst">{solver.ObjectiveValue()}</span>'</span>)</span><br><span class="line">    <span class="built_in">print</span>(output)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'No solution found.'</span>)</span><br></pre></td></tr></tbody></table></figure> 输出: <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Solution:</span><br><span class="line">Optimal Schedule Length: 11.0</span><br><span class="line">Machine 0: job_1_task_0   job_0_task_0   </span><br><span class="line">        [0, 2]         [2, 5]         </span><br><span class="line">Machine 1: job_2_task_0   job_0_task_1   job_1_task_2   </span><br><span class="line">        [0, 4]         [5, 7]         [7, 11]        </span><br><span class="line">Machine 2: job_1_task_1   job_2_task_1   job_0_task_2   </span><br><span class="line">        [2, 3]         [4, 7]         [7, 9]    </span><br></pre></td></tr></tbody></table></figure> <img src="/posts/52763/schedule2.png"><p></p>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> Python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>OR-Tools 入门</title>
      <link href="/posts/59457/"/>
      <url>/posts/59457/</url>
      
        <content type="html"><![CDATA[<p><span class="math display">\[\max~ 3x+y,\quad\text{subject to}\ \begin{cases}0\le x\le 1\\0\le y\le 2\\x+y\le 2\end{cases}\]</span> <span id="more"></span> </p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> ortools.linear_solver <span class="keyword">import</span> pywraplp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="comment"># Create the linear solver with the GLOP backend.</span></span><br><span class="line">    solver = pywraplp.Solver.CreateSolver(<span class="string">'GLOP'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Create the variables x and y.</span></span><br><span class="line">    x = solver.NumVar(<span class="number">0</span>, <span class="number">1</span>, <span class="string">'x'</span>)</span><br><span class="line">    y = solver.NumVar(<span class="number">0</span>, <span class="number">2</span>, <span class="string">'y'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'Number of variables ='</span>, solver.NumVariables())</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Create a linear constraint, 0 &lt;= x + y &lt;= 2.</span></span><br><span class="line">    ct = solver.Constraint(<span class="number">0</span>, <span class="number">2</span>, <span class="string">'ct'</span>)</span><br><span class="line">    ct.SetCoefficient(x, <span class="number">1</span>)</span><br><span class="line">    ct.SetCoefficient(y, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'Number of constraints ='</span>, solver.NumConstraints())</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Create the objective function, 3 * x + y.</span></span><br><span class="line">    objective = solver.Objective()</span><br><span class="line">    objective.SetCoefficient(x, <span class="number">3</span>)</span><br><span class="line">    objective.SetCoefficient(y, <span class="number">1</span>)</span><br><span class="line">    objective.SetMaximization()</span><br><span class="line"></span><br><span class="line">    solver.Solve()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'='</span>*<span class="number">25</span>+<span class="string">' Solution '</span>+<span class="string">'='</span>*<span class="number">25</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'Objective value ='</span>, objective.Value())</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'x ='</span>, x.solution_value())</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'y ='</span>, y.solution_value())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></tbody></table></figure> 输出 <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Number of variables = 2</span><br><span class="line">Number of constraints = 1</span><br><span class="line">========================= Solution =========================</span><br><span class="line">Objective value = 4.0</span><br><span class="line">x = 1.0</span><br><span class="line">y = 1.0</span><br></pre></td></tr></tbody></table></figure><p></p>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> Python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>dereference 与 shallow copy</title>
      <link href="/posts/6370/"/>
      <url>/posts/6370/</url>
      
        <content type="html"><![CDATA[<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x = [<span class="number">0</span>]</span><br><span class="line">y = x</span><br></pre></td></tr></tbody></table></figure><p>此时修改 <code>x</code> 或 <code>y</code> 不影响另一个变量: </p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x = [<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(y)  <span class="comment"># [0]</span></span><br></pre></td></tr></tbody></table></figure><p></p><p>如果有 dereference, 被修改: </p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x = [<span class="number">0</span>]</span><br><span class="line">y = x</span><br><span class="line"></span><br><span class="line">y[<span class="number">0</span>] = [<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(x)  <span class="comment"># [1]</span></span><br></pre></td></tr></tbody></table></figure> <span id="more"></span><p></p><hr><p>下面的例子中, <code>foo</code> 中的 <code>x</code> 是一个浅拷贝, 在第一次 <code>append</code> 的时候同时修改了原来的 <code>x</code>, 但在赋值为 2 时浅拷贝指向了新的地址, 之后的操作都是对浅拷贝进行的. </p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">x</span>):</span><br><span class="line">    x.append(<span class="number">1</span>)</span><br><span class="line">    x = [<span class="number">2</span>]</span><br><span class="line">    x.append(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line">x = [<span class="number">0</span>]</span><br><span class="line">foo(x)</span><br><span class="line"><span class="built_in">print</span>(x)  <span class="comment"># [0, 1]</span></span><br></pre></td></tr></tbody></table></figure><p></p>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> Python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>回不去的夏天</title>
      <link href="/posts/59205/"/>
      <url>/posts/59205/</url>
      
        <content type="html"><![CDATA[<p>又是一年高考季. 清早起来, 大把的金光倾泻到身上, 让时间一下子变慢了.</p><p>让我又想起了那个夏天, 那个完美的夏天, 那个打开教室后窗, 就有带着清香的槐花瓣飘落满地的五月. 窗边总有少年在惬意的清风中望着外面的世界, 而他身边总有熟悉的体温.</p><p>我嗅到了阳光的味道, 那样浓烈而又炽热. 它带着莽撞, 带着悸动, 带着热血, 也带着青涩与迷茫.</p><p>那是天空永远清朗的夏天, 有着池鱼, 鸣鸟, 蝉噪, 音乐, 冷饮的夏天; 有着汗水, 欢笑, 泪眼, 羁绊, 思念的夏天.</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Fourier 级数</title>
      <link href="/posts/22351/"/>
      <url>/posts/22351/</url>
      
        <content type="html"><![CDATA[<p><span class="math display">\[f\colon[-L,L]\to\mathbb{R}\]</span> <span class="math display">\[F(x)=a_0+\sum_{n=1}^\infty \left(a_n\cos\left(\frac{n\pi x}{L}\right)+b_n\sin\left(\frac{n\pi x}{L}\right)\right)\]</span> 其中 <span class="math display">\[a_0=\frac{1}{2L}\int_{-L}^Lf(x)\,\mathrm{d}x\]</span> <span class="math display">\[a_n=\frac{1}{L}\int_{-L}^Lf(x)\cos\left(\frac{n\pi x}{L}\right)\,\mathrm{d}x\]</span> <span class="math display">\[b_n=\frac{1}{L}\int_{-L}^Lf(x)\sin\left(\frac{n\pi x}{L}\right)\,\mathrm{d}x\]</span></p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 级数 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>常用级数</title>
      <link href="/posts/56038/"/>
      <url>/posts/56038/</url>
      
        <content type="html"><![CDATA[<p><span class="math display">\[\sum_{n=1}^\infty\frac{1}{n^2}=\frac{\pi^2}{6}\]</span> <span id="more"></span> <span class="math display">\[\sum_{n=1}^\infty\frac{(-1)^{n-1}}{n^2}=\frac{\pi^2}{12}\]</span> <span class="math display">\[\sum_{n=1}^\infty\frac{1}{(2n-1)^2}=\frac{\pi^2}{8}\]</span> <span class="math display">\[\sum_{n=1}^\infty\frac{1}{n^4}=\frac{\pi^4}{90}\]</span> <span class="math display">\[\sum_{n=1}^\infty\frac{(-1)^{n-1}}{n^4}=\frac{7\pi^4}{720}\]</span> <span class="math display">\[1-\frac13+\frac15-\frac17+\cdots=\frac\pi4\]</span> <span class="math display">\[1-\frac12+\frac13-\frac14+\cdots=\ln2\]</span></p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 级数 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>常用积分</title>
      <link href="/posts/23548/"/>
      <url>/posts/23548/</url>
      
        <content type="html"><![CDATA[<h2 id="不定积分">不定积分</h2><p><span class="math display">\[\int\frac{1}{x^2+a^2} \,\mathrm{d}x=\frac 1a\arctan\frac xa+C\]</span> <span class="math display">\[\int\frac{1}{x^2-a^2} \,\mathrm{d}x=\frac {1}{2a}\ln\left|\frac{x-a}{x+a}\right|+C\]</span> <span class="math display">\[\int\frac{1}{\sqrt{x^2\pm a^2}} \,\mathrm{d}x=\ln\left|x+\sqrt{x^2\pm a^2}\right|+C\]</span> <span class="math display">\[\int\frac{1}{\sqrt{a^2-x^2}} \,\mathrm{d}x=\arcsin \frac xa+C\]</span> <span class="math display">\[\int\frac{1}{\sqrt{1+x^2}} \,\mathrm{d}x=\sinh^{-1}x+C\]</span></p><span id="more"></span><h2 id="定积分">定积分</h2><p><span class="math display">\[\int_{-a}^af(x)\,\mathrm{d}x=\int_{0}^a\left(f(x)+f(-x)\right)\,\mathrm{d}x\]</span></p><p><span class="math display">\[\int_{0}^{\pi}xf(\sin x)\,\mathrm{d}x=\frac\pi2\int_{0}^\pi f(\sin x)\,\mathrm{d}x\]</span></p><p><a href="/posts/46715/index.html"><span class="math display">\[\int_0^1(1-x^2)^n\d x={(2n)!!\over(2n+1)!!}\]</span></a></p><h2 id="反常积分">反常积分</h2><p><a href="/posts/48382/index.html"><span class="math display">\[\int_{-\infty}^\infty \e^{-x^2}\d x=\sqrt\pi\]</span></a></p><p><span class="math display">\[\int_0^{\frac \pi2}\ln(\sin x)=\int_0^{\frac \pi2}\ln(\cos x)=-\frac\pi2\ln2\]</span></p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 微积分 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>三角函数</title>
      <link href="/posts/26462/"/>
      <url>/posts/26462/</url>
      
        <content type="html"><![CDATA[<h2 id="和差化积">和差化积</h2><p><span class="math display">\[\sin\alpha+\sin\beta=2\sin\left(\frac{\alpha+\beta}{2}\right)\cos\left(\frac{\alpha-\beta}{2}\right)\]</span></p><p><span class="math display">\[\sin\alpha-\sin\beta=2\cos\left(\frac{\alpha+\beta}{2}\right)\sin\left(\frac{\alpha-\beta}{2}\right)\]</span></p><p><span class="math display">\[\cos\alpha+\cos\beta=2\cos\left(\frac{\alpha+\beta}{2}\right)\cos\left(\frac{\alpha-\beta}{2}\right)\]</span></p><p><span class="math display">\[\cos\alpha-\cos\beta=-2\sin\left(\frac{\alpha+\beta}{2}\right)\sin\left(\frac{\alpha-\beta}{2}\right)\]</span></p><span id="more"></span><h2 id="积化和差">积化和差</h2><p><span class="math display">\[\sin\alpha\cos\beta=\frac12\left(\sin(\alpha+\beta)+\sin(\alpha-\beta)\right)\]</span></p><p><span class="math display">\[\cos\alpha\sin\beta=\frac12\left(\sin(\alpha+\beta)-\sin(\alpha-\beta)\right)\]</span></p><p><span class="math display">\[\cos\alpha\cos\beta=\frac12\left(\cos(\alpha+\beta)+\cos(\alpha-\beta)\right)\]</span></p><p><span class="math display">\[\sin\alpha\sin\beta=-\frac12\left(\cos(\alpha+\beta)-\cos(\alpha-\beta)\right)\]</span></p><h2 id="倍角公式">倍角公式</h2><p><span class="math display">\[\sin3x=3\sin x-4\sin^3x\]</span> <span class="math display">\[\cos 3x=-3\cos x+4\cos^3x\]</span></p><h2 id="万能公式">万能公式</h2><p>令 <span class="math inline">\(t=\tan\dfrac x2\)</span>, 那么 <span class="math display">\[\begin{gather*}\sin x=\frac{2t}{1+t^2},\quad\cos x=\frac{1-t^2}{1+t^2},\quad\tan x=\frac{2t}{1-t^2}\end{gather*}\]</span></p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 初等数学 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>为什么&quot;假推真/假&quot;都为真</title>
      <link href="/posts/31827/"/>
      <url>/posts/31827/</url>
      
        <content type="html"><![CDATA[<p><span class="math inline">\(P\Rightarrow Q\)</span> 的<strong>定义</strong>是真值表. "如果 <span class="math inline">\(P\)</span>, 那么 <span class="math inline">\(Q\)</span>" 只是一种解释, 不是定义. 也就是说, <span class="math inline">\(P\)</span> 和 <span class="math inline">\(Q\)</span> 本身不需要有联系. 这里解释一下为什么定义是这样的: <span class="math inline">\(P\)</span> 为假, <span class="math inline">\(P\Rightarrow Q\)</span> 总为真. <span id="more"></span></p><p>"假推假"为真, 这看上去不符合直觉. 要弄清的是, 是这个逻辑为真, 而不是推出的命题为真.</p><p><strong><span class="math inline">\(P\Rightarrow Q\)</span> 只有在真推假的时候才为假.</strong></p><p>这是说, 论断 <span class="math inline">\(P\Rightarrow Q\)</span> 是正确的, 等价于, 永远不会从真命题推出假命题. 换言之, 如果你想说我的论断 <span class="math inline">\(P\Rightarrow Q\)</span> 是错的, 需要且只需要找到一个情况, 使得 <span class="math inline">\(P\)</span> 为真, <span class="math inline">\(Q\)</span> 为假, 其他情况都不管用.</p><blockquote><p><strong>"如果北京是中国的首都, 那么 <span class="math inline">\(1+1=2\)</span>." 这个论断正确吗? (真推真)</strong></p><p>如果你想说我的论断错了, 那么只需要找到情况 "北京是中国的首都, <span class="math inline">\(1+1\ne2\)</span>". 没有这种情况 (真且假), 所以论断是对的.</p><p><strong>"如果北京是中国的首都, 那么 <span class="math inline">\(1+1=3\)</span>." 这个论断正确吗? (真推假)</strong></p><p>如果你想说我的论断错了, 那么只需要找到情况 "北京是中国的首都, <span class="math inline">\(1+1\ne3\)</span>". 有这种情况 (真且真), 所以论断是错的.</p><p><strong>"如果猪会飞, 那么 <span class="math inline">\(1+1=2\)</span>." 这个论断正确吗? (假推真)</strong></p><p>如果你想说我的论断错了, 那么只需要找到情况 "猪会飞, <span class="math inline">\(1+1\ne2\)</span>". 没有这种情况 (假且假), 所以论断是对的.</p><p><strong>"如果猪会飞, 那么 <span class="math inline">\(1+1=3\)</span>." 这个论断正确吗? (假推假)</strong></p><p>如果你想说我的论断错了, 那么只需要找到情况 "猪会飞, <span class="math inline">\(1+1\ne3\)</span>". 没有这种情况 (假且真), 所以论断是对的.</p></blockquote><p><em>注: 可以看出, 猪会飞可以推出任何结论. 因为你找不到一只会飞的猪来反驳我.</em></p><p>这里可以看出这个等价逻辑, <span class="math inline">\(P\Rightarrow Q\)</span> 等价于 <span class="math inline">\(\lnot (P\land\lnot Q)\)</span>. 后者同时又是 <span class="math inline">\(\lnot P\lor Q\)</span>, 这是说, 要想 <span class="math inline">\(P\Rightarrow Q\)</span> 逻辑正确, 要么前提是错的, 要么结论是对的.</p><hr><p>有时 <span class="math inline">\(P\Rightarrow Q\)</span> 的正确性比 <span class="math inline">\(Q\)</span> 的正确性更容易看出来. 我们已知推理正确, 那可以得出结论正确吗? 看真值表:</p><table><thead><tr class="header"><th style="text-align: center;"><span class="math inline">\(P\)</span></th><th style="text-align: center;"><span class="math inline">\(Q\)</span></th><th style="text-align: center;"><span class="math inline">\(P\Rightarrow Q\)</span></th></tr></thead><tbody><tr class="odd"><td style="text-align: center;">F</td><td style="text-align: center;">T</td><td style="text-align: center;">T</td></tr><tr class="even"><td style="text-align: center;">F</td><td style="text-align: center;">F</td><td style="text-align: center;">T</td></tr></tbody></table><p>可以看出, 如果前提 (<span class="math inline">\(P\)</span>) 是错的, 即使我们做出了正确的推理, 也无法判断推出的结果 (<span class="math inline">\(Q\)</span>) 是否正确.</p><blockquote><p>如果 <span class="math inline">\(1&lt;10\)</span>, 那么 <span class="math inline">\(1&lt;100\)</span>.</p><p>如果 <span class="math inline">\(50&lt;10\)</span>, 那么 <span class="math inline">\(50&lt;100\)</span>.</p><p>如果 <span class="math inline">\(200&lt;10\)</span>, 那么 <span class="math inline">\(200&lt;100\)</span>.</p></blockquote><p>这三个推理都是正确的. 第一个, 我们从正确的结论推出了正确的结论. 后两个, 我们从错误的结论分别推出了正确和错误的结论.</p><hr><p>逆否命题的角度:</p><p><span class="math inline">\(P\Rightarrow Q\)</span> 等价于 <span class="math inline">\(\lnot Q\Rightarrow\lnot P\)</span>.</p><p>于是当 <span class="math inline">\(P\)</span> 为假时, <span class="math inline">\(\lnot Q\Rightarrow\lnot P\)</span> 就是真/假推真, 总为真.</p><hr><p>集合论的角度:</p><p>把命题 <span class="math inline">\(P\)</span> 看成是 <span class="math inline">\(x\in P\)</span>, 此时把右边的 <span class="math inline">\(P\)</span> 看成是集合.</p><p><span class="math inline">\(P\Rightarrow Q\)</span> 等价于 <span class="math inline">\(P\)</span> 对应的集合是 <span class="math inline">\(Q\)</span> 对应的集合的子集.</p><p>比如, "下雨 <span class="math inline">\(\Rightarrow\)</span> 地面是湿的" 就是 <span class="math display">\[\{\text{下雨时}\}\subseteq\{\text{地面是湿的时}\}.\]</span></p><p>"<span class="math inline">\(n\)</span> 是自然数 <span class="math inline">\(\Rightarrow\)</span> <span class="math inline">\(n\)</span> 是整数" 就是 <span class="math display">\[\mathbb{N}\subseteq\mathbb{Z}.\]</span></p><p>一个假命题对应的集合是空集 (没有元素可以满足), 而空集是任何集合的子集. 所以假命题可以推出任何命题.</p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 逻辑 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>分部积分的表格法</title>
      <link href="/posts/42394/"/>
      <url>/posts/42394/</url>
      
        <content type="html"><![CDATA[<p><span class="math display">\[\int (x^2+x)\e^{2x}\d x\]</span> 第一行求导, 第二行积分, 直到求导结果为 0: <img src="/file/xex.png" width="400"> 正负交替相加: <span class="math display">\[\text{原式}=\left({x^2+x\over2}-{2x+1\over4}+\frac14\right)\e^{2x}=\frac12 x^2\e^{2x}+C.\]</span> <span id="more"></span></p><hr><p>若多次求导不能为 0, 需要在最后加一个积分项, 其符号与上一个相反. 比如出现循环:</p><p><span class="math display">\[\int \e^{x}\sin 2x\d x\]</span></p><p><img src="/file/sine.png" width="350"></p><p><span class="math display">\[\int \e^x\sin 2x\d x=(\sin 2x-2\cos 2x)\e^x-4\int\e^{x}\sin 2x\d x,\]</span></p><p>那么 <span class="math display">\[\text{原式}=\frac15(\sin 2x-2\cos2x)\e^x+C.\]</span></p><hr><p>或者积分被简化: <span class="math display">\[\int 2x\arctan x\d x\]</span> <img src="/file/xarctanx.png" width="250"></p><p><span class="math display">\[\text{原式}=(x^2+1)\arctan x-\int 1\d x=(x^2+1)\arctan x-x+C.\]</span></p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 微积分 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>留数的计算方法</title>
      <link href="/posts/51485/"/>
      <url>/posts/51485/</url>
      
        <content type="html"><![CDATA[<ol type="1"><li>在分式 <span class="math inline">\(f=g/h\)</span> 中, 若分母有简单零点 <span class="math inline">\(z_0\)</span> 而分子没有, 那么 <span class="math inline">\(f\)</span> 在 <span class="math inline">\(z_0\)</span> 处的留数为 <span class="math display">\[\frac{g(z_0)}{h'(z_0)}\]</span></li></ol><blockquote><p><span class="math inline">\(\dfrac{1}{z^4-1}\)</span> 在 <span class="math inline">\(\i\)</span> 处的留数为 <span class="math display">\[{1\over \left.4z^3\right|_{z=\i}}={1\over-4\i}=\frac\i4.\]</span></p></blockquote><ol start="2" type="1"><li>假设 <span class="math inline">\(z_0\)</span> 是 <span class="math inline">\(n\)</span> 阶极点, 那么该点处的留数为 <span class="math display">\[ \frac{1}{(n-1)!}\left(\left(\frac{\d}{\d z}\right)^{n-1}(z-z_0)^n f(z)\right)_{z=z_0}\]</span></li></ol>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 微积分 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>一些英文术语</title>
      <link href="/posts/18686/"/>
      <url>/posts/18686/</url>
      
        <content type="html"><![CDATA[<h2 id="分析与代数">分析与代数</h2><table><thead><tr class="header"><th>中文</th><th>英文</th></tr></thead><tbody><tr class="odd"><td>二次</td><td>quadratic</td></tr><tr class="even"><td>三次</td><td>cubic</td></tr><tr class="odd"><td>四次</td><td>quartic</td></tr><tr class="even"><td>五次</td><td>quintic</td></tr></tbody></table><h2 id="几何">几何</h2><table><thead><tr class="header"><th>中文</th><th>英文</th></tr></thead><tbody><tr class="odd"><td>四边形</td><td>quadrilateral</td></tr><tr class="even"><td>五边形</td><td>pentagon</td></tr><tr class="odd"><td>六边形</td><td>hexagon</td></tr><tr class="even"><td>七边形</td><td>heptagon</td></tr><tr class="odd"><td>八边形</td><td>octagon</td></tr><tr class="even"><td>九边形</td><td>nonagon</td></tr><tr class="odd"><td>十边形</td><td>decagon</td></tr><tr class="even"><td>平行四边形</td><td>parallelogram</td></tr><tr class="odd"><td>四面体 (三棱锥)</td><td>tetrahedron</td></tr><tr class="even"><td>棱柱</td><td>prism</td></tr><tr class="odd"><td>多面体</td><td>polyhedron</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>双曲函数</title>
      <link href="/posts/12845/"/>
      <url>/posts/12845/</url>
      
        <content type="html"><![CDATA[<h2 id="定义">定义</h2><p><span class="math display">\[\sinh(x)=\frac{\e^x-\e^{-x}}{2}\]</span></p><p><span class="math display">\[\cosh(x)=\frac{\e^x+\e^{-x}}{2}\]</span></p><p><span class="math display">\[\tanh(x)=\frac{\e^x-\e^{-x}}{\e^x+\e^{-x}},\ \coth(x)=\frac{1}{\tanh(x)}\]</span></p><p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/76/Sinh_cosh_tanh.svg/440px-Sinh_cosh_tanh.svg.png" width="300" height="300"></p><span id="more"></span><h2 id="复变量">复变量</h2><p><span class="math display">\[\sin(\i x)=\i\sinh(x),\ \sinh(\i x)=\i\sin(x)\]</span></p><p><span class="math display">\[\cos(\i x)=\cosh(x),\ \cosh(\i x)=\cos(x)\]</span></p><h2 id="和角公式">和角公式</h2><p><span class="math display">\[\sinh(x\pm y)=\sinh(x)\cosh(y)\pm\cosh(x)\sinh(y)\]</span></p><p><span class="math display">\[\cosh(x\pm y)=\cosh(x)\cosh(y)\pm\sinh(x)\sinh(y)\]</span></p><p><span class="math display">\[\tanh(x+y)={\tanh x+\tanh y\over 1+\tanh x\tanh y}\]</span></p><p><span class="math display">\[\tanh(x-y)={\tanh x-\tanh y\over 1-\tanh x\tanh y}\]</span></p><h2 id="倍角公式">倍角公式</h2><p><span class="math display">\[\cosh 2x=\sinh^2x+\cosh^2x=2\sinh^2x+1=2\cosh^2x-1\]</span></p><p><span class="math display">\[\sinh 2x=2\sinh x\cosh x\]</span></p><p><span class="math display">\[\tanh 2x={2\tanh x\over 1+\tanh^2x}\]</span></p><h2 id="逆函数">逆函数</h2><p><span class="math display">\[\sinh^{-1}(x)=\ln\left(x+\sqrt{x^2+1}\right)\]</span></p><p><span class="math display">\[\cosh^{-1}(x)=\ln\left(x+\sqrt{x^2-1}\right)\]</span></p><p><span class="math display">\[\tanh^{-1}(x)=\frac12\ln\left(\frac{1+x}{1-x}\right)\]</span></p><h2 id="导数">导数</h2><p><span class="math display">\[\begin{gathered}(\sinh x)'=\cosh x\\(\cosh x)'=\sinh x\\(\tanh x)'=\frac{1}{\cosh^2 x}\\\left(\sinh^{-1}x\right)'=\frac{1}{\sqrt{x^2+1}}\\\left(\cosh^{-1}x\right)'=\frac{1}{\sqrt{x^2-1}}\\\left(\tanh^{-1}x\right)'=\frac{1}{1-x^2}\\\end{gathered}\]</span></p><h2 id="积分">积分</h2><p><span class="math display">\[\begin{gathered}\int\sinh(ax)\d x=\frac1a\cosh(ax)+C\\\int\cosh(ax)\d x=\frac1a\sinh(ax)+C\\\int\tanh(ax)\d x=\frac{1}{a}\ln(\cosh(ax))+C\\\int\tan(ax)\d x=-\frac1a\ln|\cos(ax)|+C\end{gathered}\]</span></p><h2 id="泰勒展开">泰勒展开</h2><p><span class="math display">\[\sinh(x)=x+\frac{x^3}{3!}+\frac{x^5}{5!}+\frac{x^7}{7!}+\cdots\]</span></p><p><span class="math display">\[\cosh(x)=1+\frac{x^2}{2!}+\frac{x^4}{4!}+\frac{x^6}{6!}+\cdots\]</span></p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 初等数学 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>数值 ODE</title>
      <link href="/posts/23214/"/>
      <url>/posts/23214/</url>
      
        <content type="html"><![CDATA[<p><span class="math inline">\(f_n\)</span> 是 <span class="math inline">\(f(x_n,y_n)\)</span> 的简记, <span class="math inline">\(y_n\)</span> 是 <span class="math inline">\(y(x_n)\)</span> 的估计.</p><span id="more"></span><h2 id="one-step-methods">One-Step Methods</h2><p>形式是 <span class="math display">\[y_{n+1}=y_n+h\Phi(x_n,y_n,h)\]</span></p><p>local truncation error 指的是 <span class="math display">\[\tau(h)=y(x_{n+1})-y(x_n)-h\Phi(x_n,y(x_n),h)\]</span> 称方法的阶数为 <span class="math inline">\(p\)</span> 如果 <span class="math inline">\(\tau(h)=O(h^{p+1})\)</span>.</p><p>global error 指的是 <span class="math display">\[e_n=y(x_n)-y_n\]</span></p><ul><li>Euler's method 阶数为 <span class="math inline">\(1\)</span> <span class="math display">\[y_{n+1}=y_n+hf_n\]</span></li><li>backward Euler method 阶数为 <span class="math inline">\(1\)</span> <span class="math display">\[y_{n+1}=y_n+hf(x_{n+1},y_{n+1})\]</span></li><li>Trapezium method 阶数为 <span class="math inline">\(2\)</span> <span class="math display">\[y_{n+1}=y_n+\frac h2(f_n+f_{n+1})\]</span></li><li>Heun's method 阶数为 <span class="math inline">\(2\)</span> <span class="math display">\[y_{n+1}=y_n+\frac h2\left(f_n+f(x_n+h,y_n+hf_n)\right)\]</span></li></ul><h2 id="runge-kutta-methods">Runge-Kutta methods</h2><p><span class="math display">\[\begin{aligned}    k_1 &amp;= f(x_n,y_n)\\    k_2 &amp;= f(x_n+c_2h,y_n+ha_{21}k_1)\\    k_i&amp;=f(x_n+c_ih,y_n+h(a_{i1}k_1+\cdots+a_{i,i-1}k_{i-1})),\ i=3:m\\    y_{n+1} &amp;= y_n+h(b_1k_1+b_2k_2+\cdots+b_mk_m)\end{aligned}\]</span></p><h3 id="stage-runge-kutta">2-stage Runge-Kutta</h3><p><span class="math display">\[\begin{aligned}    k_1 &amp;= f(x_n,y_n)\\    k_2 &amp;= f(x_n+ch,y_n+hak_1)\\    y_{n+1} &amp;= y_n+h(b_1k_1+b_2k_2)\end{aligned}\]</span> 阶数是 <span class="math inline">\(2\)</span> 当 <span class="math display">\[\begin{aligned}    b_1+b_2&amp;=1\\    b_2c&amp;=\frac12\\    b_2a&amp;=\frac12\end{aligned}\]</span></p><ul><li><span class="math inline">\(c=1\)</span> 是 Huen's method</li><li><span class="math inline">\(c=\frac{1}{2}\)</span> 是 explicit midpoint method</li><li><span class="math inline">\(c=\frac23\)</span> 让局部误差最小</li></ul><h2 id="linear-multistep-method">Linear Multistep Method</h2><p><span class="math display">\[y_{n+1}=\sum_{k=1}^l a_ky_{n+1-k}+h\sum_{k=0}^l b_k f_{n+1-k}\]</span></p><h3 id="adams-bashforth-methods">Adams-Bashforth Methods</h3><p>用 <span class="math inline">\(f_n\)</span> 之前的 <span class="math inline">\(l\)</span> 个值做插值估计 <span class="math inline">\(f\)</span>, 阶数为 <span class="math inline">\(l\)</span>.</p><ul><li>1-step 就是 Euler's method <span class="math display">\[y_{n+1}=y_n+hf_n\]</span></li><li>2-step 阶数为 2 <span class="math display">\[y_{n+1}=y_n+\frac{h}{2}(3f_n-f_{n-1})\]</span></li><li>3-step <span class="math display">\[y_{n+1}=y_{n}+\frac{h}{12}\left(23 f_{n}-16 f_{n-1}+5 f_{n-2}\right)\]</span></li><li>4-step <span class="math display">\[y_{n+1}=y_{n}+\frac{h}{24}\left(55 f_{n}-59 f_{n-1}+37 f_{n-2}-9 f_{n-3}\right)\]</span></li></ul>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 数值分析 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>数值积分</title>
      <link href="/posts/24343/"/>
      <url>/posts/24343/</url>
      
        <content type="html"><![CDATA[<p>Quadrature Rule 指的是形式 <span class="math display">\[Q(f)=\sum_{k=0}^nw_kf(x_k)\]</span></p><p>有时把 <span class="math inline">\(f(x_k)\)</span> 简写作 <span class="math inline">\(f_k\)</span>.</p><span id="more"></span><h2 id="interpolation-rule">Interpolation Rule</h2><p>在插值多项式上求积分, 即 <span class="math display">\[w_k=\int_a^b l_k(x)\d x\]</span></p><h3 id="midpoint-rule">Midpoint Rule</h3><p>在中点处取 <span class="math inline">\(0\)</span> 次多项式. <span class="math display">\[Q(f)=(b-a)f(x_0),\]</span> 其中 <span class="math inline">\(x_0\)</span> 是区间中点. 精度为 <span class="math inline">\(1\)</span>.</p><h3 id="newton-cotes-rules">Newton-Cotes Rules</h3><p>区间上的等距节点. <span class="math inline">\(n\)</span> 为奇数时精度为 <span class="math inline">\(n\)</span>, 偶数时精度为 <span class="math inline">\(n+1\)</span>.</p><ul><li><span class="math inline">\(n=1\)</span>: trapezium rule 精度为 <span class="math inline">\(1\)</span> <span class="math display">\[\frac h2(f_0+f_1)\]</span> 误差 <span class="math display">\[I-Q=-\frac{1}{12}h^3 f''(\xi),\ \xi\in(a,b)\]</span></li><li><span class="math inline">\(n=2\)</span>: Simpson's rule 精度为 <span class="math inline">\(3\)</span> <span class="math display">\[\frac h3\left(f(x_0)+4f(x_1)+f(x_2)\right)\]</span> 误差 <span class="math display">\[I-Q=-\frac{h^5}{90}f^{(4)}(\xi)=-\frac{(b-a)^5}{2880}f^{(4)}(\xi),\ \xi\in(a,b)\]</span></li></ul><h2 id="gauss-rule">Gauss Rule</h2><p>寻找关于权重 <span class="math inline">\(w(x)\)</span> 精度最高的节点, 实际上是关于 <span class="math inline">\(w(x)\)</span> 的正交多项式的零点. 精度是 <span class="math inline">\(2n+1\)</span>.</p><h3 id="gauss-legendre-quadrature-wx1">Gauss-Legendre Quadrature <span class="math inline">\(w(x)=1\)</span></h3><ul><li><span class="math inline">\(n=0\)</span>: <span class="math display">\[\int_{-1}^1f(x)\d x\approx 2f(0)\]</span> 是中点法.</li><li><span class="math inline">\(n=1\)</span>: <span class="math display">\[\int_{-1}^1f(x)\d x\approx f\left(-\frac{1}{\sqrt 3}\right)+f\left(\frac{1}{\sqrt 3}\right)\]</span></li></ul><h3 id="gauss-chebyshev-quadrature-wx1-x2-12">Gauss-Chebyshev Quadrature <span class="math inline">\(w(x)=(1-x^2)^{-1/2}\)</span></h3><p><span class="math inline">\(x_0,\ldots,x_n\)</span> 取 <span class="math inline">\(T_{n+1}(x)\)</span> 的零点, 即 Chebyshev 分点 <span class="math display">\[x_k=\cos\left(\frac\pi2\frac{2k+1}{n+1}\right)\]</span></p><p>此时权重都是 <span class="math inline">\(\displaystyle w_k=\frac{\pi}{n+1}\)</span></p><h2 id="composite-quadrature-rules">Composite Quadrature Rules</h2><p>把区间等分后做积分.</p><h3 id="composite-midpoint-rule">Composite Midpoint Rule</h3><p><span class="math display">\[M(h)=\sum_{k=0}^{n-1}hf\left(a+h\left(k+\frac12\right)\right)\]</span> 误差 <span class="math display">\[I-M=\frac{h^2}{24}(b-a)f''(\xi)\]</span></p><h3 id="composite-trapezium-rule">Composite Trapezium Rule</h3><p><span class="math display">\[T(h)=\frac h2\left(f(t_0)+2f(t_1)+2f(t_2)+\cdots+2f(t_{n-1})+f(t_n)\right)\]</span> 误差 <span class="math display">\[I-T=-\frac{h^2}{12}(b-a)f''(\xi)\]</span></p><h3 id="composite-simpsons-rule">Composite Simpson's Rule</h3><p><span class="math display">\[S(h)=\frac{h}{3}\left(f(t_0)+4f(t_1)+2f(t_2)+4f(t_3)+\cdots+2f(t_{2m-2})+4f(t_{2m-1})+f(t_{2m})\right)\]</span> 误差 <span class="math display">\[I-S=-\frac{h^4}{180}(b-a)f^{(4)}(\xi)\]</span></p><h2 id="extrapolation">Extrapolation</h2><p>做组合消除误差. 令 <span class="math inline">\(T_{k,1}=T(h/2^{k-1})\)</span> 并构造表 <span class="math display">\[T_{i,j}={4^{j-1}T_{i,j-1}-T_{i-1,j-1}\over 4^{j-1}-1}\]</span> 每向右一列误差 <span class="math inline">\(\times h^2\)</span>.</p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 数值分析 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>线性方程组的迭代法</title>
      <link href="/posts/57010/"/>
      <url>/posts/57010/</url>
      
        <content type="html"><![CDATA[<p>思路: 在线性方程组 <span class="math display">\[Ax=b\]</span> 中把 <span class="math inline">\(A\)</span> 写成 <span class="math inline">\(M-N\)</span>, 就启发我们得到了迭代形式 <span class="math display">\[\begin{equation}\label{iter}Mx^{(k+1)}=Nx^{(k)}+b\end{equation}\]</span> 易见迭代收敛时极限就是解.</p><span id="more"></span><table><thead><tr class="header"><th><strong>定理: <span class="math inline">\(A\)</span> 和 <span class="math inline">\(M\)</span> 可逆, 且 <span class="math inline">\(\rho(M^{-1}N)&lt;1\)</span> 时 <span class="math inline">\(\eqref{iter}\)</span> 对任意初值 <span class="math inline">\(x^{(0)}\)</span> 收敛.</strong></th></tr></thead><tbody><tr class="odd"><td>这利用了 <span class="math inline">\(\rho(B)\to0\implies B^k\to0\ (k\to\infty)\)</span></td></tr></tbody></table><p>下面把 <span class="math inline">\(A\)</span> 写成严格下三角, 对角和严格上三角阵的和: <span class="math inline">\(A=L+D+U\)</span>.</p><h2 id="jacobi-迭代-md-n-lu">Jacobi 迭代 <span class="math inline">\(M=D\)</span>, <span class="math inline">\(N=-(L+U)\)</span></h2><p><span class="math display">\[    Dx^{k+1}=-(L+U)x^{(k)}+b\]</span></p><table><colgroup><col style="width: 100%"></colgroup><thead><tr class="header"><th><strong>定理: <span class="math inline">\(A\)</span> 按行主对角严格占优时 Jacobi 方法对任意初值 <span class="math inline">\(x^{(0)}\)</span> 收敛.</strong></th></tr></thead><tbody><tr class="odd"><td><span class="math inline">\(\displaystyle\rho(M^{-1}N)=\rho(D^{-1}(L+U))\leq\|D^{-1}(L+U)\|_\infty=\max_i\sum_{j\ne i}\left|\frac{a_{ij}}{a_{ii}}\right|&lt;1\)</span></td></tr></tbody></table><h2 id="gauss-seidel-迭代-mdl-n-u">Gauss-Seidel 迭代 <span class="math inline">\(M=D+L\)</span>, <span class="math inline">\(N=-U\)</span></h2><p><span class="math display">\[(D+L)x^{(k+1)}=-Ux^{(k)}+b\]</span></p><table><thead><tr class="header"><th><strong>定理: <span class="math inline">\(A\)</span> 正定时 Gauss-Seidel 方法对任意初值 <span class="math inline">\(x^{(0)}\)</span> 收敛.</strong></th></tr></thead><tbody></tbody></table><h2 id="逐次超松弛迭代-successive-overrelaxation">逐次超松弛迭代 (Successive Overrelaxation)</h2><p>取</p><p><span class="math display">\[M=\frac{1}{\omega} D+L, \quad N=\frac{1-\omega}{\omega} D-U\]</span> 就得到了 <span class="math display">\[(D+\omega L) x^{(k+1)}=\left((1-\omega) D-\omega U\right) x^{(k)}+\omega b.\]</span> 其中 <span class="math inline">\(\omega=1\)</span> 时就是 Gauss-Seidel 迭代.</p><table><colgroup><col style="width: 100%"></colgroup><thead><tr class="header"><th><strong>定理: SOR 方法中 <span class="math inline">\(\rho(M^{-1}N)\geq|\omega-1|\)</span>, 所以收敛时必有 <span class="math inline">\(0&lt;\omega&lt;2\)</span>.</strong></th></tr></thead><tbody><tr class="odd"><td><span class="math inline">\(\displaystyle\det(M^{-1}N)=\det\left((D+\omega L)^{-1}\left((1-\omega D)-\omega U\right)\right)=\det(D^{-1})\det\left((1-\omega)D\right)=(1-\omega)^n\)</span></td></tr><tr class="even"><td>于是 <span class="math inline">\(\lambda_1\cdots\lambda_n=(1-\omega)^n\)</span>, 那么 <span class="math inline">\(\max_i|\lambda_i|\geq |1-\omega|\)</span></td></tr></tbody></table><p>可以证明对正定矩阵 SOR 对所有 <span class="math inline">\(0&lt;\omega&lt;2\)</span> 收敛.</p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 数值分析 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>曲线积分和曲面积分</title>
      <link href="/posts/21677/"/>
      <url>/posts/21677/</url>
      
        <content type="html"><![CDATA[<h2 id="曲线积分">曲线积分</h2><h3 id="第一型曲线积分-displaystyleint_gamma-fbmrd-s">第一型曲线积分 <span class="math inline">\(\displaystyle\int_\Gamma f(\bm{r})\d s\)</span></h3><ol type="1"><li>求 <span class="math inline">\(\Gamma\)</span> 的向量参数方程 <span class="math inline">\(\bm{r}=\bm{r}(t)\)</span></li><li>计算弧元 <span class="math inline">\(\d s=\|\bm{r}'(t)\|\d t\)</span></li><li>计算定积分 <span class="math inline">\(\displaystyle\int_\alpha^\beta f(\bm{r}(t))\|\bm{r}'(t)\|\d t\)</span></li></ol><span id="more"></span><h3 id="第二型曲线积分-displaystyleint_gamma-bmfbmrcdotdbmr">第二型曲线积分 <span class="math inline">\(\displaystyle\int_\Gamma \bm{f}(\bm{r})\cdot\d\bm{r}\)</span></h3><p>笛卡尔坐标系下可以写作 <span class="math display">\[\int_\Gamma P\d x+Q\d y+R\d z\]</span></p><p>Green 公式 (第二型曲线积分 <span class="math inline">\(\to\)</span> 面积分) <span class="math display">\[\int_{\partial\Omega}P\d x+Q\d y=\iint_\Omega\left(Q_x'-P_y'\right)\d x\d y\]</span></p><h2 id="曲面积分">曲面积分</h2><h3 id="第一型曲面积分-displaystyleint_sigma-fdsigma">第一型曲面积分 <span class="math inline">\(\displaystyle\int_\Sigma f\d\sigma\)</span></h3><p><span class="math display">\[\int_\Sigma f\d\sigma=\iint_D f(x,y,\phi(x,y))\sqrt{1+\left({\partial\phi\over\partial x}\right)^2+\left({\partial\phi\over\partial y}\right)^2}\d x\d y\]</span></p><blockquote><p>🌰 <span class="math inline">\(\displaystyle\int_\Sigma (x+y+z)\d\sigma\)</span>, 其中曲面是上半球面 <span class="math inline">\(x^2+y^2+z^2=a^2\ (z\geq0)\)</span>.</p><p><span class="math inline">\(z=\sqrt{a^2-x^2-y^2},\ z_x'=-\dfrac{x}{z},\ z_y'=-\dfrac{y}{z}\)</span> <span class="math inline">\(\displaystyle\d\sigma=\sqrt{1+(z_x')^2+(z_y')^2}\d x\d y=\sqrt{1+{x^2+y^2\over z^2}}\d x\d y=\dfrac az\d x\d y\)</span></p><p>由对称性, 原式 <span class="math inline">\(=\)</span> <span class="math display">\[\int_\Sigma z\d\sigma=\int_{x^2+y^2\leq a^2} z\cdot\frac az\d x\d y=\pi a^3\]</span></p></blockquote><h3 id="第二型曲面积分-displaystyle-int_sigmabmfcdot-dbmsigmaint_sigmabmfcdot-bmndsigma">第二型曲面积分 <span class="math inline">\(\displaystyle \int_\Sigma\bm{f}\cdot \d\bm{\sigma}=\int_\Sigma\bm{f}\cdot \bm{n}\d\sigma\)</span></h3><p><span class="math display">\[\iint_\Sigma R\d x\d y=\pm\iint_D R(x,y,f(x,y))\d x\d y\]</span></p><blockquote><p>🌰 <span class="math inline">\(\displaystyle\bm{f}=(x,y,z)\)</span>, <span class="math inline">\(\Sigma\)</span> 是中心在原点, 半径为 <span class="math inline">\(a\)</span> 的球面, 外法线正向.</p><p><span class="math inline">\(\displaystyle\bm{n}=\left(\frac xa, \frac ya, \frac za\right)\)</span></p><p>于是 <span class="math display">\[\begin{aligned}\int_\Sigma\bm{f}\cdot\bm{n}\d\sigma&amp;=\frac1a\int_\Sigma (x^2+y^2+z^2)\d\sigma\\&amp;=a\int_\Sigma\d\sigma\\&amp;=a\cdot4\pi a^2\\&amp;=4a^3\end{aligned}\]</span></p></blockquote><p>Gauss 公式 (第二型曲面积分 <span class="math inline">\(\to\)</span> 体积分)</p><p><span class="math display">\[\iint_{\partial\Omega}P\d y\d z+Q\d z\d x+R\d x\d y=\iiint_{\Omega}\left(P_x'+Q_y'+R_z'\right)\d x\d y\d z\]</span></p><p>Stokes 公式 (第二型曲线积分 <span class="math inline">\(\to\)</span> 第二型曲面积分)</p><p><span class="math display">\[\int_{\partial\Sigma}P\d x+Q\d y+R\d z=\iint_\Sigma\begin{vmatrix}    \d y\d z &amp; \d z\d x &amp; \d x\d y\\    {\partial\over\partial x} &amp; {\partial\over\partial y} &amp; {\partial\over\partial z}\\    P &amp; Q &amp; R\end{vmatrix}\]</span> 或</p><p><span class="math display">\[\int_{\partial\Sigma}P\d x+Q\d y+R\d z=\iint_\Sigma\begin{vmatrix}    \cos\alpha &amp; \cos\beta &amp; \cos\gamma\\    {\partial\over\partial x} &amp; {\partial\over\partial y} &amp; {\partial\over\partial z}\\    P &amp; Q &amp; R\end{vmatrix}\d\sigma,\]</span> 其中 <span class="math inline">\((\cos\alpha, \cos\beta, \cos\gamma)\)</span> 是曲面 <span class="math inline">\(\Sigma\)</span> 的单位正<strong>法向量</strong>.</p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 微积分 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>拉格朗日插值</title>
      <link href="/posts/17585/"/>
      <url>/posts/17585/</url>
      
        <content type="html"><![CDATA[<p><span class="math display">\[p(x)=\sum_{k=0}^n y_kl_k(x)\]</span></p><h2 id="基函数">基函数</h2><p>给定点 <span class="math inline">\(x_0,\ldots,x_n\)</span>. 问题归结于寻找<strong>基函数</strong> <span class="math display">\[l_k(x_j)=\begin{cases}    1\quad j=k\\    0\quad j\ne k\end{cases},\]</span> 因为插值多项式可以写成它们的线性组合.</p><span id="more"></span><p>根据零点分布可以设 <span class="math display">\[l_k(x)=c\prod_{j\ne k}(x-x_j),\]</span> 代入 <span class="math inline">\(x_k\)</span> 得到</p><p><span class="math display">\[1=l_k(x_k)=c\prod_{j\ne k}(x_k-x_j),\]</span></p><p>于是 <span class="math inline">\(c=\dfrac{1}{\prod_{j\ne k}(x_k-x_j)}\)</span>. 这就得到了 <span class="math display">\[l_k(x)=\frac{\prod_{j\ne k}(x-x_j)}{\prod_{j\ne k}(x_k-x_j)}.\]</span></p><p><em>注: 这个 <span class="math inline">\(c\)</span> 实际上是 Barycentric 权重, 即后面定义的 <span class="math inline">\(\lambda_k\)</span>.</em></p><p>它实际上就是一个特殊的多项式. 比如这是给定 <span class="math inline">\(x_{0}:x_4=-2:2\)</span>, 在 <span class="math inline">\(x_3\)</span> 处取 <span class="math inline">\(1\)</span> 的基函数 <span class="math display">\[l_3(x)=\frac{(x+2)(x+1)x(x-2)}{(1+2)(1+1)\cdot1\cdot(1-2)}\]</span></p><p><img src="/file/l_basis.svg"></p><p>定义节点函数 <span class="math display">\[l(x)=\prod_{k=0}^n(x-x_k),\]</span> 可以得到基函数 <span class="math display">\[l_j(x)={l(x)\over l'(x_j)(x-x_j)}\]</span></p><h2 id="barycentric-插值公式">Barycentric 插值公式</h2><p><span class="math display">\[p(x)={\sum_{k=0}^n{\lambda_k y_k\over x-x_k}\over\sum_{k=0}^n{\lambda_k\over x-x_k}},\]</span> 其中 <span class="math display">\[\lambda_k={1\over\prod_{j\ne k}(x_k-x_j)}\]</span></p><h2 id="误差">误差</h2><p><span class="math inline">\(f\in C^{n+1}([a,b])\)</span>时 <span class="math display">\[f(x)-p(x)={f^{(n+1)}(\xi)\over (n+1)!}l(x),\]</span> 其中 <span class="math inline">\(\xi\in(a,b)\)</span> 与 <span class="math inline">\(x\)</span> 有关.</p><hr><p><span class="math inline">\(f\)</span> 在包含节点的区域 <span class="math inline">\(\Omega\)</span> 上解析时</p><p><span class="math display">\[p(x)={1\over 2\pi i}\int_\Gamma{f(t)(l(t)-l(x))\over l(t)(t-x)}\d x\]</span> <span class="math display">\[f(x)-p(x)={1\over 2\pi i}\int_\Gamma {l(x)\over l(t)}{f(t)\over t-x}\d t\]</span></p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 数值分析 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>最小二乘法</title>
      <link href="/posts/36991/"/>
      <url>/posts/36991/</url>
      
        <content type="html"><![CDATA[<p><span class="math display">\[\min\|Ax-b\|_2\]</span> 其中 <span class="math inline">\(A\in\R^{m\times n}\)</span>, <span class="math inline">\(x\in\R^n\)</span>, <span class="math inline">\(b\in\R^m.\)</span> 这个的问题的情境是 <span class="math inline">\(m\geq n\)</span>, 也就是一个过度约束的问题 (<span class="math inline">\(b\)</span> 不在 <span class="math inline">\(A\)</span> 的值域中).</p><p>等价于解正规方程: <span class="math display">\[A^TAx=A^Tb,\]</span> 当且仅当 <span class="math inline">\(A\)</span> 满秩时有唯一解 <span class="math inline">\(x=(A^TA)^{-1}A^Tb.\)</span> 可以利用伪逆写成 <span class="math inline">\(x=A^\dagger b.\)</span></p><p>从几何的角度, 又可以理解为把 <span class="math inline">\(b\)</span> 利用正交投影算子投影到 <span class="math inline">\(A\)</span> 的值域: <span class="math inline">\(Pb=Ax\)</span>.</p><p>下面总结几种常用算法.</p><span id="more"></span><h2 id="解正规方程">解正规方程</h2><p>利用 Cholesky 分解, 解方程组 <span class="math inline">\(R^TRx=A^Tb\)</span>.</p><blockquote><ol type="1"><li>计算矩阵 <span class="math inline">\(A^TA\)</span> 和向量 <span class="math inline">\(A^Tb\)</span></li><li>计算 <span class="math inline">\(A^TA\)</span> 的 Cholesky 分解: <span class="math inline">\(A^TA=R^TR\)</span></li><li>解方程组 <span class="math inline">\(R^Ty=A^Tb\)</span></li><li>解方程组 <span class="math inline">\(Rx=y\)</span></li></ol></blockquote><p><span class="math inline">\(A^T\in\R^{n\times m}\)</span>, <span class="math inline">\(A\in\R^{m\times n}\)</span>, <span class="math inline">\(A^TA\)</span> 正常需要 <span class="math inline">\(2mn^2\)</span> 次运算, 但可以利用对称性减少为 <span class="math inline">\(mn^2\)</span>.</p><p><span class="math inline">\(n\times n\)</span> 正定阵的 Cholesky 分解需要 <span class="math inline">\(\dfrac{n^3}{3}\)</span> 次运算.</p><p>共需要 <span class="math inline">\(mn^2+\dfrac13 n^3\)</span> 次运算.</p><h2 id="qr-分解">QR 分解</h2><ul><li><p>记 <span class="math inline">\(A\)</span> 的 thin QR <span class="math display">\[A=QR\]</span> 与 full QR</p><p><span class="math display">\[A=\begin{bmatrix}    Q\ Q_{\perp}\end{bmatrix}\begin{bmatrix}    R\\0\end{bmatrix}.\]</span> 于是 <span class="math display">\[\begin{aligned}\|Ax-b\|_2&amp;=\left\lVert\begin{bmatrix}  Q^T\\Q_\perp^T\end{bmatrix}(Ax-b)\right\rVert_2\\&amp;=\left\lVert\begin{bmatrix}  Q^T\\Q_\perp^T\end{bmatrix}(QRx-b)\right\rVert_2\\&amp;=\left\lVert\begin{bmatrix}  R\\0\end{bmatrix}x-\begin{bmatrix}  Q^Tb\\Q_\perp^Tb\end{bmatrix}\right\rVert_2\\\end{aligned}\]</span> 当 <span class="math inline">\(Rx=Q^Tb\)</span> 即 <span class="math inline">\(x=R^{-1}Q^Tb\)</span> 时取得最小值, 此时可见 <span class="math inline">\(A^\dagger=R^{-1}Q.\)</span></p></li><li><p>从几何的角度, <span class="math inline">\(A=QR\)</span> 给出了投影算子 <span class="math inline">\(P\)</span> 的基: <span class="math inline">\(P=QQ^T.\)</span> 于是 <span class="math inline">\(QRx=QQ^Tb\)</span>, 也得到了 <span class="math inline">\(x=R^{-1}Q^Tb.\)</span></p></li><li><p>从正规方程的角度,</p><p><span class="math display">\[A^TAx=A^Tb\implies R^TQ^TQRx=R^TQ^Tb\implies Rx=Q^Tb,\]</span> 殊途同归.</p></li></ul><blockquote><ol type="1"><li>计算 reduced QR 分解 <span class="math inline">\(A=QR\)</span></li><li>计算 <span class="math inline">\(Q^Tb\)</span></li><li>解方程组 <span class="math inline">\(Rx=Q^Tb\)</span></li></ol></blockquote><p>主要计算量在于 QR 分解, 它需要 <span class="math inline">\(2mn^2-\dfrac{2}{3}n^3\)</span> 次运算.</p><h2 id="svd">SVD</h2><p><span class="math inline">\(A=U\Sigma V^T\)</span> 也给出了 <span class="math inline">\(P\)</span> 的基: <span class="math inline">\(P=UU^T\)</span>, 根据 <span class="math inline">\(U\Sigma V^Tx=UU^Tb\)</span> 可以得到 <span class="math inline">\(x=V\Sigma^{-1}U^Tb\)</span>. 此时也得到了 <span class="math inline">\(A^\dagger=V\Sigma^{-1}U^T.\)</span></p><blockquote><ol type="1"><li>计算 reduced SVD <span class="math inline">\(A=U\Sigma V^T\)</span></li><li>计算 <span class="math inline">\(U^Tb\)</span></li><li>解方程组 <span class="math inline">\(\Sigma y=U^Tb\)</span></li><li>计算 <span class="math inline">\(x=Vy\)</span></li></ol></blockquote><p>其中的方程组比 QR 方法的三角型更容易解, 是对角型的.</p><hr><p>同样可以利用正规方程: <span class="math display">\[A^TAx=A^Tb\implies V\Sigma^TU^TU\Sigma V^Tx=V\Sigma^T U^Tb\implies \Sigma V^Tx=U^Tb\]</span></p><p>计算量主要在于 SVD, 当 <span class="math inline">\(m\gg n\)</span> 时和 QR 差不多, 当 <span class="math inline">\(m\approx n\)</span> 时计算量更大. 典型估计是 <span class="math inline">\(2mn^2+11n^3\)</span> 次运算.</p><h2 id="伪逆">伪逆</h2><ul><li><span class="math inline">\(A\)</span> 列满秩: <span class="math inline">\(A^\dagger=(A^TA)^{-1}A^T\)</span></li><li><span class="math inline">\(A\)</span> 行满秩: <span class="math inline">\(A^\dagger=A^T(AA^T)^{-1}\)</span></li></ul>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 数值分析 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Hesse 矩阵与Jacobi 矩阵</title>
      <link href="/posts/44547/"/>
      <url>/posts/44547/</url>
      
        <content type="html"><![CDATA[<p>Hessian 是<strong>数量场</strong>的二阶导: <span class="math display">\[H_{i,j}={\partial f\over\partial x_i\partial x_j}\]</span></p><p>Jacobian 是<strong>向量场</strong>的一阶导: <span class="math display">\[J_{i,j}={\partial\bm{f_i}\over\partial x_j}\]</span></p><p>二者的关系: Hessian 是数量场梯度的 Jacobian, 即 <span class="math inline">\(H(f)=J(\nabla f)\)</span>.</p><blockquote><p>🌰 <span class="math inline">\(f(x,y)=x^2+y^2\)</span></p><ul><li><span class="math inline">\(H(f)=\begin{bmatrix}2&amp;0\\0&amp;2\end{bmatrix}\)</span></li><li><span class="math inline">\(J(\nabla f)=J\left(\begin{bmatrix} 2x\\2y \end{bmatrix}\right)=\begin{bmatrix}2&amp;0\\0&amp;2\end{bmatrix}\)</span></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 微积分 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>泛函基础</title>
      <link href="/posts/64221/"/>
      <url>/posts/64221/</url>
      
        <content type="html"><![CDATA[<h2 id="banach-空间">Banach 空间</h2><p>一个完备的赋范空间.</p><blockquote><p>🌰 欧式空间装备了 <span class="math inline">\(p\)</span> 范数.</p></blockquote><span id="more"></span><h2 id="hilbert-空间">Hilbert 空间</h2><p>一个完备的内积空间.</p><blockquote><p>🌰 欧式空间装备了 <span class="math inline">\((u,v)_{\R^n}=u^Tv\)</span>.</p><p>🌰 平方可积的函数空间装备了<span class="math display">\[(u,v)_{L^2(\Omega)}=\int_\Omega uv\d x\]</span></p></blockquote><ul><li><span class="math inline">\(H^1(\Omega)\)</span>: 平方可积, 导数平方可积的函数空间, 装备了 <span class="math display">\[(u,v)_{H^1(\Omega)}=\int_\Omega uv+\nabla u\cdot \nabla v\d x\]</span></li><li><span class="math inline">\(H_0^1(\Omega)\)</span>: 平方可积, 边界为0, 导数平方可积的函数空间, 装备了 <span class="math display">\[(u,v)_{H_0^1(\Omega)}=\int_\Omega \nabla u\cdot \nabla v\d x\]</span></li><li><span class="math inline">\(H(\mathrm{div}, \Omega)\)</span>: 平方可积, 散度平方可积的(向量值)函数空间, 装备了 <span class="math display">\[(u,v)_{H(\mathrm{div,\Omega})}=\int_\Omega u\cdot v+\nabla\cdot u\nabla\cdot v\d x\]</span></li><li><span class="math inline">\(H(\mathrm{curl}, \Omega)\)</span>: 平方可积, 旋度平方可积的(向量值)函数空间, 装备了 <span class="math display">\[(u,v)_{H(\mathrm{curl,\Omega})}=\int_\Omega u\cdot v+\nabla\times u\cdot\nabla\times v\d x\]</span></li></ul><h3 id="线性泛函">线性泛函</h3><p>一个映射 <span class="math inline">\(j\colon X\to\R\)</span> (把 Hilbert 空间中的函数变成数), 满足 <span class="math display">\[j(\alpha u+\beta v)=\alpha j(u)+\beta j(v)\]</span></p><blockquote><p>🌰 在给定区间上积分; 在给定点取值; 在给定点求方向导数</p></blockquote><p>有界线性泛函: 存在 <span class="math inline">\(L\in[0,\infty)\)</span> 使得 <span class="math display">\[|j(u)|\leq L\|u\|_X,\quad\forall u\in X.\]</span></p><p><strong>引理: 有界性<span class="math inline">\(\iff\)</span>连续性.</strong></p><h3 id="对偶空间">对偶空间</h3><p>一个 Hilbert 空间 <span class="math inline">\(X\)</span> 的对偶空间 <span class="math inline">\(X^*\)</span> 是所有有界线性泛函的集合, 装备了范数<span class="math display">\[\|j\|_{X^*}=\sup_{\|u\|_X=1}|j(u)|,\]</span> 也是一个 Hilbert 空间. 根据定义, <span class="math display">\[|j(u)|\leq \|j\|_{X^*}\|u\|_X.\]</span> <span class="math inline">\(j\)</span> 对 <span class="math inline">\(u\)</span> 的<strong>作用</strong>: <span class="math inline">\(\langle j,u\rangle=j(u)\)</span></p><blockquote><p>🌰 给定 <span class="math inline">\(f\)</span>, <span class="math inline">\(F(v)=\int_\Omega fv\d x\)</span> 是 <span class="math inline">\(H_0^1(\Omega)\)</span> 的对偶空间中的元素.</p></blockquote><p><strong>引理: <span class="math inline">\(V\subset W\implies W^*\subset V^*\)</span>.</strong></p><h3 id="riesz-表示定理">Riesz 表示定理</h3><p><span class="math inline">\(X^*\)</span> 上的有界线性泛函 <span class="math inline">\(j\)</span> 可以被原空间 <span class="math inline">\(X\)</span> 上的元素 <span class="math inline">\(g\)</span> <strong>唯一</strong>表示: <span class="math display">\[\langle j,u\rangle=(g,u).\]</span> 且范数相同:<span class="math display">\[\|j\|_{X^*}=\|g\|_X.\]</span> 这是说, 任何有界线性泛函的作用都是某个内积.</p><blockquote><p>🌰 <span class="math inline">\(L^2(\Omega)\)</span> 上的有界线性泛函 <span class="math inline">\(j(v)=\int_\Omega v\d x\)</span>, 实际上就是 <span class="math inline">\(v\)</span> 和常函数 <span class="math inline">\(1\)</span> 的内积.</p></blockquote><p>Rieze 映射 <span class="math inline">\(\mathcal{R}\colon X^*\to X\)</span>, <span class="math inline">\(j\mapsto g\)</span> 是一个保距同构. 实际上根据定义, <span class="math display">\[(\mathcal{R}j,v)=j(v).\]</span></p><h2 id="lebesgue-空间">Lebesgue 空间</h2><p>Lebesgue <span class="math inline">\(p\)</span> 范数: <span class="math display">\[\|u\|_{L^p(\Omega)}=\left(\int_\Omega|u|^p\d x\right)^{1\over p}\]</span></p><p><span class="math display">\[\|u\|_{L^\infty(\Omega)}=\mathrm{ess\ sup}\{|u(x)|\colon x\in\Omega\}\]</span></p><p>Lebesgue 空间: <span class="math display">\[L^p(\Omega)=\{u\colon\Omega\to\R\colon \|u\|_{L^p(\Omega)}&lt;\infty\}\]</span></p><p><span class="math inline">\(p\)</span> 越大, 越不能容忍奇点处的发散.</p><blockquote><p>取 <span class="math inline">\(\Omega=(0,1)\)</span>, 那么 <span class="math inline">\(L^1\)</span> 接受 <span class="math inline">\({1\over x^{0.99}}\)</span> 而不接受 <span class="math inline">\(\frac 1x\)</span>. 前者在 0 处的发散率慢一些.</p><p><span class="math inline">\(L^2\)</span> 接受 <span class="math inline">\({1\over x^{0.4999}}\)</span>, 而不接受 <span class="math inline">\(1\over\sqrt x\)</span>.</p></blockquote><p><em>注: <span class="math inline">\(L^p(\Omega)\)</span> 中的元素实际上是函数的等价类, 因为 Lebesgue 积分不区分几乎处处相等的函数.</em></p><p><strong>定理: <span class="math inline">\(p\in[1,\infty]\)</span> 的 Lebesgue 空间都是 Banach 空间, <span class="math inline">\(p=2\)</span> 时也是 Hilbert 空间.</strong></p><h2 id="sobolev-空间">Sobolev 空间</h2><h3 id="弱导数">弱导数</h3><p>这是利用分部积分做的推广, <span class="math inline">\(g\)</span> 是 <span class="math inline">\(f_i'\)</span> 的弱化. 其中 <span class="math inline">\(\phi\)</span> 是任意的测试函数. <span class="math display">\[\int_\Omega g\phi\d x=-\int_\Omega f{\partial\phi\over\partial x_i}\d x,\ \forall\phi\in C_0^\infty(\Omega).\]</span> 其中 <span class="math inline">\(f,g\)</span> 在 <span class="math inline">\(L_{\text{loc}}^1(\Omega)\)</span> 中, 这指的是在 <span class="math inline">\(\Omega^\circ\)</span> 中的任意紧子集上 <span class="math inline">\(L^1\)</span> 可积. 这个集合包括 <span class="math inline">\(L^1(\Omega)\)</span> 和 <span class="math inline">\(C^0(\Omega)\)</span>.</p><p>弱导数在不区分零测集时唯一.</p><blockquote><p>任何<strong>分段可导</strong>的<strong>连续</strong>函数都是弱可导的.</p></blockquote><h3 id="多维指标">多维指标</h3><p>如果 <span class="math inline">\(\alpha=(\alpha_1,\ldots,\alpha_n)\)</span>, 那么 <span class="math display">\[\phi^{(\alpha)}=\left(\partial_{x_1}\right)^{\alpha_1}\cdots(\partial_{x_n})^{\alpha_n}\phi.\]</span> 定义 <span class="math inline">\(|\alpha|=\alpha_1+\cdots+\alpha_n\)</span>.</p><h3 id="高阶弱导数">高阶弱导数</h3><p>推广 <span class="math inline">\(f^{(\alpha)}\)</span> 为 <span class="math inline">\(D^\alpha f\)</span>, 需要存在一个 <span class="math inline">\(g\)</span>: <span class="math display">\[\int_{\Omega}g\phi\d x=(-1)^{|\alpha|}\int_{\Omega}fg^{(\alpha)}\d x, \quad\forall\phi\in C_0^\infty(\Omega).\]</span></p><h3 id="sobolev-范数">Sobolev 范数</h3><p><span class="math display">\[\|f\|_{W_p^k(\Omega)}=\left(\sum_{|\alpha|\leq k}\|D^\alpha f\|_{L^p(\Omega)}^p\right)^\frac1p\]</span> <span class="math display">\[\|f\|_{W_\infty^k(\Omega)}=\max_{|\alpha|\leq k}\|D^\alpha f\|_{L^\infty(\Omega)}\]</span></p><h3 id="sobolev-空间-1">Sobolev 空间</h3><p><span class="math display">\[W_p^k(\Omega)=\{f\in L_{\text{loc}}^1(\Omega)\colon \|f\|_{W_p^k(\Omega)}&lt;\infty\}\]</span> 是一个 Banach 空间. <span class="math display">\[H^k(\Omega)=W_2^k(\Omega)\]</span> 是 Hilbert 空间.</p><p>它的范数 <span class="math display">\[\|f\|_{H^k}^2=\sum_{|\alpha|\leq k}\|D^\alpha f\|_{L^2}^2\]</span> 比如 <span class="math inline">\(\|f\|_{H^1}^2=\|f\|_{L^2}^2+\|f'\|_{L^2}^2\)</span>.</p><blockquote><p><span class="math inline">\(W_p^0(\Omega)=L^p(\Omega)\)</span> 不要求导数.</p></blockquote><h3 id="sobolev-不等式">Sobolev 不等式</h3><p>如果有足够的弱导数, 那么函数连续有界:</p><p><span class="math inline">\(\Omega\in\R^n\)</span> 是 Lipschitz 区域, <span class="math inline">\(k\)</span> 是正整数, <span class="math inline">\(p\geq1\)</span>. 若有 <span class="math display">\[\begin{gathered}k\geq n,\quad p=1\\k&gt;n/p,\quad p&gt;1\end{gathered}\]</span> 那么存在常数 <span class="math inline">\(C\)</span> 使得 <span class="math inline">\(\forall u\in W_p^k(\Omega)\)</span>, <span class="math display">\[\|u\|_{L^\infty(\Omega)}\leq C\|u\|_{W_p^k(\Omega)}.\]</span> <span class="math inline">\(u\)</span> 的等价类中有一个连续函数.</p><h4 id="boxedn1"><span class="math inline">\(\boxed{n=1}\)</span></h4><p>只要 <span class="math inline">\(k\geq1\)</span>, 换言之只要有一阶弱导数, 就连续.</p><p><strong>定理: 有界区域上的分段光滑函数在 <span class="math inline">\(H^1\)</span> 中 <span class="math inline">\(\iff\)</span> 连续.</strong></p><p><span class="math display">\[H^1\subset C\]</span></p><h4 id="boxedn2"><span class="math inline">\(\boxed{n=2}\)</span></h4><p><span class="math display">\[W_1^1(\Omega)\not\subset C(\Omega),\quad W_1^2(\Omega)\subset C(\Omega)\]</span> <span class="math display">\[H^1\not\subset C,\quad H^2\subset C\]</span></p><h4 id="boxedn3"><span class="math inline">\(\boxed{n=3}\)</span></h4><p><span class="math display">\[W_1^2\not\subset C,\quad W_1^3\subset C\]</span> <span class="math display">\[H^1\not\subset C,\quad H^2\subset C\]</span></p><h3 id="sobolev-嵌入">Sobolev 嵌入</h3><p><span class="math display">\[W_p^1\subseteq L^{p^*},\quad\text{其中 }{1\over p^*}=\frac1p-\frac1n.\]</span></p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 泛函分析 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>极坐标和球坐标换元</title>
      <link href="/posts/26639/"/>
      <url>/posts/26639/</url>
      
        <content type="html"><![CDATA[<p><span class="math display">\[\iint_D F(x,y)\d x\d y=\iint_\Delta F(r\cos\theta,r\sin\theta)r\d r\d\theta\]</span></p><p><span class="math display">\[\iiint_D F(x,y,z)\d x\d y\d z=\iiint_\Delta F(r\sin\theta\cos\phi,r\sin\theta\sin\phi,r\cos\theta)r^2\sin\theta\d r\d \theta\d \phi\]</span></p><p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Kugelkoord-lokale-Basis-s.svg/480px-Kugelkoord-lokale-Basis-s.svg.png" width="250" height="250"></p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 微积分 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/posts/1/"/>
      <url>/posts/1/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 微积分 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>高维分部积分</title>
      <link href="/posts/22001/"/>
      <url>/posts/22001/</url>
      
        <content type="html"><![CDATA[<p><span class="math display">\[\boxed{\int_\Omega \nabla\cdot \bm u v\d x=\int_{\partial\Omega}v\boldsymbol{u}\cdot\boldsymbol{n}\d s-\int_\Omega\nabla v\cdot\boldsymbol{u}\d x}\]</span></p><p><span class="math display">\[\boxed{\int_\Omega(\nabla\times\bm u)\cdot\bm v\d x=\int_\Omega(\nabla\times\bm v)\cdot \bm u\d x+\int_{\partial\Omega}(\bm u\times \bm v)\cdot\bm n\d s}\]</span></p><span id="more"></span><p>特殊情况 (Green's first identity):</p><p><span class="math display">\[\int_\Omega\nabla u\cdot\nabla v\d x=\int_{\partial\Omega}v\nabla u\cdot\boldsymbol{n}\d s-\int_\Omega v\nabla^2u\d x\]</span></p><p><span class="math display">\[\int_\Omega(\nabla\times\nabla\times\bm u)\cdot\bm v\d x=\int_\Omega (\nabla\times \bm u)\cdot(\nabla\times\bm v)\d x-\int_{\partial\Omega}(\bm v\times\nabla\times\bm u)\cdot n\d s\]</span></p><hr><p><span class="math inline">\(\nabla\)</span> 的性质:</p><p><span class="math display">\[\begin{equation}\label{eq:div}\nabla\cdot(v\boldsymbol{u})=v\nabla\cdot \boldsymbol{u}+\nabla v\cdot \boldsymbol{u}\end{equation}\]</span></p><p><span class="math display">\[\begin{equation}\label{eq:div-cross}\nabla\cdot(\bm {u}\times \bm{v})=(\nabla\times \bm u)\cdot \bm v-\bm u\cdot(\nabla\times \bm v)\end{equation}\]</span></p><p>对 <span class="math inline">\((\ref{eq:div})\)</span> 和 <span class="math inline">\((\ref{eq:div-cross})\)</span> 两边积分即得前两个式子. 其中用到了散度定理.</p><p>在 <span class="math inline">\((\ref{eq:div-cross})\)</span> 中取 <span class="math inline">\(\bm v\)</span> 和 <span class="math inline">\(\nabla\times\bm u\)</span> 得到 <span class="math display">\[\nabla\cdot(\bm v\times\nabla\times \bm u)=(\nabla\times\bm v)\cdot(\nabla\times\bm u)-\bm v\cdot(\nabla\times\nabla\times\bm u),\]</span> 两边积分即得 <span class="math display">\[\int_\Omega(\nabla\times\nabla\times\bm u)\cdot\bm v\d x=\int_\Omega (\nabla\times \bm u)\cdot(\nabla\times\bm v)\d x-\int_{\partial\Omega}(\bm v\times\nabla\times\bm u)\cdot \bm n\d s.\]</span></p><p>其中根据混合积的性质, 后一项等于 <span class="math display">\[\begin{align*}\int_{\partial\Omega}\bm n\cdot(\bm v\times\nabla\times\bm u)\d s=\int_{\partial\Omega}\bm v\cdot(\nabla\times\bm u\times \bm n)\d s\end{align*}.\]</span></p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 微积分 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>控制收敛定理 (DCT)</title>
      <link href="/posts/34980/"/>
      <url>/posts/34980/</url>
      
        <content type="html"><![CDATA[<p><span class="math display">\[\lim_{n\to\infty}\int_S f_n \,d\mu=\int_S f\,d\mu\]</span></p><span id="more"></span><p>条件:</p><ul><li><span class="math inline">\(f_n\)</span> 可测, 逐点收敛到 <span class="math inline">\(f\)</span>.</li><li><span class="math inline">\(f_n\)</span> 被可积函数 <span class="math inline">\(g\)</span> 控制: <span class="math inline">\(|f_n(x)|\leq g(x)\)</span>, 且 <span class="math inline">\(\int_S|g|\,d\mu&lt;\infty.\)</span></li></ul><p>结论:</p><ul><li><span class="math inline">\(f\)</span> 可积</li><li><span class="math inline">\(\lim_{n\to\infty}\int_S|f_n-f|\,d\mu=0\)</span></li><li><span class="math inline">\(\lim_{n\to\infty}\int_S f_n \,d\mu=\int_S f\,d\mu\)</span></li></ul>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 微积分 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>分块矩阵的行列式</title>
      <link href="/posts/42453/"/>
      <url>/posts/42453/</url>
      
        <content type="html"><![CDATA[<h2 id="结论">结论</h2><p>设分块矩阵 <span class="math inline">\(\Gamma=\begin{pmatrix}A&amp;B\\C&amp;D\end{pmatrix}\)</span>, 那么</p><ul><li><span class="math inline">\(A\)</span> 可逆时, <span class="math inline">\(\det(\Gamma)=\det(A)\det(D-CA^{-1}B)\)</span></li><li><span class="math inline">\(D\)</span> 可逆时, <span class="math inline">\(\det(\Gamma)=\det(A-BD^{-1}C)\det(D)\)</span></li></ul><span id="more"></span><h2 id="特殊情况">特殊情况</h2><ul><li><p><span class="math inline">\(\begin{equation}\det\begin{pmatrix}  A&amp;0\\ C&amp;D \end{pmatrix}=\det(A)\det(D)\label{lower}\end{equation}\)</span></p></li><li><p><span class="math inline">\(\begin{equation}\label{upper}\det\begin{pmatrix}  A&amp;B\\ 0&amp;D \end{pmatrix}=\det(A)\det(D)\end{equation}\)</span></p></li><li><p><span class="math inline">\(\begin{equation}\label{diag}\det\begin{pmatrix}  A&amp;0\\ 0&amp;D \end{pmatrix}=\det(A)\det(D)\end{equation}\)</span></p></li><li><p><span class="math inline">\(\begin{equation}\label{commute}\text{当 $CD=DC$ 时, }\det(\Gamma)=\det(AD-BC)\end{equation}\)</span></p></li><li><p><span class="math inline">\(\begin{equation}\label{AB}\det\begin{pmatrix} A&amp;B\\B&amp;A \end{pmatrix}=\det(A+B)\det(A-B)\end{equation}\)</span></p></li></ul><h2 id="证明">证明</h2><p>先证 <span class="math inline">\(\eqref{lower}\)</span> : 对 <span class="math inline">\(A\)</span> 部分进行(倍加)<strong>行变换</strong>化为下三角阵, 再对 <span class="math inline">\(D\)</span> 部分进行<strong>列变换</strong>化为下三角阵. 这并不影响 <span class="math inline">\(A\)</span> , <span class="math inline">\(D\)</span> 和分块矩阵的行列式, 且都化为了对角线的乘积. 结论显然.</p><p><span class="math inline">\(\eqref{upper}\)</span> 的证明可以通过取转置得到, <span class="math inline">\(\eqref{diag}\)</span> 是一种特殊情况.</p><p>对于一般情况, 需要利用 <span class="math display">\[\begin{pmatrix}    A&amp;B\\C&amp;D\end{pmatrix}\begin{pmatrix}    I&amp;0\\ -D^{-1}C&amp;I\end{pmatrix}=\begin{pmatrix}    A-BD^{-1}C&amp;B\\0&amp;D\end{pmatrix}.\]</span> 可以把它想成是一种列变换: 把第二列右乘 <span class="math inline">\(-D^{-1}C\)</span> 加到第一列. 两边取行列式并利用 <span class="math inline">\(\det(AB)=\det(A)\det(B)\)</span> 和 <span class="math inline">\(\eqref{upper}\)</span> , 就得到了 <span class="math inline">\(\det(\Gamma)=\det(A-BD^{-1}C)\det(D)\)</span> . 另外一个结论可以利用行变换类似得到.</p><hr><p>下面证 <span class="math inline">\(\eqref{commute}\)</span> . 注意已知 <span class="math inline">\(CD=DC\)</span>.</p><p>我们可以利用 <span class="math display">\[\begin{pmatrix}    A&amp;B\\C&amp;D\end{pmatrix}\begin{pmatrix}    D&amp;0\\-C&amp;I\end{pmatrix}=\begin{pmatrix}    AD-BC&amp;B\\0&amp;D\end{pmatrix}.\]</span> 两边取行列式就得到了 <span class="math display">\[\det(\Gamma)\det(D)=\det(AD-BC)\det(D).\]</span> 如果 <span class="math inline">\(\det(D)\ne0\)</span> , 那么消去 <span class="math inline">\(\det(D)\)</span> 即得结论.</p><p>也可以利用开头的结论<span class="math display">\[\begin{aligned}    \det(\Gamma)    &amp;=\det(A-BD^{-1}C)\det(D)\\    &amp;=\det(AD-BD^{-1}CD)\\    &amp;=\det(AD-BD^{-1}DC)\\    &amp;=\det(AD-BC).\\\end{aligned}\]</span></p><p>当 <span class="math inline">\(\det(D)=0\)</span> 时, 可以给 <span class="math inline">\(D\)</span> 一个扰动. 也就是说, 我们用 <span class="math inline">\(D_\varepsilon=D+\varepsilon I\)</span> 代替 <span class="math inline">\(D\)</span> , 其中 <span class="math inline">\(D_\varepsilon\)</span> 可逆且 <span class="math inline">\(\varepsilon\)</span> 是可以任意小的正数. 这个结论可以利用特征值的性质证明, 也可以利用关于<span class="math inline">\(\varepsilon\)</span>的多项式 <span class="math inline">\(\det(D_\varepsilon)\)</span> 只在有限个点上取 <span class="math inline">\(0\)</span>.</p><p>不难看到 <span class="math inline">\(D_\varepsilon\)</span> 仍然是与 <span class="math inline">\(C\)</span> 可交换的. 然后利用上面的方法可以得到<span class="math display">\[\det(\Gamma)=\det(AD_\varepsilon-BC).\]</span> 令 <span class="math inline">\(\varepsilon\to0\)</span> 便得到了 <span class="math inline">\(\det(\Gamma)=\det(AD-BC).\)</span></p><p>这是由于等号右边是关于 <span class="math inline">\(\varepsilon\)</span> 的多项式, 所以连续, 而 <span class="math inline">\(D_0=D\)</span>.</p><hr><p>对 <span class="math inline">\(\eqref{AB}\)</span>, 只需要对<span class="math display">\[\begin{pmatrix}    I&amp;0\\-I&amp;I\end{pmatrix}\begin{pmatrix}    A&amp;B\\B&amp;A\end{pmatrix}\begin{pmatrix}    I&amp;0\\I&amp;I\end{pmatrix}=\begin{pmatrix}    A+B&amp;B\\0&amp;A-B\end{pmatrix}\]</span>两边取行列式.</p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 线性代数 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>常见的ODE解法</title>
      <link href="/posts/65228/"/>
      <url>/posts/65228/</url>
      
        <content type="html"><![CDATA[<h3 id="可分离变量-ypyqx">1. 可分离变量 <span class="math inline">\(y'=p(y)q(x)\)</span></h3><p>分离变量后两边积分.</p><h3 id="一阶齐次线性-ypxy0">2. 一阶齐次线性 <span class="math inline">\(y'+p(x)y=0\)</span></h3><p><span class="math display">\[y=Ce^{-\int p(x)\d x}\]</span></p><h3 id="一阶非齐次线性-ypxyqx">3. 一阶非齐次线性 <span class="math inline">\(y'+p(x)y=q(x)\)</span></h3><ul><li><p><span class="math inline">\(y=e^{-\int p(x)\d x}\left(C+\int q(x)e^{\int p(x)\d x}\d x\right)\)</span></p></li><li><p>取积分因子 <span class="math inline">\(\mu(x)=e^{\int p(x)\d x}\)</span>.</p></li></ul><blockquote><p>🌰 <span class="math inline">\(y'-2y/x=0\)</span>. <span class="math display">\[\begin{aligned}&amp;\mu(x)=e^{\int-\frac2x \d x}=e^{-2\ln x}=\frac{1}{x^2}\\&amp;\implies{1\over x^2}y'-{2\over x^3}y=0\\&amp;\implies\left({y\over x^2}\right)'=0\\&amp;\implies y=Cx^2\end{aligned}\]</span></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 微分方程 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>为什么用开覆盖定义紧集</title>
      <link href="/posts/47720/"/>
      <url>/posts/47720/</url>
      
        <content type="html"><![CDATA[<p>【定义】一个集合是紧集的意思是，它的任何一个开覆盖都有有限子覆盖。</p><p>【有限覆盖定理】这是说欧式空间中的有界闭集（一维情况下是<span class="math inline">\([a,b]\)</span>）都是紧集。</p><p>【Heine-Borel定理】上面的逆命题，欧式空间中的紧集都是有界闭集。于是就说明了欧式空间中的紧集<span class="math inline">\(\iff\)</span>有界闭集。</p><span id="more"></span><h2 id="为什么用开覆盖而不是闭覆盖呢">为什么用开覆盖而不是闭覆盖呢？</h2><p>简单地思考一下容易发现，如果用闭覆盖定义紧集一点也不好玩：</p><p>我们知道单点集<span class="math inline">\(\{a\}\)</span>是闭集（更严谨地，在<span class="math inline">\(T_1\)</span>空间中），那么把集合<span class="math inline">\(A\)</span>中所有元素拿出来，这些单点集的总体构成一个闭覆盖。比如说对于区间<span class="math inline">\([0,1]\)</span>，这种闭覆盖就是 <span class="math display">\[\bigcup_{x\in[0,1]}\{x\}\]</span> 它有有限子覆盖吗？</p><p>这个闭覆盖的有限成员都是有限个单点集<span class="math inline">\(\{x_1\},\ldots,\{x_n\}\)</span>，明显当<span class="math inline">\(A\)</span>是无限集的时候无法覆盖<span class="math inline">\(A\)</span>。所以按这种方式定义的紧集就是有限集，本质上没有提出新概念。</p><h2 id="用开覆盖定义的紧集有什么用">用开覆盖定义的紧集有什么用？</h2><p>在某种“良好的”集合上：</p><ul><li>连续函数总是一致连续的</li><li>连续函数总是有界的</li><li>连续函数总能取到最值</li><li>任何数列都有收敛子列</li></ul><p>数学家花了一番功夫才发现，这种“良好的”集合其实就是紧集。紧集的定义也有很多等价刻画，比如在欧式空间中就可以简单地定义为有界闭集，在更一般的度量空间中可以定义为序列紧集等等。但是，这些好理解的定义也有局限性，它们只在某些结构良好的空间中成立。</p><p>而在用开覆盖来定义的紧集，虽然抽象，但可以推广到一般的拓扑空间，成了现在使用最广的定义。</p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 拓扑 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>实对称阵的合同对角化</title>
      <link href="/posts/5692/"/>
      <url>/posts/5692/</url>
      
        <content type="html"><![CDATA[<p>设对实对称阵 <span class="math inline">\(A\)</span> 满足 <span class="math inline">\(Q^TAQ=\Lambda\)</span>，其中 <span class="math inline">\(\Lambda\)</span> 是 <span class="math inline">\(A\)</span> 的特征值组成的对角阵，问 <span class="math inline">\(Q\)</span> 是否正交。</p><p>答案是否定的。</p><span id="more"></span><h2 id="分析">分析</h2><p>构造反例时为了方便，可以直接取 <span class="math inline">\(A\)</span> 为对角阵 <span class="math inline">\(\Lambda\)</span>，因为对角阵的对角元就是特征值。</p><p>问题化为：找非正交阵 <span class="math inline">\(Q\)</span>，满足 <span class="math inline">\(Q^T\Lambda Q=\Lambda\)</span>。下面尝试把 <span class="math inline">\(\Lambda\)</span> 写成 <span class="math inline">\(Q^T\Lambda Q\)</span> 的形式： <span class="math display">\[\begin{align*}\Lambda&amp;=(\Lambda^{\frac12}\Lambda^{-\frac12})\Lambda(\Lambda^{-\frac12}\Lambda^{\frac12})\\&amp;=(\Lambda^{\frac12}V^T\Lambda^{-\frac12})\Lambda(\Lambda^{-\frac12}V\Lambda^{\frac12})\\&amp;=Q^T\Lambda Q,\end{align*}\]</span> 其中引入了正交阵 <span class="math inline">\(V\)</span>，可见 <span class="math inline">\(Q=\Lambda^{-\frac12}V\Lambda^{\frac12}\)</span> 是一种选择。什么时候 <span class="math inline">\(Q\)</span> 不正交呢？</p><p>正交矩阵的一个性质是元素的绝对值都不超过1，所以我们选择合适的 <span class="math inline">\(\Lambda\)</span> 和 <span class="math inline">\(V\)</span>，使 <span class="math inline">\(Q\)</span> 中有元素绝对值大于1即可。实际上 <span class="math display">\[q_{ij}=v_{ij}\sqrt{\frac{\lambda_j}{\lambda_i}}，\]</span> <span class="math inline">\(i\)</span> 和 <span class="math inline">\(j\)</span> 不能相等，因为 <span class="math inline">\(|q_{ii}|=|v_{ii}|\leq1\)</span>。</p><p>所以构造步骤为：取正交阵 <span class="math inline">\(V\)</span>，需要其中某个非对角元 <span class="math inline">\(v_{ij}\ne0\)</span>。然后取对角阵<span class="math inline">\(\Lambda\)</span>，其中 <span class="math inline">\(\lambda_j/\lambda_i\)</span> 足够大，使得 <span class="math inline">\(\left|v_{ij}\sqrt{\frac{\lambda_j}{\lambda_i}}\right|&gt;1\)</span>。再构造 <span class="math inline">\(Q=\Lambda^{-\frac12}V\Lambda^{\frac12}\)</span>，那么 <span class="math inline">\(Q\)</span> 不是正交阵，而 <span class="math inline">\(Q^T\Lambda Q=\Lambda\)</span>。</p><h2 id="一个具体的例子">一个具体的例子</h2><p>取 <span class="math display">\[V=\begin{bmatrix}0&amp;1\\1&amp;0\end{bmatrix},\ \Lambda=\begin{bmatrix}1 &amp;\\&amp; 4\end{bmatrix},\]</span> 那么 <span class="math display">\[Q=\begin{bmatrix}1&amp;\\&amp;\frac12\end{bmatrix}\begin{bmatrix}0&amp;1\\1&amp;0\end{bmatrix}\begin{bmatrix}1&amp;\\&amp;2\end{bmatrix}=\begin{bmatrix}0&amp;2\\\frac12&amp;0\end{bmatrix}\ \text{不是正交阵},\]</span> 而<span class="math inline">\(Q^T\Lambda Q=\Lambda\)</span>。</p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 线性代数 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>$\arcsin^2x$的展开式</title>
      <link href="/posts/20316/"/>
      <url>/posts/20316/</url>
      
        <content type="html"><![CDATA[<p>证明 <span class="math display">\[\arcsin^2x=\frac12\sum_{n=1}^\infty{(2x)^{2n}\over n^2{2n\choose n}}.\]</span> <span id="more"></span></p><p>先求导： <span class="math display">\[(\arcsin^2 x)'={2\arcsin x\over\sqrt{1-x^2}}\]</span> 利用恒等式<span class="math inline">\(\arcsin x=\arctan\left(x\over\sqrt{1-x^2}\right)\)</span>，有 <span class="math display">\[\begin{align*}{\arcsin x\over\sqrt{1-x^2}}&amp;={1\over\sqrt{1-x^2}}\arctan\left(x\over\sqrt{1-x^2}\right)\\&amp;=\frac1x\cdot{1\over\sqrt{1-x^2\over x^2}}\arctan\left({1\over\sqrt{1-x^2\over x^2}}\right)\\&amp;=\left.\frac1x\cdot{1\over\sqrt{1-x^2\over x^2}}\arctan\left({t\over\sqrt{1-x^2\over x^2}}\right)\right|_{t=0}^{t=1}\\&amp;=\frac1x\int_0^1{\mathrm dt\over t^2+{1-x^2\over x^2}}\\&amp;=x\int_0^1{\mathrm dt\over 1-x^2+x^2t^2}\\&amp;=x\int_0^1\sum_{n=0}^\infty(x^2-x^2t^2)^n\,\mathrm dt\\&amp;=\int_0^1\sum_{n=0}^\infty (1-t^2)^nx^{2n+1}\,\mathrm dt\\&amp;=\sum_{n=0}^\infty\left(\int_0^1(1-t^2)^n\,\mathrm dt\right) x^{2n+1}\\&amp;=\sum_{n=0}^\infty{(2n)!!\over(2n+1)!!}x^{2n+1}.\end{align*}\]</span> 其中我们利用了<a href="/posts/46715/index.html">结论</a>。</p><p>于是积分： <span class="math display">\[\begin{align*}\arcsin^2x&amp;=\int_0^x(\arcsin^2t)'\,\mathrm dt\\&amp;=2\int_0^x{\arcsin t\over\sqrt{1-t^2}}\,\mathrm dt\\&amp;=2\int_0^x\sum_{n=0}^\infty{(2n)!!\over(2n+1)!!}t^{2n+1}\,\mathrm dt\\&amp;=2\sum_{n=0}^\infty{(2n)!!\over(2n+1)!!}\int_0^x t^{2n+1}\,\mathrm dt\\&amp;=2\sum_{n=0}^\infty{(2n)!!\over(2n+1)!!}\cdot{x^{2n+2}\over2n+2}\\&amp;=2\sum_{n=0}^\infty{(2^nn!)^2\over(2n+1)!}\cdot{x^{2n+2}\over2n+2}\\&amp;=2\sum_{n=0}^\infty{2^{2n}(n!)^2\over(2n+2)!}x^{2n+2}\\&amp;=2\sum_{n=0}^\infty{2^{2n+2}\left((n+1)!\right)^2\over2^2(n+1)^2(2n+2)!}x^{2n+2}\\&amp;=\frac12\sum_{n=0}^\infty{(2x)^{2n+2}\over(n+1)^2{2n+2\choose n+1}}\\&amp;=\frac12\sum_{n=1}^\infty{(2x)^{2n}\over n^2{2n\choose n}}.\end{align*}\]</span></p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 级数 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>计算级数</title>
      <link href="/posts/42963/"/>
      <url>/posts/42963/</url>
      
        <content type="html"><![CDATA[<p>计算 <span class="math display">\[\sum_{n=1}^\infty{n!\over(2n+1)!!}\cdot{1\over n+1}.\]</span></p><span id="more"></span><hr><h2 id="方法一arcsin2x的展开">方法一：<span class="math inline">\(\arcsin^2x\)</span>的展开</h2><p>把双阶乘改写成阶乘。定义 <span class="math display">\[\begin{align*}a_n&amp;={n!\over(2n+1)!!}\cdot{1\over n+1}\\&amp;={n!\over 1\cdot3\cdot5\cdots(2n+1)}\cdot{1\over n+1}\\&amp;={2\cdot4\cdots(2n+2)\cdot n!\over1\cdot2\cdot3\cdots(2n+1)\cdot(2n+2)}\cdot{1\over n+1}\\&amp;={2^{n+1}(n+1)!\cdot n!\over(2n+2)!}\cdot{1\over n+1}\\&amp;={2^{n+1}(n!)^2\over(2n+2)!}\\&amp;={2^{n+1}(n!)^2\over(2n+2)(2n+1)(2n)!}\\&amp;={2^n(n!)^2\over(n+1)(2n+1)(2n)!}\\&amp;={2^n\over(n+1)(2n+1){(2n)!\over(n!)^2}}\\&amp;={2^n\over(n+1)(2n+1){2n\choose n}}\end{align*}\]</span> 求和的时候移动一下下标，把分母的<span class="math inline">\(n+1\)</span>变成<span class="math inline">\(n\)</span>： <span class="math display">\[\begin{align*}\sum_{n=1}^\infty a_n&amp;=\sum_{n=1}^\infty {2^n\over(n+1)(2n+1){2n\choose n}}\\&amp;=\sum_{n=2}^\infty{2^{n-1}\over n(2n-1){2n-2\choose n-1}}\\&amp;=\sum_{n=2}^\infty{2^{n}\over 2n(2n-1){(2n-2)!\over\left((n-1)!\right)^2}}\\&amp;=\sum_{n=2}^\infty{2^n\over{(2n)!\over\left((n-1)!\right)^2}}\\&amp;=\sum_{n=2}^\infty{2^n\over n^2{(2n)!\over (n!)^2}}\\&amp;=\sum_{n=2}^\infty{2^n\over n^2{2n\choose n}}\end{align*}\]</span> 热知识：<span class="math inline">\(\arcsin^2 x\)</span>的展开式满足 <span class="math display">\[2\arcsin^2\left(\frac x2\right)=\sum_{n=1}^\infty{x^{2n}\over n^2{2n\choose n}}.\]</span> 它的证明比较占篇幅，我写在<a href="/posts/20316/index.html">这里</a>.</p><p>其中令<span class="math inline">\(x=\sqrt2\)</span>： <span class="math display">\[2\arcsin^2\left(\frac{\sqrt2}{2}\right)=\sum_{n=1}^\infty{2^n\over n^2{2n\choose n}}=2\left(\frac{\pi}{4}\right)^2={\pi^2\over8}.\]</span> 于是 <span class="math display">\[\sum_{n=1}^\infty a_n=\sum_{n=2}^\infty{2^n\over n^2{2n\choose n}}={\pi^2\over8}-1.\]</span></p><hr><h2 id="方法二累次积分">方法二：累次积分</h2><p>记 <span class="math display">\[a_n={n!\over(2n+1)!!}\cdot{1\over n+1}，\]</span> 把两个因子都表示成积分： <span class="math display">\[{1\over n+1}=\int_0^1x^n\,\mathrm dx\]</span></p><p><span class="math display">\[\begin{align*}{n!\over(2n+1)!!}&amp;={n!\over 1\cdot3\cdot5\cdots(2n+1)}\\&amp;={2\cdot4\cdots(2n)\cdot n!\over1\cdot2\cdot3\cdots(2n)\cdot(2n+1)}\\&amp;={2^n(n!)^2\over(2n+1)!}\\&amp;={2^n(\Gamma(n+1))^2\over\Gamma(2n+2)}\\&amp;=2^n\cdot\mathrm B(n+1,n+1)\\&amp;=2^n\int_0^1y^n(1-y)^n\,\mathrm dy\\&amp;=\int_0^1(2y(1-y))^n\,\mathrm dy\end{align*}\]</span></p><p>其中后者我们利用了<span class="math inline">\(\Gamma(n+1)=n!\)</span>，以及<span class="math inline">\(\mathrm B(x,y)={\Gamma(x)\Gamma(y)\over\Gamma(x+y)}\)</span>.</p><p>于是（从<span class="math inline">\(0\)</span>开始加使得级数结果更加简单）， <span class="math display">\[\begin{align*}\sum_{n=0}^\infty a_n&amp;=\sum_{n=0}^\infty\left(\int_0^1x^n\,\mathrm dx\right)\left(\int_0^1(2y(1-y))^n\,\mathrm dy\right)\\&amp;=\int_0^1\int_0^1\sum_{n=0}^\infty(2xy(1-y))^n\,\mathrm dx\,\mathrm dy\\&amp;=\int_0^1\int_0^1{1\over1-2xy(1-y)}\,\mathrm dx\,\mathrm dy.\end{align*}\]</span> 做代换<span class="math inline">\(y={1+u\over2}\)</span>，使得<span class="math inline">\(y(1-y)={1+u\over2}\cdot{1-u\over2}={1-u^2\over4}.\)</span></p><p>于是， <span class="math display">\[\begin{align*}\int_0^1\int_0^1{1\over1-2xy(1-y)}\,\mathrm dx\,\mathrm dy&amp;=\int_0^1\left(\frac12\int_{-1}^1{1\over1-x\cdot{1-u^2\over2}}\,\mathrm du\right)\,\mathrm dx\\&amp;=\int_0^1\left(\int_{-1}^1{1\over2-x(1-u^2)}\,\mathrm du\right)\,\mathrm dx\\&amp;=\int_0^1\left(\int_{-1}^1{1\over2-x+xu^2}\,\mathrm du\right)\,\mathrm dx\\&amp;=\int_0^1\left(\frac1x\int_{-1}^1{1\over u^2+{2-x\over x}}\,\mathrm du\right)\,\mathrm dx\\&amp;=\int_0^1\left(\left.\frac1x\sqrt{x\over2-x}\arctan{u\over\sqrt{2-x\over x}}\right|_{u=-1}^{u=1}\right)\,\mathrm dx\\&amp;=\int_0^1\left(\frac2x\sqrt{x\over2-x}\arctan{1\over\sqrt{2-x\over x}}\right)\,\mathrm dx\\&amp;=\int_0^1\left({2\over \sqrt{x(2-x)}}\arctan{\sqrt{x\over 2-x}}\right)\,\mathrm dx.\end{align*}\]</span> 做代换<span class="math inline">\(x=1-t\)</span>，使得<span class="math inline">\(x(2-x)=(1-t)(1+t)=1-t^2\)</span>.</p><p>于是， <span class="math display">\[\begin{align*}\text{原积分}=\int_0^1{2\over\sqrt{1-t^2}}\arctan\sqrt{1-t\over1+t}\,\mathrm dt\end{align*}\]</span> 做代换<span class="math inline">\(t=\cos\theta\)</span>，利用半角公式<span class="math inline">\(\tan\frac\theta2=\sqrt{1-\cos\theta\over1+\cos\theta}\)</span>： <span class="math display">\[\begin{align*}\text{原积分}&amp;=\int_0^\frac\pi2{2\over\sin\theta}\arctan\left(\tan\frac\theta2\right)\sin\theta\,\mathrm d\theta\\&amp;=\int_0^\frac\pi2\theta\,\mathrm d\theta\\&amp;={\pi^2\over8}.\end{align*}\]</span> 最终， <span class="math display">\[\sum_{n=1}^\infty a_n=-a_0+\sum_{n=0}^\infty a_n={\pi^2\over8}-1.\]</span></p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 级数 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>定积分性质例题</title>
      <link href="/posts/5066/"/>
      <url>/posts/5066/</url>
      
        <content type="html"><![CDATA[<p><strong>问题：在 <span class="math inline">\([0,\pi]\)</span> 上的连续函数 <span class="math inline">\(f\)</span> 满足</strong> <span class="math display">\[\int_0^\pi f(x)\sin x\,\mathrm dx=\int_0^\pi f(x)\cos x\,\mathrm dx=0,\]</span> <strong>证明 <span class="math inline">\(f\)</span> 在 <span class="math inline">\((0,\pi)\)</span> 内至少有两个零点.</strong></p><span id="more"></span><p><strong>证明:</strong></p><p>不妨设 <span class="math inline">\(f\)</span> 不恒为 0.</p><p>若 <span class="math inline">\(f(x)\)</span> 在 <span class="math inline">\((0,\pi)\)</span> 内无零点, 则不变号, 不妨设 <span class="math inline">\(f(x)&gt;0\)</span>. 此时<span class="math display">\[f(x)\sin x&gt;0,\forall x\in(0,\pi)\implies\int_0^1f(x)\sin x\,\mathrm dx&gt;0,\]</span> 与条件矛盾. 于是 <span class="math inline">\(f(x)\)</span> 在 <span class="math inline">\((0,\pi)\)</span> 上变号, 至少有一个零点.</p><p>若只有一个变号零点 <span class="math inline">\(x_0\in(0,\pi)\)</span>, 不妨设在 <span class="math inline">\((0,x_0)\)</span> 上 <span class="math inline">\(f(x)&gt;0\)</span>, <span class="math inline">\((x_0,\pi)\)</span> 上 <span class="math inline">\(f(x)&lt;0\)</span>. 那么 <span class="math display">\[F(x)=f(x)\sin(x-x_0)\leq0,~\forall x\in(0,\pi).\]</span> 又因为 <span class="math display">\[\begin{align*}\int_0^\pi F(x)\,\mathrm dx&amp;=\cos x_0\int_0^\pi f(x)\sin x\,\mathrm dx-\sin x_0\int_0^\pi f(x)\cos x\,\mathrm dx\\&amp;=\cos x_0\cdot0-\sin x_0\cdot 0\\&amp;=0,\end{align*}\]</span> 故 <span class="math inline">\(F(x)\equiv0\)</span>, 于是 <span class="math inline">\(f(x)\equiv0,~\forall x\in(0,\pi)\)</span>, 矛盾.</p><p>于是 <span class="math inline">\(f(x)\)</span> 在 <span class="math inline">\((0,\pi)\)</span> 上至少有两个零点.</p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 微积分 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>计算定积分</title>
      <link href="/posts/45803/"/>
      <url>/posts/45803/</url>
      
        <content type="html"><![CDATA[<p>计算 <span class="math display">\[\int_0^1{\ln\left(x+\sqrt{1-x^2}\right)\over x}\,\mathrm dx.\]</span> <span id="more"></span></p><hr><h2 id="方法一-feynmans-trick">方法一 （Feynman's Trick）</h2><p>定义 <span class="math display">\[I(a)=\int_{0}^{1} \frac{\ln \left(a x+\sqrt{1-x^{2}}\right)}{x}\,\mathrm d x,\]</span> 那么 <span class="math display">\[\begin{align*}I^{\prime}(a)&amp;=\int_0^1{x\over ax+\sqrt{1-x^2}}\frac1x\,\mathrm dx\\&amp;=\int_{0}^{1} \frac{\mathrm d x}{a x+\sqrt{1-x^{2}}}\\&amp;=\int_0^{\frac\pi2}{\cos t\over a\sin t+\cos t}\,\mathrm dt\\&amp;=: I\end{align*}\]</span> 定义 <span class="math display">\[J=\int_0^{\frac\pi2}{\sin t\over a\sin t +\cos t}\,\mathrm dt,\]</span> 组合积分法： <span class="math display">\[I+aJ=\int_0^\frac\pi2{a\sin t+\cos t\over a\sin t +\cos t}\,\mathrm dt=\frac\pi2\]</span></p><p><span class="math display">\[\begin{align*}aI-J&amp;=\int_0^\frac\pi2{a\cos t-\sin t\over a\sin t+\cos t}\,\mathrm dx\\&amp;=\int_0^\frac\pi2{\mathrm d(a\sin t+\cos t)\over a\sin t+\cos t}\\&amp;=\left.\ln(a\sin t+\cos t)\right|_0^\frac\pi2\\&amp;=\ln a\end{align*}\]</span></p><p>解得 (Cramer法则) <span class="math display">\[\begin{align*}I&amp;={\begin{vmatrix}\frac\pi2&amp;a\\\ln a&amp;-1\end{vmatrix}\over\begin{vmatrix}1&amp;a\\a&amp;-1\end{vmatrix}}\\&amp;=\frac{1}{1+a^{2}}\left(\frac{\pi}{2}+a \ln a\right).\end{align*}\]</span> 此外， <span class="math display">\[\begin{align*}I(0)&amp;=\int_0^1{\ln\sqrt{1-x^2}\over x}\,\mathrm dx\\&amp;=\int_0^1{\ln\sqrt{1-t}\over\sqrt{t}}{\mathrm dt\over 2\sqrt t}&amp;&amp;\text{by $x^2=t$}\\&amp;=\frac14\int_0^1{\ln(1-t)\over t}\,\mathrm dx\\&amp;=-\frac14\int_0^1\sum_{n=1}^\infty{x^{n-1}\over n}\,\mathrm dx&amp;&amp;\text{by Taylor Series}\\&amp;=-\frac14\sum_{n=1}^\infty\frac1n\int_0^1x^{n-1}\,\mathrm dx\\&amp;=-\frac14\sum_{n=1}^\infty\frac{1}{n^2}\\&amp;=-\frac{\pi^2}{24},\end{align*}\]</span> 于是 <span class="math display">\[\begin{align*}\text{原积分}&amp;=I(1)\\&amp;=I(0)+\int_0^1I'(a)\,\mathrm da\\&amp;=-\frac{\pi^2}{24}+\int_0^1\frac{1}{1+a^{2}}\left(\frac{\pi}{2}+a \ln a\right)\,\mathrm da\\&amp;=-\frac{\pi^2}{24}+\frac{\pi}{2}\int_0^1\frac{1}{1+a^{2}}\,\mathrm dx+\int_0^1\frac{a}{1+a^{2}}\ln a\,\mathrm da\\&amp;=-\frac{\pi^2}{24}+\frac\pi2\cdot\frac\pi4+\int_0^1\sum_{n=0}^\infty(-1)^na^{2n+1}\ln a\,\mathrm da\\&amp;=\frac{\pi^2}{12}+\sum_{n=0}^\infty{(-1)^{n+1}\over(2n+2)^2}\\&amp;=\frac{\pi^2}{12}-\frac14\sum_{n=1}^\infty{(-1)^{n}\over n^2}\\&amp;=\frac{\pi^2}{12}-\frac14\cdot\frac{\pi^2}{12}\\&amp;=\frac{\pi^2}{16}.\end{align*}\]</span> <em>注：积分号下求导、积分与求和换序需要有定理保障.</em></p><hr><h2 id="方法二feynmans-trick">方法二（Feynman's Trick）</h2><p><span class="math display">\[I=\int_0^1{\ln(x+\sqrt{1-x^2})\over x}\,\mathrm dx=\int_0^1{\ln \left[x\left(1+{\sqrt{1-x^2\over x^2}}\right)\right]\over x}\,\mathrm dx\]</span></p><p>故作代换<span class="math inline">\(t=\sqrt{1-x^2\over x^2}\)</span>, 那么<span class="math inline">\(x=\frac{1}{\sqrt{1+t^2}}\)</span>, <span class="math inline">\(\mathrm dx=-t(1+t^2)^{-\frac32}\,\mathrm dt:\)</span> <span class="math display">\[\begin{align*}I&amp;=\int_0^\infty{\ln\left[(1+t^2)^{-\frac12}(1+t)\right]\over(1+t^2)^{-\frac12}}\cdot t(1+t^2)^{-\frac32}\,\mathrm dt\\&amp;=\int_0^\infty{t\ln\left({1+t\over\sqrt{1+t^2}}\right)\over 1+t^2}\,\mathrm dt\\&amp;=\frac12\int_0^\infty{t\ln\left({(1+t)^2\over{1+t^2}}\right)\over 1+t^2}\,\mathrm dt\\&amp;=\frac12\int_0^\infty{t\ln\left(1+{2t\over 1+t^2}\right)\over 1+t^2}\,\mathrm dt\\\end{align*}\]</span> 定义 <span class="math display">\[I(a)=\frac12\int_0^\infty{t\ln\left(1+{2at\over 1+t^2}\right)\over 1+t^2}\,\mathrm dt,\]</span> 那么 <span class="math display">\[\begin{align*}I'(a)&amp;=\frac12\int_0^\infty {t\over 1+t^2}\cdot{1\over 1+{2at\over 1+t^2}}\cdot{2t\over 1+t^2}\,\mathrm dt\\&amp;=\int_0^\infty{t^2\over(t^2+1)(t^2+2at+1)}\,\mathrm d t\\&amp;=\frac{1}{2a}\int_0^\infty\left({t\over t^2+1}-{t\over t^2+2at+1}\right)\,\mathrm dt\\&amp;=\frac{1}{2a}\int_0^\infty\left(\frac12\cdot{\mathrm d(t^2+1)\over t^2+1}-\frac12\cdot{\mathrm d(t^2+2at+1)\over t^2+2at+1}+{a\over t^2+2at+1}\,\mathrm dt\right)\\&amp;=\frac{1}{4a}\left.\ln({t^2+1\over t^2+2at+1})\right|_{t=0}^\infty+\frac12\int_0^\infty{1\over(t+a)^2+1-a^2}\,\mathrm dt\\&amp;=0+\frac12\cdot{1\over1-a^2}\int_0^\infty{1\over1+\left({t+a\over\sqrt{1-a^2}}\right)^2}\,\mathrm dt\\&amp;=0+\frac12\cdot{1\over\sqrt{1-a^2}}\int_0^\infty{1\over1+\left({t+a\over\sqrt{1-a^2}}\right)^2}\,\mathrm d\left(t+a\over\sqrt{1-a^2}\right)\\&amp;={1\over 2\sqrt{1-a^2}}\left.\arctan\left(t+a\over\sqrt{1-a^2}\right)\right|_{t=0}^\infty\\&amp;={\frac\pi2-\arctan\left(a\over\sqrt{1-a^2}\right)\over2\sqrt{1-a^2}}\\&amp;={\arctan\left(\sqrt{1-a^2}\over a\right)\over 2\sqrt{1-a^2}}\end{align*}\]</span> 且<span class="math inline">\(I(0)=0\)</span>, 于是 <span class="math display">\[\begin{align*}\text{原积分}&amp;=I(1)\\&amp;=I(0)+\int_0^1 I'(a)\,\mathrm da\\&amp;=\int_0^1{\arctan\left(\sqrt{1-a^2}\over a\right)\over 2\sqrt{1-a^2}}\,\mathrm da\\&amp;=\int_0^\frac\pi2{\arctan({\sin x\over\cos x})\over 2\sin x}\sin x\,\mathrm dx\\&amp;=\int_0^\frac\pi2\frac x2\,\mathrm dx\\&amp;={\pi^2\over16}.\end{align*}\]</span></p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 微积分 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>科普是一项非常难的工作</title>
      <link href="/posts/20918/"/>
      <url>/posts/20918/</url>
      
        <content type="html"><![CDATA[<p>要想当一个好学生，只需要把知识学懂。</p><p>要想当一个好老师，需要一些基础知识，还需要良好的性格和表达能力、心理学和教育学经验。</p><p>要想当一个好教授，需要有专业知识、科研水平，只需要一般般的表达能力。</p><p><strong>而要当一个好的科普工作者，需要有远超学生的理解能力，教授一样的专业水平，老师一样的教学功力，艺术家一样的审美，作家一样的文笔，诗人一样的清高，科学家一样对知识的热爱，艺人一样对大众心理的把控能力，运动员一样的毅力，还要有自身的人格魅力、抗压抗打击能力。</strong></p><p>科普是一项非常难的工作，比讲课教书难得多。因为它面对的不是专业人士，而是乌合之众。这导致科普工作者必须用通俗语言来解释专业知识，却又不至于过于通俗而产生误导。稍微有一点漏洞就会被抓住攻击——有问题的科普比谣言更可怕，比迷信更害人。</p><p>所以，科普工作者是一个神圣的标签，这个名号比想象中要严苛得多。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>利用积分下求导计算无穷积分</title>
      <link href="/posts/30510/"/>
      <url>/posts/30510/</url>
      
        <content type="html"><![CDATA[<p>计算 <span class="math display">\[\int_{-\infty}^{+\infty}{x\sin x\over (x^2+a^2)(x^2+b^2)}\,\mathrm dx.\]</span> 其实是测试一下内嵌pdf.</p><span id="more"></span><div class="pdfobject-container" data-target="/file/integrate.pdf" data-height="500px"></div>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 微积分 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>$f(A)$的特征值</title>
      <link href="/posts/3877/"/>
      <url>/posts/3877/</url>
      
        <content type="html"><![CDATA[<p><strong>引理 (Schur's Lemma): 若<span class="math inline">\(A\)</span>是数域<span class="math inline">\(F\)</span>上的<span class="math inline">\(n\)</span>阶方阵, 且<span class="math inline">\(A\)</span>的特征值都在<span class="math inline">\(F\)</span>中, 那么<span class="math inline">\(A\)</span>与一个上三角阵相似.</strong></p><p><strong>证明: </strong></p><p>归纳法. 当<span class="math inline">\(n=1\)</span>时显然成立: 此时<span class="math inline">\(A\)</span>本身是上三角阵.</p><p>假设结论对<span class="math inline">\(n-1\)</span>阶方阵成立, 且<span class="math inline">\(A\in F^{n\times n}\)</span>的特征值都在<span class="math inline">\(F\)</span>中. 记特征向量<span class="math inline">\(v_1\)</span>对应的特征值是<span class="math inline">\(\lambda_1\in F\)</span>, 并把<span class="math inline">\(v_1\)</span>扩展为<span class="math inline">\(F^n\)</span>的一组基<span class="math inline">\(\mathcal B=(v_1,\ldots,v_n)\)</span>. 在这组基下, <span class="math inline">\(A\)</span>被相似变换为矩阵<span class="math display">\[[A]_\mathcal{B}=\begin{bmatrix}\lambda_1 &amp; *\\ 0 &amp; A_1\end{bmatrix},\]</span> 其中<span class="math inline">\(A_1\in F^{(n-1)\times (n-1)}\)</span>.</p><span id="more"></span><p>由于相似矩阵有相同的特征多项式, 于是<span class="math display">\[\det(xI-A)=\det(xI-[A]_\mathcal B)=(x-\lambda_1)\det(xI-A_1).\]</span> 又因为<span class="math inline">\(\det(xI-A)\)</span>的根都在<span class="math inline">\(F\)</span>中, 所以<span class="math inline">\(\det(xI-A_1)\)</span>的根也都在<span class="math inline">\(F\)</span>中, 这说明<span class="math inline">\(A_1\)</span>是特征值都在<span class="math inline">\(F\)</span>中的<span class="math inline">\(n-1\)</span>阶方阵.</p><p>于是根据归纳假设, 存在可逆阵<span class="math inline">\(P\in F^{(n-1)\times(n-1)}\)</span>使得<span class="math display">\[U=PA_1P^{-1}\]</span>是上三角阵. 那么只需构造可逆阵<span class="math display">\[Q=\begin{bmatrix}1&amp;0\\0&amp;P\end{bmatrix},\]</span>便有<span class="math display">\[Q[A]_\mathcal B Q^{-1}=\begin{bmatrix}1&amp;0\\0&amp;P\end{bmatrix}\begin{bmatrix}\lambda_1&amp;*\\0&amp;A_1\end{bmatrix}\begin{bmatrix}1&amp;0\\0&amp;P^{-1}\end{bmatrix}=\begin{bmatrix}\lambda_1&amp;*\\0&amp;U\end{bmatrix}\]</span>是上三角阵.</p><p>这说明<span class="math inline">\(A\)</span>与一个上三角阵相似, 归纳法完成.</p><p><em>注: 一个更强的结论是Jordan标准型.</em></p><hr><p><strong>定理: 若<span class="math inline">\(A\)</span>是数域<span class="math inline">\(F\)</span>上的<span class="math inline">\(n\)</span>阶方阵, 且<span class="math inline">\(A\)</span>的特征值都在<span class="math inline">\(F\)</span>中. <span class="math inline">\(f\)</span>是<span class="math inline">\(F\)</span>上的多项式, 那么<span class="math inline">\(a\)</span>是<span class="math inline">\(f(A)\)</span>的特征值<span class="math inline">\(\iff\)</span><span class="math inline">\(a=f(\lambda)\)</span>, 其中<span class="math inline">\(\lambda\)</span>是<span class="math inline">\(A\)</span>的特征值.</strong></p><p><strong>证明:</strong></p><p><span class="math inline">\((\Longleftarrow)\)</span>容易, 略.</p><p><span class="math inline">\((\Longrightarrow)\)</span>根据引理, <span class="math inline">\(A\)</span>与一个上三角阵<span class="math inline">\(T\)</span>相似: <span class="math display">\[A=Q^{-1}TQ.\]</span> 由于<span class="math inline">\(f\)</span>是多项式, 那么 <span class="math display">\[f(A)=f(Q^{-1}TQ)=Q^{-1}f(T)Q.\]</span> 根据上三角阵的性质, <span class="math inline">\(f(T)\)</span>也是上三角阵, 且<span class="math inline">\(f(T)\)</span>的对角元恰好是<span class="math inline">\(f(\lambda)\)</span>, 其中<span class="math inline">\(\lambda\)</span>是<span class="math inline">\(T\)</span>的对角元.</p><p>因为相似矩阵有相同的特征值, 且上三角阵的对角元与其特征值对应, 于是<span class="math inline">\(f(A)\)</span>的特征值都是<span class="math inline">\(f(\lambda)\)</span>的形式, 其中<span class="math inline">\(\lambda\)</span>是<span class="math inline">\(A\)</span>的特征值.</p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
          <category> 线性代数 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Hexo 用法记录</title>
      <link href="/posts/16107/"/>
      <url>/posts/16107/</url>
      
        <content type="html"><![CDATA[<p>插入图片: </p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/file/*"</span> <span class="attr">width</span>=<span class="string">"250"</span> <span class="attr">height</span>=<span class="string">"250"</span>/&gt;</span></span><br></pre></td></tr></tbody></table></figure> <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{% asset_img image.jpg This is an image %}</span><br></pre></td></tr></tbody></table></figure><p></p><p>嵌入 pdf: </p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{% pdf /file/*.pdf %}</span><br></pre></td></tr></tbody></table></figure><p></p><p>链接文章: </p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{% post_link * 说明 %}</span><br></pre></td></tr></tbody></table></figure> <figure class="highlight md"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">title</span>](<span class="link">/posts/***/index.html</span>)</span><br></pre></td></tr></tbody></table></figure><p></p>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
          <category> hexo </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>青春万岁</title>
      <link href="/posts/9178/"/>
      <url>/posts/9178/</url>
      
        <content type="html"><![CDATA[<p>所有的日子，所有的日子都来吧</p><p>让我编织你们，用青春的金线，和幸福的璎珞，编织你们</p><p>有那小船上的微笑，月下校园的欢舞，细雨蒙蒙里踏青，初雪的早晨行军</p><p>还有热烈的争论，跃动的，温暖的心</p><p>是转眼过去的日子，也是充满遐想的日子</p><p>纷纷的心愿迷离，像春天的雨</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>过年</title>
      <link href="/posts/22344/"/>
      <url>/posts/22344/</url>
      
        <content type="html"><![CDATA[<p>写完春联，躺在窗边的床上，阳光晒着肚皮，窗外是湛蓝的天空，屋外是油锅的噼啪声</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>没什么远大理想</title>
      <link href="/posts/48210/"/>
      <url>/posts/48210/</url>
      
        <content type="html"><![CDATA[<p>我只希望在一个天气不那么晴的日子里，在一个不那么吵的地方，读一本没那么有用的书，听一点不那么流行的歌。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>英国的上午</title>
      <link href="/posts/34132/"/>
      <url>/posts/34132/</url>
      
        <content type="html"><![CDATA[<p>我看见透蓝的天空，茵绿的草地，金黄的落叶。我闻到湿润的泥土，幽香的野花，沁凉的空气。我看见喜鹊圆滚的肚子和松鼠蓬松的尾巴。</p><p>我看见倾洒下来的阳光和摇曳的树影。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>春雨</title>
      <link href="/posts/27822/"/>
      <url>/posts/27822/</url>
      
        <content type="html"><![CDATA[<p>春雨吵醒了一簇簇的红艳，沾湿了一树树的花香。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>晴朗的校园</title>
      <link href="/posts/4892/"/>
      <url>/posts/4892/</url>
      
        <content type="html"><![CDATA[<p>今天的世界格外明朗。徐徐的清风，轻柔的阳光，点点嫩芽，热闹的人群。一切都还是那样平常，但仿佛和那些日漫中的理想校园，只差着几片飞舞的樱花瓣。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>小憩</title>
      <link href="/posts/53822/"/>
      <url>/posts/53822/</url>
      
        <content type="html"><![CDATA[<p>代码敲累了。仰在椅子上。看午后的阳光，悠闲地洒下。窗纱外的一片明亮。冬日空气里的沁凉。街上的嘈杂。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>雪</title>
      <link href="/posts/47930/"/>
      <url>/posts/47930/</url>
      
        <content type="html"><![CDATA[<p>满世界白茫茫的一片。 静谧而优雅。 惬意而自在。 踏着碎琼乱玉，咯吱咯吱的声音和触感。 沁凉的空气，明亮的阳光，反射着熠熠生辉。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>秋心</title>
      <link href="/posts/38252/"/>
      <url>/posts/38252/</url>
      
        <content type="html"><![CDATA[<p>风起时，一片一片，金黄的，鹅黄的，浅绿的，接连着，打着卷地，在我噙着泪的眼前飘落，在地上挤成一团。 风住时，一棵一棵，笔挺的，有着优美线条和外形的，银杏，梧桐，在被悲伤吞噬了的我眼前伫立，宛若画中那么美，那么静。 风声，孩子们的说笑，木棍扫过落叶的沙沙声，喜鹊，麻雀，还有一个人，缓慢而轻轻的，脚步。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>林中漫步</title>
      <link href="/posts/16963/"/>
      <url>/posts/16963/</url>
      
        <content type="html"><![CDATA[<p>林风拂幽径，鸟鸣惊落花</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>这种教育的意义就是磨灭所有人的学习热情</title>
      <link href="/posts/51371/"/>
      <url>/posts/51371/</url>
      
        <content type="html"><![CDATA[<p>今天我们学习检索，首先，文献分为以下几类，这几类有这样的联系，检索有以下几种方法，它们有这样那样的优缺点，这个检索是在这个时间由这家公司创办的。 下面我们做检索的练习，检索分为以下几个步骤，首先就是检索准备。要明确学科属性，弄清信息类型，明确信息要求。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>廿四</title>
      <link href="/posts/38636/"/>
      <url>/posts/38636/</url>
      
        <content type="html"><![CDATA[<p>优秀的高中很多，但能如她这般，令学子们痴恋深情到每每想起她时，心中的温暖都会澎湃良久，恐怕少之又少。</p><p>交付给廿四的青春，是完美的，是不容置辩的无悔无憾。对她的回眸，是噙着泪的仰望。真正在这里拼搏过的人，才会懂得何为傲、霸、狂，在这里受过挫的人，才会明白何为忍、毅、刚。什么是创造与梦想，什么是起伏和跌宕，什么令我们热泪盈眶，什么又是我们所说的，一生的荣光。</p><p>不论结果，只凭你在这里留下的青春，就够你荣耀一生，就是你最优秀的铁证。遗憾不属于廿四人，挺起胸来，面对你要的梦想和创造，失败和成功。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>自习</title>
      <link href="/posts/12721/"/>
      <url>/posts/12721/</url>
      
        <content type="html"><![CDATA[<p>屋外的松树轻柔地律动，都贴到窗上来了。白茫茫的远空，不缓不急的阳光，飘香的槐花，清凉的音乐。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>春天来了</title>
      <link href="/posts/61668/"/>
      <url>/posts/61668/</url>
      
        <content type="html"><![CDATA[<p>没有了过往的凛冽，风变得和煦轻柔起来，枝条上冒出了毛茸茸的骨朵。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>午后</title>
      <link href="/posts/6636/"/>
      <url>/posts/6636/</url>
      
        <content type="html"><![CDATA[<p>阳光从不吝啬，海风亦从未疲倦。歌声随时慵懒，每个下午，均可惬意。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>普达措</title>
      <link href="/posts/39803/"/>
      <url>/posts/39803/</url>
      
        <content type="html"><![CDATA[<p>彳彳亍亍，林雪风花，幽幽皑皑飒飒。 探探寻寻，湖鸟山虫，澹澹呖呖葱葱。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>泸沽湖</title>
      <link href="/posts/30601/"/>
      <url>/posts/30601/</url>
      
        <content type="html"><![CDATA[<p>淡霭缭绕，彩彻区朗。澄波荡漾，野凫满塘。泛舟湖上，蒹葭苍苍。薄暮冥冥，跃金浮光。</p><p>每次下车，定有一群道德绑架犯伪装成兜售小贩的样子，为了一丁点蝇头小利各种卑鄙手段无所不用其极。吵嚷纠缠，丢尽了彝族人的脸，无论怎样的美景都在刹那间黯淡无光。试问我泱泱华夏，如今是否还有一片真正的净土？最后一丝少数民族的质朴，亦被利益磨到尸骨无存！</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>丽江</title>
      <link href="/posts/23622/"/>
      <url>/posts/23622/</url>
      
        <content type="html"><![CDATA[<p>清晨，冬风偏有着独特的和煦，暖暖的阳光洒下，轻吻着这个慵懒的小城。青石板的两侧，一簇红一簇粉的丛生，芬芳馥郁。清澄的流水，不急不缓地从家家户户门前流过，雀跃着一片两片的花瓣，抚动着缠绵的青荇，挑弄着披拂的藤蔓。</p><p>踱入深巷，古色古香的建筑和装饰，质朴而不失深邃的画作文字，神秘地述说着一个古老的民族对自然的敬畏与对文化根源的认同。仿佛等待须臾，小巷的尽头就会传来一阵悠远、空旷的卖杏花的吆喝似的。</p><p>午后，携几枚沁爽的青枣，品几块玫瑰饼，惹得唇齿间尽是花香。百鸟嘤鸣，鸡犬相闻，长桥卧波，复道行空，小桥流水飞红。远眺，巍峨的雪山正熠熠闪着金辉。 傍晚，华灯初上。人群熙攘起来，叫卖声，丝竹声不绝于耳，花草香，珍馐香扑面而来。渐渐深凝的夜，又将古镇拉回沉寂，一同那远山的轮廓。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>圣诞节</title>
      <link href="/posts/19175/"/>
      <url>/posts/19175/</url>
      
        <content type="html"><![CDATA[<p>圣诞树上挂满了忽闪忽闪的小彩灯，在富丽堂皇的商店里，在暖黄的水晶吊灯下，温柔地伫立。</p><p>空气中弥漫着姜汁饼的甜美气息，耳畔回荡着童声喜乐、纯净的颂歌，以及驯鹿的铃儿叮当。黑漆漆的夜空中洒下鹅毛白的雪花，沁爽洁净的雪毯上，花白胡子的圣诞老人留下一道雪橇的印记。与可人儿相挽，踱步在礼品商城，柔情地看他趴着橱窗，瞪大了好奇的双眼。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>自然</title>
      <link href="/posts/28624/"/>
      <url>/posts/28624/</url>
      
        <content type="html"><![CDATA[<p>傍晚的热闹休闲沙滩，午夜的萤火魔幻森林，与异域篝火、冬不拉。</p><p>人从自然中来，回不到自然中去。那对山幽鸟虫鸣的向往，会因为几声平凡不过的响动，转为惶恐。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>回家</title>
      <link href="/posts/8368/"/>
      <url>/posts/8368/</url>
      
        <content type="html"><![CDATA[<p>沁人的凉风和湛蓝中的云卷云舒，熟悉的楼房和那条街道，一簇簇与一丛丛，忽然让少年有了一丝归属，潮湿了眼眶。他颤抖着四肢，任每一个毛孔大肆呼吸着。 依稀在记忆中的水库，被荒草占据。大把的野草，湮没了少年心中，那未曾发出的约定。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>放学路上</title>
      <link href="/posts/61326/"/>
      <url>/posts/61326/</url>
      
        <content type="html"><![CDATA[<p>无法抑制去想，记不得那最后一次黄昏的放学路上。耳畔的空灵悠扬，橙红的落日夕阳，沁人的微风飘荡。脚下波光粼粼，眺望远方鹅黄的垂柳，爬上石阶的嫩草。如梦似幻。</p><p>晚风，斜阳，音乐，白鹅，湖面，屋檐的金辉，静夜的虫鸣与群星。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
