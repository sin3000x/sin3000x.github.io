---
title: 反转链表
categories:
  - 计算机
  - 算法
tags:
  - 链表
mathjax: true
abbrlink: 967
date: 2022-07-28 11:43:56
---
```python
class ListNode:
    def __init__(self, val):
        self.val = val
        self.next = None
```
我们传入一个 ListNode 作为 head 节点, 然后需要一个函数 reverse 来反转这个链表, 返回新的 head 节点 (实际上是原来的 tail).

<!--more-->

## iteration
```python
def reverse(head):
    prev = None # 保存 head 的上一个节点
    while head:
        next = head.next  # 先保存下一个, 否则反转后找不到
        head.next = prev  # 反转
        # prev 和 head 往后走
        prev = head
        head = next
    return prev # 此时 head 走到了 None
```
时间: $O(n)$

空间: $O(1)$

## recursion
```python
def reverse(head):
    # base case: 空链表或只有一个节点, 不用反转
    if head is None or head.next is None:
        return head
    # 从第二个节点开始反转, 返回新的 head 节点
    new_head = reverse(head.next)
    # 把 head 和新的 head 节点之间的连接反过来
    head.next.next = head
    head.next = None  # 否则出现环
    return new_head
```

![给出原始问题...](https://s2.loli.net/2023/04/30/XDOuBQNz6GZMpmW.png)
![先完成子问题...](https://s2.loli.net/2023/04/30/4zoDc2CpnVbIRxO.png)
![再处理最后的连接…](https://s2.loli.net/2023/04/30/xCeZkJgXraDT7BS.png)

时间: $O(n)$

空间: $O(n)$